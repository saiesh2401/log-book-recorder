var uC=Object.defineProperty;var qA=a=>{throw TypeError(a)};var hC=(a,e,t)=>e in a?uC(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t;var Pe=(a,e,t)=>hC(a,typeof e!="symbol"?e+"":e,t),Wm=(a,e,t)=>e.has(a)||qA("Cannot "+t);var u=(a,e,t)=>(Wm(a,e,"read from private field"),t?t.call(a):e.get(a)),T=(a,e,t)=>e.has(a)?qA("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(a):e.set(a,t),S=(a,e,t,n)=>(Wm(a,e,"write to private field"),n?n.call(a,t):e.set(a,t),t),x=(a,e,t)=>(Wm(a,e,"access private method"),t);var yn=(a,e,t,n)=>({set _(r){S(a,e,r,t)},get _(){return u(a,e,n)}});function dC(a,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const r in n)if(r!=="default"&&!(r in a)){const o=Object.getOwnPropertyDescriptor(n,r);o&&Object.defineProperty(a,r,o.get?o:{enumerable:!0,get:()=>n[r]})}}}return Object.freeze(Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function t(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(r){if(r.ep)return;r.ep=!0;const o=t(r);fetch(r.href,o)}})();function Fv(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var Vm={exports:{}},mu={},Gm={exports:{}},je={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XA;function fC(){if(XA)return je;XA=1;var a=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.iterator;function v(D){return D===null||typeof D!="object"?null:(D=y&&D[y]||D["@@iterator"],typeof D=="function"?D:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,E={};function C(D,G,oe){this.props=D,this.context=G,this.refs=E,this.updater=oe||b}C.prototype.isReactComponent={},C.prototype.setState=function(D,G){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,G,"setState")},C.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function k(){}k.prototype=C.prototype;function L(D,G,oe){this.props=D,this.context=G,this.refs=E,this.updater=oe||b}var M=L.prototype=new k;M.constructor=L,A(M,C.prototype),M.isPureReactComponent=!0;var F=Array.isArray,z=Object.prototype.hasOwnProperty,U={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function q(D,G,oe){var we,Te={},ye=null,Y=null;if(G!=null)for(we in G.ref!==void 0&&(Y=G.ref),G.key!==void 0&&(ye=""+G.key),G)z.call(G,we)&&!N.hasOwnProperty(we)&&(Te[we]=G[we]);var Se=arguments.length-2;if(Se===1)Te.children=oe;else if(1<Se){for(var ke=Array(Se),Ce=0;Ce<Se;Ce++)ke[Ce]=arguments[Ce+2];Te.children=ke}if(D&&D.defaultProps)for(we in Se=D.defaultProps,Se)Te[we]===void 0&&(Te[we]=Se[we]);return{$$typeof:a,type:D,key:ye,ref:Y,props:Te,_owner:U.current}}function J(D,G){return{$$typeof:a,type:D.type,key:G,ref:D.ref,props:D.props,_owner:D._owner}}function se(D){return typeof D=="object"&&D!==null&&D.$$typeof===a}function ne(D){var G={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(oe){return G[oe]})}var be=/\/+/g;function de(D,G){return typeof D=="object"&&D!==null&&D.key!=null?ne(""+D.key):G.toString(36)}function ce(D,G,oe,we,Te){var ye=typeof D;(ye==="undefined"||ye==="boolean")&&(D=null);var Y=!1;if(D===null)Y=!0;else switch(ye){case"string":case"number":Y=!0;break;case"object":switch(D.$$typeof){case a:case e:Y=!0}}if(Y)return Y=D,Te=Te(Y),D=we===""?"."+de(Y,0):we,F(Te)?(oe="",D!=null&&(oe=D.replace(be,"$&/")+"/"),ce(Te,G,oe,"",function(Ce){return Ce})):Te!=null&&(se(Te)&&(Te=J(Te,oe+(!Te.key||Y&&Y.key===Te.key?"":(""+Te.key).replace(be,"$&/")+"/")+D)),G.push(Te)),1;if(Y=0,we=we===""?".":we+":",F(D))for(var Se=0;Se<D.length;Se++){ye=D[Se];var ke=we+de(ye,Se);Y+=ce(ye,G,oe,ke,Te)}else if(ke=v(D),typeof ke=="function")for(D=ke.call(D),Se=0;!(ye=D.next()).done;)ye=ye.value,ke=we+de(ye,Se++),Y+=ce(ye,G,oe,ke,Te);else if(ye==="object")throw G=String(D),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.");return Y}function me(D,G,oe){if(D==null)return D;var we=[],Te=0;return ce(D,we,"","",function(ye){return G.call(oe,ye,Te++)}),we}function le(D){if(D._status===-1){var G=D._result;G=G(),G.then(function(oe){(D._status===0||D._status===-1)&&(D._status=1,D._result=oe)},function(oe){(D._status===0||D._status===-1)&&(D._status=2,D._result=oe)}),D._status===-1&&(D._status=0,D._result=G)}if(D._status===1)return D._result.default;throw D._result}var Z={current:null},V={transition:null},ae={ReactCurrentDispatcher:Z,ReactCurrentBatchConfig:V,ReactCurrentOwner:U};function te(){throw Error("act(...) is not supported in production builds of React.")}return je.Children={map:me,forEach:function(D,G,oe){me(D,function(){G.apply(this,arguments)},oe)},count:function(D){var G=0;return me(D,function(){G++}),G},toArray:function(D){return me(D,function(G){return G})||[]},only:function(D){if(!se(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},je.Component=C,je.Fragment=t,je.Profiler=r,je.PureComponent=L,je.StrictMode=n,je.Suspense=d,je.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ae,je.act=te,je.cloneElement=function(D,G,oe){if(D==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+D+".");var we=A({},D.props),Te=D.key,ye=D.ref,Y=D._owner;if(G!=null){if(G.ref!==void 0&&(ye=G.ref,Y=U.current),G.key!==void 0&&(Te=""+G.key),D.type&&D.type.defaultProps)var Se=D.type.defaultProps;for(ke in G)z.call(G,ke)&&!N.hasOwnProperty(ke)&&(we[ke]=G[ke]===void 0&&Se!==void 0?Se[ke]:G[ke])}var ke=arguments.length-2;if(ke===1)we.children=oe;else if(1<ke){Se=Array(ke);for(var Ce=0;Ce<ke;Ce++)Se[Ce]=arguments[Ce+2];we.children=Se}return{$$typeof:a,type:D.type,key:Te,ref:ye,props:we,_owner:Y}},je.createContext=function(D){return D={$$typeof:l,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},D.Provider={$$typeof:o,_context:D},D.Consumer=D},je.createElement=q,je.createFactory=function(D){var G=q.bind(null,D);return G.type=D,G},je.createRef=function(){return{current:null}},je.forwardRef=function(D){return{$$typeof:h,render:D}},je.isValidElement=se,je.lazy=function(D){return{$$typeof:g,_payload:{_status:-1,_result:D},_init:le}},je.memo=function(D,G){return{$$typeof:p,type:D,compare:G===void 0?null:G}},je.startTransition=function(D){var G=V.transition;V.transition={};try{D()}finally{V.transition=G}},je.unstable_act=te,je.useCallback=function(D,G){return Z.current.useCallback(D,G)},je.useContext=function(D){return Z.current.useContext(D)},je.useDebugValue=function(){},je.useDeferredValue=function(D){return Z.current.useDeferredValue(D)},je.useEffect=function(D,G){return Z.current.useEffect(D,G)},je.useId=function(){return Z.current.useId()},je.useImperativeHandle=function(D,G,oe){return Z.current.useImperativeHandle(D,G,oe)},je.useInsertionEffect=function(D,G){return Z.current.useInsertionEffect(D,G)},je.useLayoutEffect=function(D,G){return Z.current.useLayoutEffect(D,G)},je.useMemo=function(D,G){return Z.current.useMemo(D,G)},je.useReducer=function(D,G,oe){return Z.current.useReducer(D,G,oe)},je.useRef=function(D){return Z.current.useRef(D)},je.useState=function(D){return Z.current.useState(D)},je.useSyncExternalStore=function(D,G,oe){return Z.current.useSyncExternalStore(D,G,oe)},je.useTransition=function(){return Z.current.useTransition()},je.version="18.3.1",je}var KA;function Dv(){return KA||(KA=1,Gm.exports=fC()),Gm.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YA;function pC(){if(YA)return mu;YA=1;var a=Dv(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,r=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(h,d,p){var g,y={},v=null,b=null;p!==void 0&&(v=""+p),d.key!==void 0&&(v=""+d.key),d.ref!==void 0&&(b=d.ref);for(g in d)n.call(d,g)&&!o.hasOwnProperty(g)&&(y[g]=d[g]);if(h&&h.defaultProps)for(g in d=h.defaultProps,d)y[g]===void 0&&(y[g]=d[g]);return{$$typeof:e,type:h,key:v,ref:b,props:y,_owner:r.current}}return mu.Fragment=t,mu.jsx=l,mu.jsxs=l,mu}var QA;function gC(){return QA||(QA=1,Vm.exports=pC()),Vm.exports}var P=gC(),j=Dv();const lS=Fv(j),mC=dC({__proto__:null,default:lS},[j]);var Cf={},qm={exports:{}},Rn={},Xm={exports:{}},Km={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JA;function yC(){return JA||(JA=1,(function(a){function e(V,ae){var te=V.length;V.push(ae);e:for(;0<te;){var D=te-1>>>1,G=V[D];if(0<r(G,ae))V[D]=ae,V[te]=G,te=D;else break e}}function t(V){return V.length===0?null:V[0]}function n(V){if(V.length===0)return null;var ae=V[0],te=V.pop();if(te!==ae){V[0]=te;e:for(var D=0,G=V.length,oe=G>>>1;D<oe;){var we=2*(D+1)-1,Te=V[we],ye=we+1,Y=V[ye];if(0>r(Te,te))ye<G&&0>r(Y,Te)?(V[D]=Y,V[ye]=te,D=ye):(V[D]=Te,V[we]=te,D=we);else if(ye<G&&0>r(Y,te))V[D]=Y,V[ye]=te,D=ye;else break e}}return ae}function r(V,ae){var te=V.sortIndex-ae.sortIndex;return te!==0?te:V.id-ae.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;a.unstable_now=function(){return o.now()}}else{var l=Date,h=l.now();a.unstable_now=function(){return l.now()-h}}var d=[],p=[],g=1,y=null,v=3,b=!1,A=!1,E=!1,C=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function M(V){for(var ae=t(p);ae!==null;){if(ae.callback===null)n(p);else if(ae.startTime<=V)n(p),ae.sortIndex=ae.expirationTime,e(d,ae);else break;ae=t(p)}}function F(V){if(E=!1,M(V),!A)if(t(d)!==null)A=!0,le(z);else{var ae=t(p);ae!==null&&Z(F,ae.startTime-V)}}function z(V,ae){A=!1,E&&(E=!1,k(q),q=-1),b=!0;var te=v;try{for(M(ae),y=t(d);y!==null&&(!(y.expirationTime>ae)||V&&!ne());){var D=y.callback;if(typeof D=="function"){y.callback=null,v=y.priorityLevel;var G=D(y.expirationTime<=ae);ae=a.unstable_now(),typeof G=="function"?y.callback=G:y===t(d)&&n(d),M(ae)}else n(d);y=t(d)}if(y!==null)var oe=!0;else{var we=t(p);we!==null&&Z(F,we.startTime-ae),oe=!1}return oe}finally{y=null,v=te,b=!1}}var U=!1,N=null,q=-1,J=5,se=-1;function ne(){return!(a.unstable_now()-se<J)}function be(){if(N!==null){var V=a.unstable_now();se=V;var ae=!0;try{ae=N(!0,V)}finally{ae?de():(U=!1,N=null)}}else U=!1}var de;if(typeof L=="function")de=function(){L(be)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,me=ce.port2;ce.port1.onmessage=be,de=function(){me.postMessage(null)}}else de=function(){C(be,0)};function le(V){N=V,U||(U=!0,de())}function Z(V,ae){q=C(function(){V(a.unstable_now())},ae)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(V){V.callback=null},a.unstable_continueExecution=function(){A||b||(A=!0,le(z))},a.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):J=0<V?Math.floor(1e3/V):5},a.unstable_getCurrentPriorityLevel=function(){return v},a.unstable_getFirstCallbackNode=function(){return t(d)},a.unstable_next=function(V){switch(v){case 1:case 2:case 3:var ae=3;break;default:ae=v}var te=v;v=ae;try{return V()}finally{v=te}},a.unstable_pauseExecution=function(){},a.unstable_requestPaint=function(){},a.unstable_runWithPriority=function(V,ae){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var te=v;v=V;try{return ae()}finally{v=te}},a.unstable_scheduleCallback=function(V,ae,te){var D=a.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?D+te:D):te=D,V){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=te+G,V={id:g++,callback:ae,priorityLevel:V,startTime:te,expirationTime:G,sortIndex:-1},te>D?(V.sortIndex=te,e(p,V),t(d)===null&&V===t(p)&&(E?(k(q),q=-1):E=!0,Z(F,te-D))):(V.sortIndex=G,e(d,V),A||b||(A=!0,le(z))),V},a.unstable_shouldYield=ne,a.unstable_wrapCallback=function(V){var ae=v;return function(){var te=v;v=ae;try{return V.apply(this,arguments)}finally{v=te}}}})(Km)),Km}var ZA;function vC(){return ZA||(ZA=1,Xm.exports=yC()),Xm.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eb;function wC(){if(eb)return Rn;eb=1;var a=Dv(),e=vC();function t(i){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+i,c=1;c<arguments.length;c++)s+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,r={};function o(i,s){l(i,s),l(i+"Capture",s)}function l(i,s){for(r[i]=s,i=0;i<s.length;i++)n.add(s[i])}var h=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},y={};function v(i){return d.call(y,i)?!0:d.call(g,i)?!1:p.test(i)?y[i]=!0:(g[i]=!0,!1)}function b(i,s,c,f){if(c!==null&&c.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return f?!1:c!==null?!c.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function A(i,s,c,f){if(s===null||typeof s>"u"||b(i,s,c,f))return!0;if(f)return!1;if(c!==null)switch(c.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function E(i,s,c,f,m,w,_){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=f,this.attributeNamespace=m,this.mustUseProperty=c,this.propertyName=i,this.type=s,this.sanitizeURL=w,this.removeEmptyString=_}var C={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){C[i]=new E(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var s=i[0];C[s]=new E(s,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){C[i]=new E(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){C[i]=new E(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){C[i]=new E(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){C[i]=new E(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){C[i]=new E(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){C[i]=new E(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){C[i]=new E(i,5,!1,i.toLowerCase(),null,!1,!1)});var k=/[\-:]([a-z])/g;function L(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var s=i.replace(k,L);C[s]=new E(s,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var s=i.replace(k,L);C[s]=new E(s,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var s=i.replace(k,L);C[s]=new E(s,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){C[i]=new E(i,1,!1,i.toLowerCase(),null,!1,!1)}),C.xlinkHref=new E("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){C[i]=new E(i,1,!1,i.toLowerCase(),null,!0,!0)});function M(i,s,c,f){var m=C.hasOwnProperty(s)?C[s]:null;(m!==null?m.type!==0:f||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(A(s,c,m,f)&&(c=null),f||m===null?v(s)&&(c===null?i.removeAttribute(s):i.setAttribute(s,""+c)):m.mustUseProperty?i[m.propertyName]=c===null?m.type===3?!1:"":c:(s=m.attributeName,f=m.attributeNamespace,c===null?i.removeAttribute(s):(m=m.type,c=m===3||m===4&&c===!0?"":""+c,f?i.setAttributeNS(f,s,c):i.setAttribute(s,c))))}var F=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,z=Symbol.for("react.element"),U=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),q=Symbol.for("react.strict_mode"),J=Symbol.for("react.profiler"),se=Symbol.for("react.provider"),ne=Symbol.for("react.context"),be=Symbol.for("react.forward_ref"),de=Symbol.for("react.suspense"),ce=Symbol.for("react.suspense_list"),me=Symbol.for("react.memo"),le=Symbol.for("react.lazy"),Z=Symbol.for("react.offscreen"),V=Symbol.iterator;function ae(i){return i===null||typeof i!="object"?null:(i=V&&i[V]||i["@@iterator"],typeof i=="function"?i:null)}var te=Object.assign,D;function G(i){if(D===void 0)try{throw Error()}catch(c){var s=c.stack.trim().match(/\n( *(at )?)/);D=s&&s[1]||""}return`
`+D+i}var oe=!1;function we(i,s){if(!i||oe)return"";oe=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch($){var f=$}Reflect.construct(i,[],s)}else{try{s.call()}catch($){f=$}i.call(s.prototype)}else{try{throw Error()}catch($){f=$}i()}}catch($){if($&&f&&typeof $.stack=="string"){for(var m=$.stack.split(`
`),w=f.stack.split(`
`),_=m.length-1,R=w.length-1;1<=_&&0<=R&&m[_]!==w[R];)R--;for(;1<=_&&0<=R;_--,R--)if(m[_]!==w[R]){if(_!==1||R!==1)do if(_--,R--,0>R||m[_]!==w[R]){var I=`
`+m[_].replace(" at new "," at ");return i.displayName&&I.includes("<anonymous>")&&(I=I.replace("<anonymous>",i.displayName)),I}while(1<=_&&0<=R);break}}}finally{oe=!1,Error.prepareStackTrace=c}return(i=i?i.displayName||i.name:"")?G(i):""}function Te(i){switch(i.tag){case 5:return G(i.type);case 16:return G("Lazy");case 13:return G("Suspense");case 19:return G("SuspenseList");case 0:case 2:case 15:return i=we(i.type,!1),i;case 11:return i=we(i.type.render,!1),i;case 1:return i=we(i.type,!0),i;default:return""}}function ye(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case N:return"Fragment";case U:return"Portal";case J:return"Profiler";case q:return"StrictMode";case de:return"Suspense";case ce:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case ne:return(i.displayName||"Context")+".Consumer";case se:return(i._context.displayName||"Context")+".Provider";case be:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case me:return s=i.displayName||null,s!==null?s:ye(i.type)||"Memo";case le:s=i._payload,i=i._init;try{return ye(i(s))}catch{}}return null}function Y(i){var s=i.type;switch(i.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=s.render,i=i.displayName||i.name||"",s.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ye(s);case 8:return s===q?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Se(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function ke(i){var s=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Ce(i){var s=ke(i)?"checked":"value",c=Object.getOwnPropertyDescriptor(i.constructor.prototype,s),f=""+i[s];if(!i.hasOwnProperty(s)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var m=c.get,w=c.set;return Object.defineProperty(i,s,{configurable:!0,get:function(){return m.call(this)},set:function(_){f=""+_,w.call(this,_)}}),Object.defineProperty(i,s,{enumerable:c.enumerable}),{getValue:function(){return f},setValue:function(_){f=""+_},stopTracking:function(){i._valueTracker=null,delete i[s]}}}}function Rt(i){i._valueTracker||(i._valueTracker=Ce(i))}function ti(i){if(!i)return!1;var s=i._valueTracker;if(!s)return!0;var c=s.getValue(),f="";return i&&(f=ke(i)?i.checked?"true":"false":i.value),i=f,i!==c?(s.setValue(i),!0):!1}function He(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function Ze(i,s){var c=s.checked;return te({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:c??i._wrapperState.initialChecked})}function vt(i,s){var c=s.defaultValue==null?"":s.defaultValue,f=s.checked!=null?s.checked:s.defaultChecked;c=Se(s.value!=null?s.value:c),i._wrapperState={initialChecked:f,initialValue:c,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function ot(i,s){s=s.checked,s!=null&&M(i,"checked",s,!1)}function en(i,s){ot(i,s);var c=Se(s.value),f=s.type;if(c!=null)f==="number"?(c===0&&i.value===""||i.value!=c)&&(i.value=""+c):i.value!==""+c&&(i.value=""+c);else if(f==="submit"||f==="reset"){i.removeAttribute("value");return}s.hasOwnProperty("value")?Lc(i,s.type,c):s.hasOwnProperty("defaultValue")&&Lc(i,s.type,Se(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(i.defaultChecked=!!s.defaultChecked)}function lr(i,s,c){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var f=s.type;if(!(f!=="submit"&&f!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+i._wrapperState.initialValue,c||s===i.value||(i.value=s),i.defaultValue=s}c=i.name,c!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,c!==""&&(i.name=c)}function Lc(i,s,c){(s!=="number"||He(i.ownerDocument)!==i)&&(c==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+c&&(i.defaultValue=""+c))}var fo=Array.isArray;function vi(i,s,c,f){if(i=i.options,s){s={};for(var m=0;m<c.length;m++)s["$"+c[m]]=!0;for(c=0;c<i.length;c++)m=s.hasOwnProperty("$"+i[c].value),i[c].selected!==m&&(i[c].selected=m),m&&f&&(i[c].defaultSelected=!0)}else{for(c=""+Se(c),s=null,m=0;m<i.length;m++){if(i[m].value===c){i[m].selected=!0,f&&(i[m].defaultSelected=!0);return}s!==null||i[m].disabled||(s=i[m])}s!==null&&(s.selected=!0)}}function Mc(i,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return te({},s,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function pd(i,s){var c=s.value;if(c==null){if(c=s.children,s=s.defaultValue,c!=null){if(s!=null)throw Error(t(92));if(fo(c)){if(1<c.length)throw Error(t(93));c=c[0]}s=c}s==null&&(s=""),c=s}i._wrapperState={initialValue:Se(c)}}function gd(i,s){var c=Se(s.value),f=Se(s.defaultValue);c!=null&&(c=""+c,c!==i.value&&(i.value=c),s.defaultValue==null&&i.defaultValue!==c&&(i.defaultValue=c)),f!=null&&(i.defaultValue=""+f)}function md(i){var s=i.textContent;s===i._wrapperState.initialValue&&s!==""&&s!==null&&(i.value=s)}function yd(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $i(i,s){return i==null||i==="http://www.w3.org/1999/xhtml"?yd(s):i==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var ms,po=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,c,f,m){MSApp.execUnsafeLocalFunction(function(){return i(s,c,f,m)})}:i})(function(i,s){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=s;else{for(ms=ms||document.createElement("div"),ms.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=ms.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;s.firstChild;)i.appendChild(s.firstChild)}});function ys(i,s){if(s){var c=i.firstChild;if(c&&c===i.lastChild&&c.nodeType===3){c.nodeValue=s;return}}i.textContent=s}var Ic={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},px=["Webkit","ms","Moz","O"];Object.keys(Ic).forEach(function(i){px.forEach(function(s){s=s+i.charAt(0).toUpperCase()+i.substring(1),Ic[s]=Ic[i]})});function l0(i,s,c){return s==null||typeof s=="boolean"||s===""?"":c||typeof s!="number"||s===0||Ic.hasOwnProperty(i)&&Ic[i]?(""+s).trim():s+"px"}function c0(i,s){i=i.style;for(var c in s)if(s.hasOwnProperty(c)){var f=c.indexOf("--")===0,m=l0(c,s[c],f);c==="float"&&(c="cssFloat"),f?i.setProperty(c,m):i[c]=m}}var gx=te({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ng(i,s){if(s){if(gx[i]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function ig(i,s){if(i.indexOf("-")===-1)return typeof s.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sg=null;function rg(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var og=null,$a=null,Wa=null;function u0(i){if(i=tu(i)){if(typeof og!="function")throw Error(t(280));var s=i.stateNode;s&&(s=zd(s),og(i.stateNode,i.type,s))}}function h0(i){$a?Wa?Wa.push(i):Wa=[i]:$a=i}function d0(){if($a){var i=$a,s=Wa;if(Wa=$a=null,u0(i),s)for(i=0;i<s.length;i++)u0(s[i])}}function f0(i,s){return i(s)}function p0(){}var ag=!1;function g0(i,s,c){if(ag)return i(s,c);ag=!0;try{return f0(i,s,c)}finally{ag=!1,($a!==null||Wa!==null)&&(p0(),d0())}}function Fc(i,s){var c=i.stateNode;if(c===null)return null;var f=zd(c);if(f===null)return null;c=f[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(i=i.type,f=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!f;break e;default:i=!1}if(i)return null;if(c&&typeof c!="function")throw Error(t(231,s,typeof c));return c}var lg=!1;if(h)try{var Dc={};Object.defineProperty(Dc,"passive",{get:function(){lg=!0}}),window.addEventListener("test",Dc,Dc),window.removeEventListener("test",Dc,Dc)}catch{lg=!1}function mx(i,s,c,f,m,w,_,R,I){var $=Array.prototype.slice.call(arguments,3);try{s.apply(c,$)}catch(K){this.onError(K)}}var Oc=!1,vd=null,wd=!1,cg=null,yx={onError:function(i){Oc=!0,vd=i}};function vx(i,s,c,f,m,w,_,R,I){Oc=!1,vd=null,mx.apply(yx,arguments)}function wx(i,s,c,f,m,w,_,R,I){if(vx.apply(this,arguments),Oc){if(Oc){var $=vd;Oc=!1,vd=null}else throw Error(t(198));wd||(wd=!0,cg=$)}}function go(i){var s=i,c=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,(s.flags&4098)!==0&&(c=s.return),i=s.return;while(i)}return s.tag===3?c:null}function m0(i){if(i.tag===13){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function y0(i){if(go(i)!==i)throw Error(t(188))}function Ax(i){var s=i.alternate;if(!s){if(s=go(i),s===null)throw Error(t(188));return s!==i?null:i}for(var c=i,f=s;;){var m=c.return;if(m===null)break;var w=m.alternate;if(w===null){if(f=m.return,f!==null){c=f;continue}break}if(m.child===w.child){for(w=m.child;w;){if(w===c)return y0(m),i;if(w===f)return y0(m),s;w=w.sibling}throw Error(t(188))}if(c.return!==f.return)c=m,f=w;else{for(var _=!1,R=m.child;R;){if(R===c){_=!0,c=m,f=w;break}if(R===f){_=!0,f=m,c=w;break}R=R.sibling}if(!_){for(R=w.child;R;){if(R===c){_=!0,c=w,f=m;break}if(R===f){_=!0,f=w,c=m;break}R=R.sibling}if(!_)throw Error(t(189))}}if(c.alternate!==f)throw Error(t(190))}if(c.tag!==3)throw Error(t(188));return c.stateNode.current===c?i:s}function v0(i){return i=Ax(i),i!==null?w0(i):null}function w0(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var s=w0(i);if(s!==null)return s;i=i.sibling}return null}var A0=e.unstable_scheduleCallback,b0=e.unstable_cancelCallback,bx=e.unstable_shouldYield,Sx=e.unstable_requestPaint,wt=e.unstable_now,Ex=e.unstable_getCurrentPriorityLevel,ug=e.unstable_ImmediatePriority,S0=e.unstable_UserBlockingPriority,Ad=e.unstable_NormalPriority,_x=e.unstable_LowPriority,E0=e.unstable_IdlePriority,bd=null,Wi=null;function xx(i){if(Wi&&typeof Wi.onCommitFiberRoot=="function")try{Wi.onCommitFiberRoot(bd,i,void 0,(i.current.flags&128)===128)}catch{}}var wi=Math.clz32?Math.clz32:kx,Cx=Math.log,Tx=Math.LN2;function kx(i){return i>>>=0,i===0?32:31-(Cx(i)/Tx|0)|0}var Sd=64,Ed=4194304;function Nc(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function _d(i,s){var c=i.pendingLanes;if(c===0)return 0;var f=0,m=i.suspendedLanes,w=i.pingedLanes,_=c&268435455;if(_!==0){var R=_&~m;R!==0?f=Nc(R):(w&=_,w!==0&&(f=Nc(w)))}else _=c&~m,_!==0?f=Nc(_):w!==0&&(f=Nc(w));if(f===0)return 0;if(s!==0&&s!==f&&(s&m)===0&&(m=f&-f,w=s&-s,m>=w||m===16&&(w&4194240)!==0))return s;if((f&4)!==0&&(f|=c&16),s=i.entangledLanes,s!==0)for(i=i.entanglements,s&=f;0<s;)c=31-wi(s),m=1<<c,f|=i[c],s&=~m;return f}function Rx(i,s){switch(i){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Px(i,s){for(var c=i.suspendedLanes,f=i.pingedLanes,m=i.expirationTimes,w=i.pendingLanes;0<w;){var _=31-wi(w),R=1<<_,I=m[_];I===-1?((R&c)===0||(R&f)!==0)&&(m[_]=Rx(R,s)):I<=s&&(i.expiredLanes|=R),w&=~R}}function hg(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function _0(){var i=Sd;return Sd<<=1,(Sd&4194240)===0&&(Sd=64),i}function dg(i){for(var s=[],c=0;31>c;c++)s.push(i);return s}function jc(i,s,c){i.pendingLanes|=s,s!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,s=31-wi(s),i[s]=c}function Lx(i,s){var c=i.pendingLanes&~s;i.pendingLanes=s,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=s,i.mutableReadLanes&=s,i.entangledLanes&=s,s=i.entanglements;var f=i.eventTimes;for(i=i.expirationTimes;0<c;){var m=31-wi(c),w=1<<m;s[m]=0,f[m]=-1,i[m]=-1,c&=~w}}function fg(i,s){var c=i.entangledLanes|=s;for(i=i.entanglements;c;){var f=31-wi(c),m=1<<f;m&s|i[f]&s&&(i[f]|=s),c&=~m}}var qe=0;function x0(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var C0,pg,T0,k0,R0,gg=!1,xd=[],cr=null,ur=null,hr=null,Bc=new Map,zc=new Map,dr=[],Mx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function P0(i,s){switch(i){case"focusin":case"focusout":cr=null;break;case"dragenter":case"dragleave":ur=null;break;case"mouseover":case"mouseout":hr=null;break;case"pointerover":case"pointerout":Bc.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":zc.delete(s.pointerId)}}function Hc(i,s,c,f,m,w){return i===null||i.nativeEvent!==w?(i={blockedOn:s,domEventName:c,eventSystemFlags:f,nativeEvent:w,targetContainers:[m]},s!==null&&(s=tu(s),s!==null&&pg(s)),i):(i.eventSystemFlags|=f,s=i.targetContainers,m!==null&&s.indexOf(m)===-1&&s.push(m),i)}function Ix(i,s,c,f,m){switch(s){case"focusin":return cr=Hc(cr,i,s,c,f,m),!0;case"dragenter":return ur=Hc(ur,i,s,c,f,m),!0;case"mouseover":return hr=Hc(hr,i,s,c,f,m),!0;case"pointerover":var w=m.pointerId;return Bc.set(w,Hc(Bc.get(w)||null,i,s,c,f,m)),!0;case"gotpointercapture":return w=m.pointerId,zc.set(w,Hc(zc.get(w)||null,i,s,c,f,m)),!0}return!1}function L0(i){var s=mo(i.target);if(s!==null){var c=go(s);if(c!==null){if(s=c.tag,s===13){if(s=m0(c),s!==null){i.blockedOn=s,R0(i.priority,function(){T0(c)});return}}else if(s===3&&c.stateNode.current.memoizedState.isDehydrated){i.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Cd(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;0<s.length;){var c=yg(i.domEventName,i.eventSystemFlags,s[0],i.nativeEvent);if(c===null){c=i.nativeEvent;var f=new c.constructor(c.type,c);sg=f,c.target.dispatchEvent(f),sg=null}else return s=tu(c),s!==null&&pg(s),i.blockedOn=c,!1;s.shift()}return!0}function M0(i,s,c){Cd(i)&&c.delete(s)}function Fx(){gg=!1,cr!==null&&Cd(cr)&&(cr=null),ur!==null&&Cd(ur)&&(ur=null),hr!==null&&Cd(hr)&&(hr=null),Bc.forEach(M0),zc.forEach(M0)}function Uc(i,s){i.blockedOn===s&&(i.blockedOn=null,gg||(gg=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Fx)))}function $c(i){function s(m){return Uc(m,i)}if(0<xd.length){Uc(xd[0],i);for(var c=1;c<xd.length;c++){var f=xd[c];f.blockedOn===i&&(f.blockedOn=null)}}for(cr!==null&&Uc(cr,i),ur!==null&&Uc(ur,i),hr!==null&&Uc(hr,i),Bc.forEach(s),zc.forEach(s),c=0;c<dr.length;c++)f=dr[c],f.blockedOn===i&&(f.blockedOn=null);for(;0<dr.length&&(c=dr[0],c.blockedOn===null);)L0(c),c.blockedOn===null&&dr.shift()}var Va=F.ReactCurrentBatchConfig,Td=!0;function Dx(i,s,c,f){var m=qe,w=Va.transition;Va.transition=null;try{qe=1,mg(i,s,c,f)}finally{qe=m,Va.transition=w}}function Ox(i,s,c,f){var m=qe,w=Va.transition;Va.transition=null;try{qe=4,mg(i,s,c,f)}finally{qe=m,Va.transition=w}}function mg(i,s,c,f){if(Td){var m=yg(i,s,c,f);if(m===null)Fg(i,s,f,kd,c),P0(i,f);else if(Ix(m,i,s,c,f))f.stopPropagation();else if(P0(i,f),s&4&&-1<Mx.indexOf(i)){for(;m!==null;){var w=tu(m);if(w!==null&&C0(w),w=yg(i,s,c,f),w===null&&Fg(i,s,f,kd,c),w===m)break;m=w}m!==null&&f.stopPropagation()}else Fg(i,s,f,null,c)}}var kd=null;function yg(i,s,c,f){if(kd=null,i=rg(f),i=mo(i),i!==null)if(s=go(i),s===null)i=null;else if(c=s.tag,c===13){if(i=m0(s),i!==null)return i;i=null}else if(c===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null);return kd=i,null}function I0(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ex()){case ug:return 1;case S0:return 4;case Ad:case _x:return 16;case E0:return 536870912;default:return 16}default:return 16}}var fr=null,vg=null,Rd=null;function F0(){if(Rd)return Rd;var i,s=vg,c=s.length,f,m="value"in fr?fr.value:fr.textContent,w=m.length;for(i=0;i<c&&s[i]===m[i];i++);var _=c-i;for(f=1;f<=_&&s[c-f]===m[w-f];f++);return Rd=m.slice(i,1<f?1-f:void 0)}function Pd(i){var s=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&s===13&&(i=13)):i=s,i===10&&(i=13),32<=i||i===13?i:0}function Ld(){return!0}function D0(){return!1}function Bn(i){function s(c,f,m,w,_){this._reactName=c,this._targetInst=m,this.type=f,this.nativeEvent=w,this.target=_,this.currentTarget=null;for(var R in i)i.hasOwnProperty(R)&&(c=i[R],this[R]=c?c(w):w[R]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?Ld:D0,this.isPropagationStopped=D0,this}return te(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Ld)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Ld)},persist:function(){},isPersistent:Ld}),s}var Ga={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wg=Bn(Ga),Wc=te({},Ga,{view:0,detail:0}),Nx=Bn(Wc),Ag,bg,Vc,Md=te({},Wc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Eg,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Vc&&(Vc&&i.type==="mousemove"?(Ag=i.screenX-Vc.screenX,bg=i.screenY-Vc.screenY):bg=Ag=0,Vc=i),Ag)},movementY:function(i){return"movementY"in i?i.movementY:bg}}),O0=Bn(Md),jx=te({},Md,{dataTransfer:0}),Bx=Bn(jx),zx=te({},Wc,{relatedTarget:0}),Sg=Bn(zx),Hx=te({},Ga,{animationName:0,elapsedTime:0,pseudoElement:0}),Ux=Bn(Hx),$x=te({},Ga,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Wx=Bn($x),Vx=te({},Ga,{data:0}),N0=Bn(Vx),Gx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Kx(i){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(i):(i=Xx[i])?!!s[i]:!1}function Eg(){return Kx}var Yx=te({},Wc,{key:function(i){if(i.key){var s=Gx[i.key]||i.key;if(s!=="Unidentified")return s}return i.type==="keypress"?(i=Pd(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?qx[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Eg,charCode:function(i){return i.type==="keypress"?Pd(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Pd(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Qx=Bn(Yx),Jx=te({},Md,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),j0=Bn(Jx),Zx=te({},Wc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Eg}),e1=Bn(Zx),t1=te({},Ga,{propertyName:0,elapsedTime:0,pseudoElement:0}),n1=Bn(t1),i1=te({},Md,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),s1=Bn(i1),r1=[9,13,27,32],_g=h&&"CompositionEvent"in window,Gc=null;h&&"documentMode"in document&&(Gc=document.documentMode);var o1=h&&"TextEvent"in window&&!Gc,B0=h&&(!_g||Gc&&8<Gc&&11>=Gc),z0=" ",H0=!1;function U0(i,s){switch(i){case"keyup":return r1.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $0(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var qa=!1;function a1(i,s){switch(i){case"compositionend":return $0(s);case"keypress":return s.which!==32?null:(H0=!0,z0);case"textInput":return i=s.data,i===z0&&H0?null:i;default:return null}}function l1(i,s){if(qa)return i==="compositionend"||!_g&&U0(i,s)?(i=F0(),Rd=vg=fr=null,qa=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return B0&&s.locale!=="ko"?null:s.data;default:return null}}var c1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function W0(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!c1[i.type]:s==="textarea"}function V0(i,s,c,f){h0(f),s=Nd(s,"onChange"),0<s.length&&(c=new wg("onChange","change",null,c,f),i.push({event:c,listeners:s}))}var qc=null,Xc=null;function u1(i){cw(i,0)}function Id(i){var s=Ja(i);if(ti(s))return i}function h1(i,s){if(i==="change")return s}var G0=!1;if(h){var xg;if(h){var Cg="oninput"in document;if(!Cg){var q0=document.createElement("div");q0.setAttribute("oninput","return;"),Cg=typeof q0.oninput=="function"}xg=Cg}else xg=!1;G0=xg&&(!document.documentMode||9<document.documentMode)}function X0(){qc&&(qc.detachEvent("onpropertychange",K0),Xc=qc=null)}function K0(i){if(i.propertyName==="value"&&Id(Xc)){var s=[];V0(s,Xc,i,rg(i)),g0(u1,s)}}function d1(i,s,c){i==="focusin"?(X0(),qc=s,Xc=c,qc.attachEvent("onpropertychange",K0)):i==="focusout"&&X0()}function f1(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Id(Xc)}function p1(i,s){if(i==="click")return Id(s)}function g1(i,s){if(i==="input"||i==="change")return Id(s)}function m1(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var Ai=typeof Object.is=="function"?Object.is:m1;function Kc(i,s){if(Ai(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var c=Object.keys(i),f=Object.keys(s);if(c.length!==f.length)return!1;for(f=0;f<c.length;f++){var m=c[f];if(!d.call(s,m)||!Ai(i[m],s[m]))return!1}return!0}function Y0(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Q0(i,s){var c=Y0(i);i=0;for(var f;c;){if(c.nodeType===3){if(f=i+c.textContent.length,i<=s&&f>=s)return{node:c,offset:s-i};i=f}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=Y0(c)}}function J0(i,s){return i&&s?i===s?!0:i&&i.nodeType===3?!1:s&&s.nodeType===3?J0(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1:!1}function Z0(){for(var i=window,s=He();s instanceof i.HTMLIFrameElement;){try{var c=typeof s.contentWindow.location.href=="string"}catch{c=!1}if(c)i=s.contentWindow;else break;s=He(i.document)}return s}function Tg(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}function y1(i){var s=Z0(),c=i.focusedElem,f=i.selectionRange;if(s!==c&&c&&c.ownerDocument&&J0(c.ownerDocument.documentElement,c)){if(f!==null&&Tg(c)){if(s=f.start,i=f.end,i===void 0&&(i=s),"selectionStart"in c)c.selectionStart=s,c.selectionEnd=Math.min(i,c.value.length);else if(i=(s=c.ownerDocument||document)&&s.defaultView||window,i.getSelection){i=i.getSelection();var m=c.textContent.length,w=Math.min(f.start,m);f=f.end===void 0?w:Math.min(f.end,m),!i.extend&&w>f&&(m=f,f=w,w=m),m=Q0(c,w);var _=Q0(c,f);m&&_&&(i.rangeCount!==1||i.anchorNode!==m.node||i.anchorOffset!==m.offset||i.focusNode!==_.node||i.focusOffset!==_.offset)&&(s=s.createRange(),s.setStart(m.node,m.offset),i.removeAllRanges(),w>f?(i.addRange(s),i.extend(_.node,_.offset)):(s.setEnd(_.node,_.offset),i.addRange(s)))}}for(s=[],i=c;i=i.parentNode;)i.nodeType===1&&s.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<s.length;c++)i=s[c],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var v1=h&&"documentMode"in document&&11>=document.documentMode,Xa=null,kg=null,Yc=null,Rg=!1;function ew(i,s,c){var f=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Rg||Xa==null||Xa!==He(f)||(f=Xa,"selectionStart"in f&&Tg(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Yc&&Kc(Yc,f)||(Yc=f,f=Nd(kg,"onSelect"),0<f.length&&(s=new wg("onSelect","select",null,s,c),i.push({event:s,listeners:f}),s.target=Xa)))}function Fd(i,s){var c={};return c[i.toLowerCase()]=s.toLowerCase(),c["Webkit"+i]="webkit"+s,c["Moz"+i]="moz"+s,c}var Ka={animationend:Fd("Animation","AnimationEnd"),animationiteration:Fd("Animation","AnimationIteration"),animationstart:Fd("Animation","AnimationStart"),transitionend:Fd("Transition","TransitionEnd")},Pg={},tw={};h&&(tw=document.createElement("div").style,"AnimationEvent"in window||(delete Ka.animationend.animation,delete Ka.animationiteration.animation,delete Ka.animationstart.animation),"TransitionEvent"in window||delete Ka.transitionend.transition);function Dd(i){if(Pg[i])return Pg[i];if(!Ka[i])return i;var s=Ka[i],c;for(c in s)if(s.hasOwnProperty(c)&&c in tw)return Pg[i]=s[c];return i}var nw=Dd("animationend"),iw=Dd("animationiteration"),sw=Dd("animationstart"),rw=Dd("transitionend"),ow=new Map,aw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function pr(i,s){ow.set(i,s),o(s,[i])}for(var Lg=0;Lg<aw.length;Lg++){var Mg=aw[Lg],w1=Mg.toLowerCase(),A1=Mg[0].toUpperCase()+Mg.slice(1);pr(w1,"on"+A1)}pr(nw,"onAnimationEnd"),pr(iw,"onAnimationIteration"),pr(sw,"onAnimationStart"),pr("dblclick","onDoubleClick"),pr("focusin","onFocus"),pr("focusout","onBlur"),pr(rw,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),b1=new Set("cancel close invalid load scroll toggle".split(" ").concat(Qc));function lw(i,s,c){var f=i.type||"unknown-event";i.currentTarget=c,wx(f,s,void 0,i),i.currentTarget=null}function cw(i,s){s=(s&4)!==0;for(var c=0;c<i.length;c++){var f=i[c],m=f.event;f=f.listeners;e:{var w=void 0;if(s)for(var _=f.length-1;0<=_;_--){var R=f[_],I=R.instance,$=R.currentTarget;if(R=R.listener,I!==w&&m.isPropagationStopped())break e;lw(m,R,$),w=I}else for(_=0;_<f.length;_++){if(R=f[_],I=R.instance,$=R.currentTarget,R=R.listener,I!==w&&m.isPropagationStopped())break e;lw(m,R,$),w=I}}}if(wd)throw i=cg,wd=!1,cg=null,i}function it(i,s){var c=s[zg];c===void 0&&(c=s[zg]=new Set);var f=i+"__bubble";c.has(f)||(uw(s,i,2,!1),c.add(f))}function Ig(i,s,c){var f=0;s&&(f|=4),uw(c,i,f,s)}var Od="_reactListening"+Math.random().toString(36).slice(2);function Jc(i){if(!i[Od]){i[Od]=!0,n.forEach(function(c){c!=="selectionchange"&&(b1.has(c)||Ig(c,!1,i),Ig(c,!0,i))});var s=i.nodeType===9?i:i.ownerDocument;s===null||s[Od]||(s[Od]=!0,Ig("selectionchange",!1,s))}}function uw(i,s,c,f){switch(I0(s)){case 1:var m=Dx;break;case 4:m=Ox;break;default:m=mg}c=m.bind(null,s,c,i),m=void 0,!lg||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(m=!0),f?m!==void 0?i.addEventListener(s,c,{capture:!0,passive:m}):i.addEventListener(s,c,!0):m!==void 0?i.addEventListener(s,c,{passive:m}):i.addEventListener(s,c,!1)}function Fg(i,s,c,f,m){var w=f;if((s&1)===0&&(s&2)===0&&f!==null)e:for(;;){if(f===null)return;var _=f.tag;if(_===3||_===4){var R=f.stateNode.containerInfo;if(R===m||R.nodeType===8&&R.parentNode===m)break;if(_===4)for(_=f.return;_!==null;){var I=_.tag;if((I===3||I===4)&&(I=_.stateNode.containerInfo,I===m||I.nodeType===8&&I.parentNode===m))return;_=_.return}for(;R!==null;){if(_=mo(R),_===null)return;if(I=_.tag,I===5||I===6){f=w=_;continue e}R=R.parentNode}}f=f.return}g0(function(){var $=w,K=rg(c),Q=[];e:{var X=ow.get(i);if(X!==void 0){var ue=wg,pe=i;switch(i){case"keypress":if(Pd(c)===0)break e;case"keydown":case"keyup":ue=Qx;break;case"focusin":pe="focus",ue=Sg;break;case"focusout":pe="blur",ue=Sg;break;case"beforeblur":case"afterblur":ue=Sg;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ue=O0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ue=Bx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ue=e1;break;case nw:case iw:case sw:ue=Ux;break;case rw:ue=n1;break;case"scroll":ue=Nx;break;case"wheel":ue=s1;break;case"copy":case"cut":case"paste":ue=Wx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ue=j0}var ge=(s&4)!==0,At=!ge&&i==="scroll",B=ge?X!==null?X+"Capture":null:X;ge=[];for(var O=$,H;O!==null;){H=O;var ee=H.stateNode;if(H.tag===5&&ee!==null&&(H=ee,B!==null&&(ee=Fc(O,B),ee!=null&&ge.push(Zc(O,ee,H)))),At)break;O=O.return}0<ge.length&&(X=new ue(X,pe,null,c,K),Q.push({event:X,listeners:ge}))}}if((s&7)===0){e:{if(X=i==="mouseover"||i==="pointerover",ue=i==="mouseout"||i==="pointerout",X&&c!==sg&&(pe=c.relatedTarget||c.fromElement)&&(mo(pe)||pe[vs]))break e;if((ue||X)&&(X=K.window===K?K:(X=K.ownerDocument)?X.defaultView||X.parentWindow:window,ue?(pe=c.relatedTarget||c.toElement,ue=$,pe=pe?mo(pe):null,pe!==null&&(At=go(pe),pe!==At||pe.tag!==5&&pe.tag!==6)&&(pe=null)):(ue=null,pe=$),ue!==pe)){if(ge=O0,ee="onMouseLeave",B="onMouseEnter",O="mouse",(i==="pointerout"||i==="pointerover")&&(ge=j0,ee="onPointerLeave",B="onPointerEnter",O="pointer"),At=ue==null?X:Ja(ue),H=pe==null?X:Ja(pe),X=new ge(ee,O+"leave",ue,c,K),X.target=At,X.relatedTarget=H,ee=null,mo(K)===$&&(ge=new ge(B,O+"enter",pe,c,K),ge.target=H,ge.relatedTarget=At,ee=ge),At=ee,ue&&pe)t:{for(ge=ue,B=pe,O=0,H=ge;H;H=Ya(H))O++;for(H=0,ee=B;ee;ee=Ya(ee))H++;for(;0<O-H;)ge=Ya(ge),O--;for(;0<H-O;)B=Ya(B),H--;for(;O--;){if(ge===B||B!==null&&ge===B.alternate)break t;ge=Ya(ge),B=Ya(B)}ge=null}else ge=null;ue!==null&&hw(Q,X,ue,ge,!1),pe!==null&&At!==null&&hw(Q,At,pe,ge,!0)}}e:{if(X=$?Ja($):window,ue=X.nodeName&&X.nodeName.toLowerCase(),ue==="select"||ue==="input"&&X.type==="file")var ve=h1;else if(W0(X))if(G0)ve=g1;else{ve=f1;var _e=d1}else(ue=X.nodeName)&&ue.toLowerCase()==="input"&&(X.type==="checkbox"||X.type==="radio")&&(ve=p1);if(ve&&(ve=ve(i,$))){V0(Q,ve,c,K);break e}_e&&_e(i,X,$),i==="focusout"&&(_e=X._wrapperState)&&_e.controlled&&X.type==="number"&&Lc(X,"number",X.value)}switch(_e=$?Ja($):window,i){case"focusin":(W0(_e)||_e.contentEditable==="true")&&(Xa=_e,kg=$,Yc=null);break;case"focusout":Yc=kg=Xa=null;break;case"mousedown":Rg=!0;break;case"contextmenu":case"mouseup":case"dragend":Rg=!1,ew(Q,c,K);break;case"selectionchange":if(v1)break;case"keydown":case"keyup":ew(Q,c,K)}var xe;if(_g)e:{switch(i){case"compositionstart":var Re="onCompositionStart";break e;case"compositionend":Re="onCompositionEnd";break e;case"compositionupdate":Re="onCompositionUpdate";break e}Re=void 0}else qa?U0(i,c)&&(Re="onCompositionEnd"):i==="keydown"&&c.keyCode===229&&(Re="onCompositionStart");Re&&(B0&&c.locale!=="ko"&&(qa||Re!=="onCompositionStart"?Re==="onCompositionEnd"&&qa&&(xe=F0()):(fr=K,vg="value"in fr?fr.value:fr.textContent,qa=!0)),_e=Nd($,Re),0<_e.length&&(Re=new N0(Re,i,null,c,K),Q.push({event:Re,listeners:_e}),xe?Re.data=xe:(xe=$0(c),xe!==null&&(Re.data=xe)))),(xe=o1?a1(i,c):l1(i,c))&&($=Nd($,"onBeforeInput"),0<$.length&&(K=new N0("onBeforeInput","beforeinput",null,c,K),Q.push({event:K,listeners:$}),K.data=xe))}cw(Q,s)})}function Zc(i,s,c){return{instance:i,listener:s,currentTarget:c}}function Nd(i,s){for(var c=s+"Capture",f=[];i!==null;){var m=i,w=m.stateNode;m.tag===5&&w!==null&&(m=w,w=Fc(i,c),w!=null&&f.unshift(Zc(i,w,m)),w=Fc(i,s),w!=null&&f.push(Zc(i,w,m))),i=i.return}return f}function Ya(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function hw(i,s,c,f,m){for(var w=s._reactName,_=[];c!==null&&c!==f;){var R=c,I=R.alternate,$=R.stateNode;if(I!==null&&I===f)break;R.tag===5&&$!==null&&(R=$,m?(I=Fc(c,w),I!=null&&_.unshift(Zc(c,I,R))):m||(I=Fc(c,w),I!=null&&_.push(Zc(c,I,R)))),c=c.return}_.length!==0&&i.push({event:s,listeners:_})}var S1=/\r\n?/g,E1=/\u0000|\uFFFD/g;function dw(i){return(typeof i=="string"?i:""+i).replace(S1,`
`).replace(E1,"")}function jd(i,s,c){if(s=dw(s),dw(i)!==s&&c)throw Error(t(425))}function Bd(){}var Dg=null,Og=null;function Ng(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var jg=typeof setTimeout=="function"?setTimeout:void 0,_1=typeof clearTimeout=="function"?clearTimeout:void 0,fw=typeof Promise=="function"?Promise:void 0,x1=typeof queueMicrotask=="function"?queueMicrotask:typeof fw<"u"?function(i){return fw.resolve(null).then(i).catch(C1)}:jg;function C1(i){setTimeout(function(){throw i})}function Bg(i,s){var c=s,f=0;do{var m=c.nextSibling;if(i.removeChild(c),m&&m.nodeType===8)if(c=m.data,c==="/$"){if(f===0){i.removeChild(m),$c(s);return}f--}else c!=="$"&&c!=="$?"&&c!=="$!"||f++;c=m}while(c);$c(s)}function gr(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===1||s===3)break;if(s===8){if(s=i.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return i}function pw(i){i=i.previousSibling;for(var s=0;i;){if(i.nodeType===8){var c=i.data;if(c==="$"||c==="$!"||c==="$?"){if(s===0)return i;s--}else c==="/$"&&s++}i=i.previousSibling}return null}var Qa=Math.random().toString(36).slice(2),Vi="__reactFiber$"+Qa,eu="__reactProps$"+Qa,vs="__reactContainer$"+Qa,zg="__reactEvents$"+Qa,T1="__reactListeners$"+Qa,k1="__reactHandles$"+Qa;function mo(i){var s=i[Vi];if(s)return s;for(var c=i.parentNode;c;){if(s=c[vs]||c[Vi]){if(c=s.alternate,s.child!==null||c!==null&&c.child!==null)for(i=pw(i);i!==null;){if(c=i[Vi])return c;i=pw(i)}return s}i=c,c=i.parentNode}return null}function tu(i){return i=i[Vi]||i[vs],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function Ja(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function zd(i){return i[eu]||null}var Hg=[],Za=-1;function mr(i){return{current:i}}function st(i){0>Za||(i.current=Hg[Za],Hg[Za]=null,Za--)}function tt(i,s){Za++,Hg[Za]=i.current,i.current=s}var yr={},tn=mr(yr),_n=mr(!1),yo=yr;function el(i,s){var c=i.type.contextTypes;if(!c)return yr;var f=i.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===s)return f.__reactInternalMemoizedMaskedChildContext;var m={},w;for(w in c)m[w]=s[w];return f&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=s,i.__reactInternalMemoizedMaskedChildContext=m),m}function xn(i){return i=i.childContextTypes,i!=null}function Hd(){st(_n),st(tn)}function gw(i,s,c){if(tn.current!==yr)throw Error(t(168));tt(tn,s),tt(_n,c)}function mw(i,s,c){var f=i.stateNode;if(s=s.childContextTypes,typeof f.getChildContext!="function")return c;f=f.getChildContext();for(var m in f)if(!(m in s))throw Error(t(108,Y(i)||"Unknown",m));return te({},c,f)}function Ud(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||yr,yo=tn.current,tt(tn,i),tt(_n,_n.current),!0}function yw(i,s,c){var f=i.stateNode;if(!f)throw Error(t(169));c?(i=mw(i,s,yo),f.__reactInternalMemoizedMergedChildContext=i,st(_n),st(tn),tt(tn,i)):st(_n),tt(_n,c)}var ws=null,$d=!1,Ug=!1;function vw(i){ws===null?ws=[i]:ws.push(i)}function R1(i){$d=!0,vw(i)}function vr(){if(!Ug&&ws!==null){Ug=!0;var i=0,s=qe;try{var c=ws;for(qe=1;i<c.length;i++){var f=c[i];do f=f(!0);while(f!==null)}ws=null,$d=!1}catch(m){throw ws!==null&&(ws=ws.slice(i+1)),A0(ug,vr),m}finally{qe=s,Ug=!1}}return null}var tl=[],nl=0,Wd=null,Vd=0,ni=[],ii=0,vo=null,As=1,bs="";function wo(i,s){tl[nl++]=Vd,tl[nl++]=Wd,Wd=i,Vd=s}function ww(i,s,c){ni[ii++]=As,ni[ii++]=bs,ni[ii++]=vo,vo=i;var f=As;i=bs;var m=32-wi(f)-1;f&=~(1<<m),c+=1;var w=32-wi(s)+m;if(30<w){var _=m-m%5;w=(f&(1<<_)-1).toString(32),f>>=_,m-=_,As=1<<32-wi(s)+m|c<<m|f,bs=w+i}else As=1<<w|c<<m|f,bs=i}function $g(i){i.return!==null&&(wo(i,1),ww(i,1,0))}function Wg(i){for(;i===Wd;)Wd=tl[--nl],tl[nl]=null,Vd=tl[--nl],tl[nl]=null;for(;i===vo;)vo=ni[--ii],ni[ii]=null,bs=ni[--ii],ni[ii]=null,As=ni[--ii],ni[ii]=null}var zn=null,Hn=null,at=!1,bi=null;function Aw(i,s){var c=ai(5,null,null,0);c.elementType="DELETED",c.stateNode=s,c.return=i,s=i.deletions,s===null?(i.deletions=[c],i.flags|=16):s.push(c)}function bw(i,s){switch(i.tag){case 5:var c=i.type;return s=s.nodeType!==1||c.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(i.stateNode=s,zn=i,Hn=gr(s.firstChild),!0):!1;case 6:return s=i.pendingProps===""||s.nodeType!==3?null:s,s!==null?(i.stateNode=s,zn=i,Hn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(c=vo!==null?{id:As,overflow:bs}:null,i.memoizedState={dehydrated:s,treeContext:c,retryLane:1073741824},c=ai(18,null,null,0),c.stateNode=s,c.return=i,i.child=c,zn=i,Hn=null,!0):!1;default:return!1}}function Vg(i){return(i.mode&1)!==0&&(i.flags&128)===0}function Gg(i){if(at){var s=Hn;if(s){var c=s;if(!bw(i,s)){if(Vg(i))throw Error(t(418));s=gr(c.nextSibling);var f=zn;s&&bw(i,s)?Aw(f,c):(i.flags=i.flags&-4097|2,at=!1,zn=i)}}else{if(Vg(i))throw Error(t(418));i.flags=i.flags&-4097|2,at=!1,zn=i}}}function Sw(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;zn=i}function Gd(i){if(i!==zn)return!1;if(!at)return Sw(i),at=!0,!1;var s;if((s=i.tag!==3)&&!(s=i.tag!==5)&&(s=i.type,s=s!=="head"&&s!=="body"&&!Ng(i.type,i.memoizedProps)),s&&(s=Hn)){if(Vg(i))throw Ew(),Error(t(418));for(;s;)Aw(i,s),s=gr(s.nextSibling)}if(Sw(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,s=0;i;){if(i.nodeType===8){var c=i.data;if(c==="/$"){if(s===0){Hn=gr(i.nextSibling);break e}s--}else c!=="$"&&c!=="$!"&&c!=="$?"||s++}i=i.nextSibling}Hn=null}}else Hn=zn?gr(i.stateNode.nextSibling):null;return!0}function Ew(){for(var i=Hn;i;)i=gr(i.nextSibling)}function il(){Hn=zn=null,at=!1}function qg(i){bi===null?bi=[i]:bi.push(i)}var P1=F.ReactCurrentBatchConfig;function nu(i,s,c){if(i=c.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(c._owner){if(c=c._owner,c){if(c.tag!==1)throw Error(t(309));var f=c.stateNode}if(!f)throw Error(t(147,i));var m=f,w=""+i;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===w?s.ref:(s=function(_){var R=m.refs;_===null?delete R[w]:R[w]=_},s._stringRef=w,s)}if(typeof i!="string")throw Error(t(284));if(!c._owner)throw Error(t(290,i))}return i}function qd(i,s){throw i=Object.prototype.toString.call(s),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i))}function _w(i){var s=i._init;return s(i._payload)}function xw(i){function s(B,O){if(i){var H=B.deletions;H===null?(B.deletions=[O],B.flags|=16):H.push(O)}}function c(B,O){if(!i)return null;for(;O!==null;)s(B,O),O=O.sibling;return null}function f(B,O){for(B=new Map;O!==null;)O.key!==null?B.set(O.key,O):B.set(O.index,O),O=O.sibling;return B}function m(B,O){return B=Cr(B,O),B.index=0,B.sibling=null,B}function w(B,O,H){return B.index=H,i?(H=B.alternate,H!==null?(H=H.index,H<O?(B.flags|=2,O):H):(B.flags|=2,O)):(B.flags|=1048576,O)}function _(B){return i&&B.alternate===null&&(B.flags|=2),B}function R(B,O,H,ee){return O===null||O.tag!==6?(O=jm(H,B.mode,ee),O.return=B,O):(O=m(O,H),O.return=B,O)}function I(B,O,H,ee){var ve=H.type;return ve===N?K(B,O,H.props.children,ee,H.key):O!==null&&(O.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===le&&_w(ve)===O.type)?(ee=m(O,H.props),ee.ref=nu(B,O,H),ee.return=B,ee):(ee=vf(H.type,H.key,H.props,null,B.mode,ee),ee.ref=nu(B,O,H),ee.return=B,ee)}function $(B,O,H,ee){return O===null||O.tag!==4||O.stateNode.containerInfo!==H.containerInfo||O.stateNode.implementation!==H.implementation?(O=Bm(H,B.mode,ee),O.return=B,O):(O=m(O,H.children||[]),O.return=B,O)}function K(B,O,H,ee,ve){return O===null||O.tag!==7?(O=To(H,B.mode,ee,ve),O.return=B,O):(O=m(O,H),O.return=B,O)}function Q(B,O,H){if(typeof O=="string"&&O!==""||typeof O=="number")return O=jm(""+O,B.mode,H),O.return=B,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case z:return H=vf(O.type,O.key,O.props,null,B.mode,H),H.ref=nu(B,null,O),H.return=B,H;case U:return O=Bm(O,B.mode,H),O.return=B,O;case le:var ee=O._init;return Q(B,ee(O._payload),H)}if(fo(O)||ae(O))return O=To(O,B.mode,H,null),O.return=B,O;qd(B,O)}return null}function X(B,O,H,ee){var ve=O!==null?O.key:null;if(typeof H=="string"&&H!==""||typeof H=="number")return ve!==null?null:R(B,O,""+H,ee);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case z:return H.key===ve?I(B,O,H,ee):null;case U:return H.key===ve?$(B,O,H,ee):null;case le:return ve=H._init,X(B,O,ve(H._payload),ee)}if(fo(H)||ae(H))return ve!==null?null:K(B,O,H,ee,null);qd(B,H)}return null}function ue(B,O,H,ee,ve){if(typeof ee=="string"&&ee!==""||typeof ee=="number")return B=B.get(H)||null,R(O,B,""+ee,ve);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case z:return B=B.get(ee.key===null?H:ee.key)||null,I(O,B,ee,ve);case U:return B=B.get(ee.key===null?H:ee.key)||null,$(O,B,ee,ve);case le:var _e=ee._init;return ue(B,O,H,_e(ee._payload),ve)}if(fo(ee)||ae(ee))return B=B.get(H)||null,K(O,B,ee,ve,null);qd(O,ee)}return null}function pe(B,O,H,ee){for(var ve=null,_e=null,xe=O,Re=O=0,zt=null;xe!==null&&Re<H.length;Re++){xe.index>Re?(zt=xe,xe=null):zt=xe.sibling;var We=X(B,xe,H[Re],ee);if(We===null){xe===null&&(xe=zt);break}i&&xe&&We.alternate===null&&s(B,xe),O=w(We,O,Re),_e===null?ve=We:_e.sibling=We,_e=We,xe=zt}if(Re===H.length)return c(B,xe),at&&wo(B,Re),ve;if(xe===null){for(;Re<H.length;Re++)xe=Q(B,H[Re],ee),xe!==null&&(O=w(xe,O,Re),_e===null?ve=xe:_e.sibling=xe,_e=xe);return at&&wo(B,Re),ve}for(xe=f(B,xe);Re<H.length;Re++)zt=ue(xe,B,Re,H[Re],ee),zt!==null&&(i&&zt.alternate!==null&&xe.delete(zt.key===null?Re:zt.key),O=w(zt,O,Re),_e===null?ve=zt:_e.sibling=zt,_e=zt);return i&&xe.forEach(function(Tr){return s(B,Tr)}),at&&wo(B,Re),ve}function ge(B,O,H,ee){var ve=ae(H);if(typeof ve!="function")throw Error(t(150));if(H=ve.call(H),H==null)throw Error(t(151));for(var _e=ve=null,xe=O,Re=O=0,zt=null,We=H.next();xe!==null&&!We.done;Re++,We=H.next()){xe.index>Re?(zt=xe,xe=null):zt=xe.sibling;var Tr=X(B,xe,We.value,ee);if(Tr===null){xe===null&&(xe=zt);break}i&&xe&&Tr.alternate===null&&s(B,xe),O=w(Tr,O,Re),_e===null?ve=Tr:_e.sibling=Tr,_e=Tr,xe=zt}if(We.done)return c(B,xe),at&&wo(B,Re),ve;if(xe===null){for(;!We.done;Re++,We=H.next())We=Q(B,We.value,ee),We!==null&&(O=w(We,O,Re),_e===null?ve=We:_e.sibling=We,_e=We);return at&&wo(B,Re),ve}for(xe=f(B,xe);!We.done;Re++,We=H.next())We=ue(xe,B,Re,We.value,ee),We!==null&&(i&&We.alternate!==null&&xe.delete(We.key===null?Re:We.key),O=w(We,O,Re),_e===null?ve=We:_e.sibling=We,_e=We);return i&&xe.forEach(function(cC){return s(B,cC)}),at&&wo(B,Re),ve}function At(B,O,H,ee){if(typeof H=="object"&&H!==null&&H.type===N&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case z:e:{for(var ve=H.key,_e=O;_e!==null;){if(_e.key===ve){if(ve=H.type,ve===N){if(_e.tag===7){c(B,_e.sibling),O=m(_e,H.props.children),O.return=B,B=O;break e}}else if(_e.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===le&&_w(ve)===_e.type){c(B,_e.sibling),O=m(_e,H.props),O.ref=nu(B,_e,H),O.return=B,B=O;break e}c(B,_e);break}else s(B,_e);_e=_e.sibling}H.type===N?(O=To(H.props.children,B.mode,ee,H.key),O.return=B,B=O):(ee=vf(H.type,H.key,H.props,null,B.mode,ee),ee.ref=nu(B,O,H),ee.return=B,B=ee)}return _(B);case U:e:{for(_e=H.key;O!==null;){if(O.key===_e)if(O.tag===4&&O.stateNode.containerInfo===H.containerInfo&&O.stateNode.implementation===H.implementation){c(B,O.sibling),O=m(O,H.children||[]),O.return=B,B=O;break e}else{c(B,O);break}else s(B,O);O=O.sibling}O=Bm(H,B.mode,ee),O.return=B,B=O}return _(B);case le:return _e=H._init,At(B,O,_e(H._payload),ee)}if(fo(H))return pe(B,O,H,ee);if(ae(H))return ge(B,O,H,ee);qd(B,H)}return typeof H=="string"&&H!==""||typeof H=="number"?(H=""+H,O!==null&&O.tag===6?(c(B,O.sibling),O=m(O,H),O.return=B,B=O):(c(B,O),O=jm(H,B.mode,ee),O.return=B,B=O),_(B)):c(B,O)}return At}var sl=xw(!0),Cw=xw(!1),Xd=mr(null),Kd=null,rl=null,Xg=null;function Kg(){Xg=rl=Kd=null}function Yg(i){var s=Xd.current;st(Xd),i._currentValue=s}function Qg(i,s,c){for(;i!==null;){var f=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,f!==null&&(f.childLanes|=s)):f!==null&&(f.childLanes&s)!==s&&(f.childLanes|=s),i===c)break;i=i.return}}function ol(i,s){Kd=i,Xg=rl=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&s)!==0&&(Cn=!0),i.firstContext=null)}function si(i){var s=i._currentValue;if(Xg!==i)if(i={context:i,memoizedValue:s,next:null},rl===null){if(Kd===null)throw Error(t(308));rl=i,Kd.dependencies={lanes:0,firstContext:i}}else rl=rl.next=i;return s}var Ao=null;function Jg(i){Ao===null?Ao=[i]:Ao.push(i)}function Tw(i,s,c,f){var m=s.interleaved;return m===null?(c.next=c,Jg(s)):(c.next=m.next,m.next=c),s.interleaved=c,Ss(i,f)}function Ss(i,s){i.lanes|=s;var c=i.alternate;for(c!==null&&(c.lanes|=s),c=i,i=i.return;i!==null;)i.childLanes|=s,c=i.alternate,c!==null&&(c.childLanes|=s),c=i,i=i.return;return c.tag===3?c.stateNode:null}var wr=!1;function Zg(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function kw(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function Es(i,s){return{eventTime:i,lane:s,tag:0,payload:null,callback:null,next:null}}function Ar(i,s,c){var f=i.updateQueue;if(f===null)return null;if(f=f.shared,($e&2)!==0){var m=f.pending;return m===null?s.next=s:(s.next=m.next,m.next=s),f.pending=s,Ss(i,c)}return m=f.interleaved,m===null?(s.next=s,Jg(f)):(s.next=m.next,m.next=s),f.interleaved=s,Ss(i,c)}function Yd(i,s,c){if(s=s.updateQueue,s!==null&&(s=s.shared,(c&4194240)!==0)){var f=s.lanes;f&=i.pendingLanes,c|=f,s.lanes=c,fg(i,c)}}function Rw(i,s){var c=i.updateQueue,f=i.alternate;if(f!==null&&(f=f.updateQueue,c===f)){var m=null,w=null;if(c=c.firstBaseUpdate,c!==null){do{var _={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};w===null?m=w=_:w=w.next=_,c=c.next}while(c!==null);w===null?m=w=s:w=w.next=s}else m=w=s;c={baseState:f.baseState,firstBaseUpdate:m,lastBaseUpdate:w,shared:f.shared,effects:f.effects},i.updateQueue=c;return}i=c.lastBaseUpdate,i===null?c.firstBaseUpdate=s:i.next=s,c.lastBaseUpdate=s}function Qd(i,s,c,f){var m=i.updateQueue;wr=!1;var w=m.firstBaseUpdate,_=m.lastBaseUpdate,R=m.shared.pending;if(R!==null){m.shared.pending=null;var I=R,$=I.next;I.next=null,_===null?w=$:_.next=$,_=I;var K=i.alternate;K!==null&&(K=K.updateQueue,R=K.lastBaseUpdate,R!==_&&(R===null?K.firstBaseUpdate=$:R.next=$,K.lastBaseUpdate=I))}if(w!==null){var Q=m.baseState;_=0,K=$=I=null,R=w;do{var X=R.lane,ue=R.eventTime;if((f&X)===X){K!==null&&(K=K.next={eventTime:ue,lane:0,tag:R.tag,payload:R.payload,callback:R.callback,next:null});e:{var pe=i,ge=R;switch(X=s,ue=c,ge.tag){case 1:if(pe=ge.payload,typeof pe=="function"){Q=pe.call(ue,Q,X);break e}Q=pe;break e;case 3:pe.flags=pe.flags&-65537|128;case 0:if(pe=ge.payload,X=typeof pe=="function"?pe.call(ue,Q,X):pe,X==null)break e;Q=te({},Q,X);break e;case 2:wr=!0}}R.callback!==null&&R.lane!==0&&(i.flags|=64,X=m.effects,X===null?m.effects=[R]:X.push(R))}else ue={eventTime:ue,lane:X,tag:R.tag,payload:R.payload,callback:R.callback,next:null},K===null?($=K=ue,I=Q):K=K.next=ue,_|=X;if(R=R.next,R===null){if(R=m.shared.pending,R===null)break;X=R,R=X.next,X.next=null,m.lastBaseUpdate=X,m.shared.pending=null}}while(!0);if(K===null&&(I=Q),m.baseState=I,m.firstBaseUpdate=$,m.lastBaseUpdate=K,s=m.shared.interleaved,s!==null){m=s;do _|=m.lane,m=m.next;while(m!==s)}else w===null&&(m.shared.lanes=0);Eo|=_,i.lanes=_,i.memoizedState=Q}}function Pw(i,s,c){if(i=s.effects,s.effects=null,i!==null)for(s=0;s<i.length;s++){var f=i[s],m=f.callback;if(m!==null){if(f.callback=null,f=c,typeof m!="function")throw Error(t(191,m));m.call(f)}}}var iu={},Gi=mr(iu),su=mr(iu),ru=mr(iu);function bo(i){if(i===iu)throw Error(t(174));return i}function em(i,s){switch(tt(ru,s),tt(su,i),tt(Gi,iu),i=s.nodeType,i){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:$i(null,"");break;default:i=i===8?s.parentNode:s,s=i.namespaceURI||null,i=i.tagName,s=$i(s,i)}st(Gi),tt(Gi,s)}function al(){st(Gi),st(su),st(ru)}function Lw(i){bo(ru.current);var s=bo(Gi.current),c=$i(s,i.type);s!==c&&(tt(su,i),tt(Gi,c))}function tm(i){su.current===i&&(st(Gi),st(su))}var ct=mr(0);function Jd(i){for(var s=i;s!==null;){if(s.tag===13){var c=s.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var nm=[];function im(){for(var i=0;i<nm.length;i++)nm[i]._workInProgressVersionPrimary=null;nm.length=0}var Zd=F.ReactCurrentDispatcher,sm=F.ReactCurrentBatchConfig,So=0,ut=null,Pt=null,jt=null,ef=!1,ou=!1,au=0,L1=0;function nn(){throw Error(t(321))}function rm(i,s){if(s===null)return!1;for(var c=0;c<s.length&&c<i.length;c++)if(!Ai(i[c],s[c]))return!1;return!0}function om(i,s,c,f,m,w){if(So=w,ut=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Zd.current=i===null||i.memoizedState===null?D1:O1,i=c(f,m),ou){w=0;do{if(ou=!1,au=0,25<=w)throw Error(t(301));w+=1,jt=Pt=null,s.updateQueue=null,Zd.current=N1,i=c(f,m)}while(ou)}if(Zd.current=sf,s=Pt!==null&&Pt.next!==null,So=0,jt=Pt=ut=null,ef=!1,s)throw Error(t(300));return i}function am(){var i=au!==0;return au=0,i}function qi(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return jt===null?ut.memoizedState=jt=i:jt=jt.next=i,jt}function ri(){if(Pt===null){var i=ut.alternate;i=i!==null?i.memoizedState:null}else i=Pt.next;var s=jt===null?ut.memoizedState:jt.next;if(s!==null)jt=s,Pt=i;else{if(i===null)throw Error(t(310));Pt=i,i={memoizedState:Pt.memoizedState,baseState:Pt.baseState,baseQueue:Pt.baseQueue,queue:Pt.queue,next:null},jt===null?ut.memoizedState=jt=i:jt=jt.next=i}return jt}function lu(i,s){return typeof s=="function"?s(i):s}function lm(i){var s=ri(),c=s.queue;if(c===null)throw Error(t(311));c.lastRenderedReducer=i;var f=Pt,m=f.baseQueue,w=c.pending;if(w!==null){if(m!==null){var _=m.next;m.next=w.next,w.next=_}f.baseQueue=m=w,c.pending=null}if(m!==null){w=m.next,f=f.baseState;var R=_=null,I=null,$=w;do{var K=$.lane;if((So&K)===K)I!==null&&(I=I.next={lane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),f=$.hasEagerState?$.eagerState:i(f,$.action);else{var Q={lane:K,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null};I===null?(R=I=Q,_=f):I=I.next=Q,ut.lanes|=K,Eo|=K}$=$.next}while($!==null&&$!==w);I===null?_=f:I.next=R,Ai(f,s.memoizedState)||(Cn=!0),s.memoizedState=f,s.baseState=_,s.baseQueue=I,c.lastRenderedState=f}if(i=c.interleaved,i!==null){m=i;do w=m.lane,ut.lanes|=w,Eo|=w,m=m.next;while(m!==i)}else m===null&&(c.lanes=0);return[s.memoizedState,c.dispatch]}function cm(i){var s=ri(),c=s.queue;if(c===null)throw Error(t(311));c.lastRenderedReducer=i;var f=c.dispatch,m=c.pending,w=s.memoizedState;if(m!==null){c.pending=null;var _=m=m.next;do w=i(w,_.action),_=_.next;while(_!==m);Ai(w,s.memoizedState)||(Cn=!0),s.memoizedState=w,s.baseQueue===null&&(s.baseState=w),c.lastRenderedState=w}return[w,f]}function Mw(){}function Iw(i,s){var c=ut,f=ri(),m=s(),w=!Ai(f.memoizedState,m);if(w&&(f.memoizedState=m,Cn=!0),f=f.queue,um(Ow.bind(null,c,f,i),[i]),f.getSnapshot!==s||w||jt!==null&&jt.memoizedState.tag&1){if(c.flags|=2048,cu(9,Dw.bind(null,c,f,m,s),void 0,null),Bt===null)throw Error(t(349));(So&30)!==0||Fw(c,s,m)}return m}function Fw(i,s,c){i.flags|=16384,i={getSnapshot:s,value:c},s=ut.updateQueue,s===null?(s={lastEffect:null,stores:null},ut.updateQueue=s,s.stores=[i]):(c=s.stores,c===null?s.stores=[i]:c.push(i))}function Dw(i,s,c,f){s.value=c,s.getSnapshot=f,Nw(s)&&jw(i)}function Ow(i,s,c){return c(function(){Nw(s)&&jw(i)})}function Nw(i){var s=i.getSnapshot;i=i.value;try{var c=s();return!Ai(i,c)}catch{return!0}}function jw(i){var s=Ss(i,1);s!==null&&xi(s,i,1,-1)}function Bw(i){var s=qi();return typeof i=="function"&&(i=i()),s.memoizedState=s.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:lu,lastRenderedState:i},s.queue=i,i=i.dispatch=F1.bind(null,ut,i),[s.memoizedState,i]}function cu(i,s,c,f){return i={tag:i,create:s,destroy:c,deps:f,next:null},s=ut.updateQueue,s===null?(s={lastEffect:null,stores:null},ut.updateQueue=s,s.lastEffect=i.next=i):(c=s.lastEffect,c===null?s.lastEffect=i.next=i:(f=c.next,c.next=i,i.next=f,s.lastEffect=i)),i}function zw(){return ri().memoizedState}function tf(i,s,c,f){var m=qi();ut.flags|=i,m.memoizedState=cu(1|s,c,void 0,f===void 0?null:f)}function nf(i,s,c,f){var m=ri();f=f===void 0?null:f;var w=void 0;if(Pt!==null){var _=Pt.memoizedState;if(w=_.destroy,f!==null&&rm(f,_.deps)){m.memoizedState=cu(s,c,w,f);return}}ut.flags|=i,m.memoizedState=cu(1|s,c,w,f)}function Hw(i,s){return tf(8390656,8,i,s)}function um(i,s){return nf(2048,8,i,s)}function Uw(i,s){return nf(4,2,i,s)}function $w(i,s){return nf(4,4,i,s)}function Ww(i,s){if(typeof s=="function")return i=i(),s(i),function(){s(null)};if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function Vw(i,s,c){return c=c!=null?c.concat([i]):null,nf(4,4,Ww.bind(null,s,i),c)}function hm(){}function Gw(i,s){var c=ri();s=s===void 0?null:s;var f=c.memoizedState;return f!==null&&s!==null&&rm(s,f[1])?f[0]:(c.memoizedState=[i,s],i)}function qw(i,s){var c=ri();s=s===void 0?null:s;var f=c.memoizedState;return f!==null&&s!==null&&rm(s,f[1])?f[0]:(i=i(),c.memoizedState=[i,s],i)}function Xw(i,s,c){return(So&21)===0?(i.baseState&&(i.baseState=!1,Cn=!0),i.memoizedState=c):(Ai(c,s)||(c=_0(),ut.lanes|=c,Eo|=c,i.baseState=!0),s)}function M1(i,s){var c=qe;qe=c!==0&&4>c?c:4,i(!0);var f=sm.transition;sm.transition={};try{i(!1),s()}finally{qe=c,sm.transition=f}}function Kw(){return ri().memoizedState}function I1(i,s,c){var f=_r(i);if(c={lane:f,action:c,hasEagerState:!1,eagerState:null,next:null},Yw(i))Qw(s,c);else if(c=Tw(i,s,c,f),c!==null){var m=mn();xi(c,i,f,m),Jw(c,s,f)}}function F1(i,s,c){var f=_r(i),m={lane:f,action:c,hasEagerState:!1,eagerState:null,next:null};if(Yw(i))Qw(s,m);else{var w=i.alternate;if(i.lanes===0&&(w===null||w.lanes===0)&&(w=s.lastRenderedReducer,w!==null))try{var _=s.lastRenderedState,R=w(_,c);if(m.hasEagerState=!0,m.eagerState=R,Ai(R,_)){var I=s.interleaved;I===null?(m.next=m,Jg(s)):(m.next=I.next,I.next=m),s.interleaved=m;return}}catch{}finally{}c=Tw(i,s,m,f),c!==null&&(m=mn(),xi(c,i,f,m),Jw(c,s,f))}}function Yw(i){var s=i.alternate;return i===ut||s!==null&&s===ut}function Qw(i,s){ou=ef=!0;var c=i.pending;c===null?s.next=s:(s.next=c.next,c.next=s),i.pending=s}function Jw(i,s,c){if((c&4194240)!==0){var f=s.lanes;f&=i.pendingLanes,c|=f,s.lanes=c,fg(i,c)}}var sf={readContext:si,useCallback:nn,useContext:nn,useEffect:nn,useImperativeHandle:nn,useInsertionEffect:nn,useLayoutEffect:nn,useMemo:nn,useReducer:nn,useRef:nn,useState:nn,useDebugValue:nn,useDeferredValue:nn,useTransition:nn,useMutableSource:nn,useSyncExternalStore:nn,useId:nn,unstable_isNewReconciler:!1},D1={readContext:si,useCallback:function(i,s){return qi().memoizedState=[i,s===void 0?null:s],i},useContext:si,useEffect:Hw,useImperativeHandle:function(i,s,c){return c=c!=null?c.concat([i]):null,tf(4194308,4,Ww.bind(null,s,i),c)},useLayoutEffect:function(i,s){return tf(4194308,4,i,s)},useInsertionEffect:function(i,s){return tf(4,2,i,s)},useMemo:function(i,s){var c=qi();return s=s===void 0?null:s,i=i(),c.memoizedState=[i,s],i},useReducer:function(i,s,c){var f=qi();return s=c!==void 0?c(s):s,f.memoizedState=f.baseState=s,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:s},f.queue=i,i=i.dispatch=I1.bind(null,ut,i),[f.memoizedState,i]},useRef:function(i){var s=qi();return i={current:i},s.memoizedState=i},useState:Bw,useDebugValue:hm,useDeferredValue:function(i){return qi().memoizedState=i},useTransition:function(){var i=Bw(!1),s=i[0];return i=M1.bind(null,i[1]),qi().memoizedState=i,[s,i]},useMutableSource:function(){},useSyncExternalStore:function(i,s,c){var f=ut,m=qi();if(at){if(c===void 0)throw Error(t(407));c=c()}else{if(c=s(),Bt===null)throw Error(t(349));(So&30)!==0||Fw(f,s,c)}m.memoizedState=c;var w={value:c,getSnapshot:s};return m.queue=w,Hw(Ow.bind(null,f,w,i),[i]),f.flags|=2048,cu(9,Dw.bind(null,f,w,c,s),void 0,null),c},useId:function(){var i=qi(),s=Bt.identifierPrefix;if(at){var c=bs,f=As;c=(f&~(1<<32-wi(f)-1)).toString(32)+c,s=":"+s+"R"+c,c=au++,0<c&&(s+="H"+c.toString(32)),s+=":"}else c=L1++,s=":"+s+"r"+c.toString(32)+":";return i.memoizedState=s},unstable_isNewReconciler:!1},O1={readContext:si,useCallback:Gw,useContext:si,useEffect:um,useImperativeHandle:Vw,useInsertionEffect:Uw,useLayoutEffect:$w,useMemo:qw,useReducer:lm,useRef:zw,useState:function(){return lm(lu)},useDebugValue:hm,useDeferredValue:function(i){var s=ri();return Xw(s,Pt.memoizedState,i)},useTransition:function(){var i=lm(lu)[0],s=ri().memoizedState;return[i,s]},useMutableSource:Mw,useSyncExternalStore:Iw,useId:Kw,unstable_isNewReconciler:!1},N1={readContext:si,useCallback:Gw,useContext:si,useEffect:um,useImperativeHandle:Vw,useInsertionEffect:Uw,useLayoutEffect:$w,useMemo:qw,useReducer:cm,useRef:zw,useState:function(){return cm(lu)},useDebugValue:hm,useDeferredValue:function(i){var s=ri();return Pt===null?s.memoizedState=i:Xw(s,Pt.memoizedState,i)},useTransition:function(){var i=cm(lu)[0],s=ri().memoizedState;return[i,s]},useMutableSource:Mw,useSyncExternalStore:Iw,useId:Kw,unstable_isNewReconciler:!1};function Si(i,s){if(i&&i.defaultProps){s=te({},s),i=i.defaultProps;for(var c in i)s[c]===void 0&&(s[c]=i[c]);return s}return s}function dm(i,s,c,f){s=i.memoizedState,c=c(f,s),c=c==null?s:te({},s,c),i.memoizedState=c,i.lanes===0&&(i.updateQueue.baseState=c)}var rf={isMounted:function(i){return(i=i._reactInternals)?go(i)===i:!1},enqueueSetState:function(i,s,c){i=i._reactInternals;var f=mn(),m=_r(i),w=Es(f,m);w.payload=s,c!=null&&(w.callback=c),s=Ar(i,w,m),s!==null&&(xi(s,i,m,f),Yd(s,i,m))},enqueueReplaceState:function(i,s,c){i=i._reactInternals;var f=mn(),m=_r(i),w=Es(f,m);w.tag=1,w.payload=s,c!=null&&(w.callback=c),s=Ar(i,w,m),s!==null&&(xi(s,i,m,f),Yd(s,i,m))},enqueueForceUpdate:function(i,s){i=i._reactInternals;var c=mn(),f=_r(i),m=Es(c,f);m.tag=2,s!=null&&(m.callback=s),s=Ar(i,m,f),s!==null&&(xi(s,i,f,c),Yd(s,i,f))}};function Zw(i,s,c,f,m,w,_){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(f,w,_):s.prototype&&s.prototype.isPureReactComponent?!Kc(c,f)||!Kc(m,w):!0}function eA(i,s,c){var f=!1,m=yr,w=s.contextType;return typeof w=="object"&&w!==null?w=si(w):(m=xn(s)?yo:tn.current,f=s.contextTypes,w=(f=f!=null)?el(i,m):yr),s=new s(c,w),i.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=rf,i.stateNode=s,s._reactInternals=i,f&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=m,i.__reactInternalMemoizedMaskedChildContext=w),s}function tA(i,s,c,f){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(c,f),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(c,f),s.state!==i&&rf.enqueueReplaceState(s,s.state,null)}function fm(i,s,c,f){var m=i.stateNode;m.props=c,m.state=i.memoizedState,m.refs={},Zg(i);var w=s.contextType;typeof w=="object"&&w!==null?m.context=si(w):(w=xn(s)?yo:tn.current,m.context=el(i,w)),m.state=i.memoizedState,w=s.getDerivedStateFromProps,typeof w=="function"&&(dm(i,s,w,c),m.state=i.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(s=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),s!==m.state&&rf.enqueueReplaceState(m,m.state,null),Qd(i,c,m,f),m.state=i.memoizedState),typeof m.componentDidMount=="function"&&(i.flags|=4194308)}function ll(i,s){try{var c="",f=s;do c+=Te(f),f=f.return;while(f);var m=c}catch(w){m=`
Error generating stack: `+w.message+`
`+w.stack}return{value:i,source:s,stack:m,digest:null}}function pm(i,s,c){return{value:i,source:null,stack:c??null,digest:s??null}}function gm(i,s){try{console.error(s.value)}catch(c){setTimeout(function(){throw c})}}var j1=typeof WeakMap=="function"?WeakMap:Map;function nA(i,s,c){c=Es(-1,c),c.tag=3,c.payload={element:null};var f=s.value;return c.callback=function(){df||(df=!0,Pm=f),gm(i,s)},c}function iA(i,s,c){c=Es(-1,c),c.tag=3;var f=i.type.getDerivedStateFromError;if(typeof f=="function"){var m=s.value;c.payload=function(){return f(m)},c.callback=function(){gm(i,s)}}var w=i.stateNode;return w!==null&&typeof w.componentDidCatch=="function"&&(c.callback=function(){gm(i,s),typeof f!="function"&&(Sr===null?Sr=new Set([this]):Sr.add(this));var _=s.stack;this.componentDidCatch(s.value,{componentStack:_!==null?_:""})}),c}function sA(i,s,c){var f=i.pingCache;if(f===null){f=i.pingCache=new j1;var m=new Set;f.set(s,m)}else m=f.get(s),m===void 0&&(m=new Set,f.set(s,m));m.has(c)||(m.add(c),i=J1.bind(null,i,s,c),s.then(i,i))}function rA(i){do{var s;if((s=i.tag===13)&&(s=i.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return i;i=i.return}while(i!==null);return null}function oA(i,s,c,f,m){return(i.mode&1)===0?(i===s?i.flags|=65536:(i.flags|=128,c.flags|=131072,c.flags&=-52805,c.tag===1&&(c.alternate===null?c.tag=17:(s=Es(-1,1),s.tag=2,Ar(c,s,1))),c.lanes|=1),i):(i.flags|=65536,i.lanes=m,i)}var B1=F.ReactCurrentOwner,Cn=!1;function gn(i,s,c,f){s.child=i===null?Cw(s,null,c,f):sl(s,i.child,c,f)}function aA(i,s,c,f,m){c=c.render;var w=s.ref;return ol(s,m),f=om(i,s,c,f,w,m),c=am(),i!==null&&!Cn?(s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~m,_s(i,s,m)):(at&&c&&$g(s),s.flags|=1,gn(i,s,f,m),s.child)}function lA(i,s,c,f,m){if(i===null){var w=c.type;return typeof w=="function"&&!Nm(w)&&w.defaultProps===void 0&&c.compare===null&&c.defaultProps===void 0?(s.tag=15,s.type=w,cA(i,s,w,f,m)):(i=vf(c.type,null,f,s,s.mode,m),i.ref=s.ref,i.return=s,s.child=i)}if(w=i.child,(i.lanes&m)===0){var _=w.memoizedProps;if(c=c.compare,c=c!==null?c:Kc,c(_,f)&&i.ref===s.ref)return _s(i,s,m)}return s.flags|=1,i=Cr(w,f),i.ref=s.ref,i.return=s,s.child=i}function cA(i,s,c,f,m){if(i!==null){var w=i.memoizedProps;if(Kc(w,f)&&i.ref===s.ref)if(Cn=!1,s.pendingProps=f=w,(i.lanes&m)!==0)(i.flags&131072)!==0&&(Cn=!0);else return s.lanes=i.lanes,_s(i,s,m)}return mm(i,s,c,f,m)}function uA(i,s,c){var f=s.pendingProps,m=f.children,w=i!==null?i.memoizedState:null;if(f.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},tt(ul,Un),Un|=c;else{if((c&1073741824)===0)return i=w!==null?w.baseLanes|c:c,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:i,cachePool:null,transitions:null},s.updateQueue=null,tt(ul,Un),Un|=i,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=w!==null?w.baseLanes:c,tt(ul,Un),Un|=f}else w!==null?(f=w.baseLanes|c,s.memoizedState=null):f=c,tt(ul,Un),Un|=f;return gn(i,s,m,c),s.child}function hA(i,s){var c=s.ref;(i===null&&c!==null||i!==null&&i.ref!==c)&&(s.flags|=512,s.flags|=2097152)}function mm(i,s,c,f,m){var w=xn(c)?yo:tn.current;return w=el(s,w),ol(s,m),c=om(i,s,c,f,w,m),f=am(),i!==null&&!Cn?(s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~m,_s(i,s,m)):(at&&f&&$g(s),s.flags|=1,gn(i,s,c,m),s.child)}function dA(i,s,c,f,m){if(xn(c)){var w=!0;Ud(s)}else w=!1;if(ol(s,m),s.stateNode===null)af(i,s),eA(s,c,f),fm(s,c,f,m),f=!0;else if(i===null){var _=s.stateNode,R=s.memoizedProps;_.props=R;var I=_.context,$=c.contextType;typeof $=="object"&&$!==null?$=si($):($=xn(c)?yo:tn.current,$=el(s,$));var K=c.getDerivedStateFromProps,Q=typeof K=="function"||typeof _.getSnapshotBeforeUpdate=="function";Q||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(R!==f||I!==$)&&tA(s,_,f,$),wr=!1;var X=s.memoizedState;_.state=X,Qd(s,f,_,m),I=s.memoizedState,R!==f||X!==I||_n.current||wr?(typeof K=="function"&&(dm(s,c,K,f),I=s.memoizedState),(R=wr||Zw(s,c,R,f,X,I,$))?(Q||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(s.flags|=4194308)):(typeof _.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=f,s.memoizedState=I),_.props=f,_.state=I,_.context=$,f=R):(typeof _.componentDidMount=="function"&&(s.flags|=4194308),f=!1)}else{_=s.stateNode,kw(i,s),R=s.memoizedProps,$=s.type===s.elementType?R:Si(s.type,R),_.props=$,Q=s.pendingProps,X=_.context,I=c.contextType,typeof I=="object"&&I!==null?I=si(I):(I=xn(c)?yo:tn.current,I=el(s,I));var ue=c.getDerivedStateFromProps;(K=typeof ue=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(R!==Q||X!==I)&&tA(s,_,f,I),wr=!1,X=s.memoizedState,_.state=X,Qd(s,f,_,m);var pe=s.memoizedState;R!==Q||X!==pe||_n.current||wr?(typeof ue=="function"&&(dm(s,c,ue,f),pe=s.memoizedState),($=wr||Zw(s,c,$,f,X,pe,I)||!1)?(K||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(f,pe,I),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(f,pe,I)),typeof _.componentDidUpdate=="function"&&(s.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof _.componentDidUpdate!="function"||R===i.memoizedProps&&X===i.memoizedState||(s.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||R===i.memoizedProps&&X===i.memoizedState||(s.flags|=1024),s.memoizedProps=f,s.memoizedState=pe),_.props=f,_.state=pe,_.context=I,f=$):(typeof _.componentDidUpdate!="function"||R===i.memoizedProps&&X===i.memoizedState||(s.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||R===i.memoizedProps&&X===i.memoizedState||(s.flags|=1024),f=!1)}return ym(i,s,c,f,w,m)}function ym(i,s,c,f,m,w){hA(i,s);var _=(s.flags&128)!==0;if(!f&&!_)return m&&yw(s,c,!1),_s(i,s,w);f=s.stateNode,B1.current=s;var R=_&&typeof c.getDerivedStateFromError!="function"?null:f.render();return s.flags|=1,i!==null&&_?(s.child=sl(s,i.child,null,w),s.child=sl(s,null,R,w)):gn(i,s,R,w),s.memoizedState=f.state,m&&yw(s,c,!0),s.child}function fA(i){var s=i.stateNode;s.pendingContext?gw(i,s.pendingContext,s.pendingContext!==s.context):s.context&&gw(i,s.context,!1),em(i,s.containerInfo)}function pA(i,s,c,f,m){return il(),qg(m),s.flags|=256,gn(i,s,c,f),s.child}var vm={dehydrated:null,treeContext:null,retryLane:0};function wm(i){return{baseLanes:i,cachePool:null,transitions:null}}function gA(i,s,c){var f=s.pendingProps,m=ct.current,w=!1,_=(s.flags&128)!==0,R;if((R=_)||(R=i!==null&&i.memoizedState===null?!1:(m&2)!==0),R?(w=!0,s.flags&=-129):(i===null||i.memoizedState!==null)&&(m|=1),tt(ct,m&1),i===null)return Gg(s),i=s.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((s.mode&1)===0?s.lanes=1:i.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(_=f.children,i=f.fallback,w?(f=s.mode,w=s.child,_={mode:"hidden",children:_},(f&1)===0&&w!==null?(w.childLanes=0,w.pendingProps=_):w=wf(_,f,0,null),i=To(i,f,c,null),w.return=s,i.return=s,w.sibling=i,s.child=w,s.child.memoizedState=wm(c),s.memoizedState=vm,i):Am(s,_));if(m=i.memoizedState,m!==null&&(R=m.dehydrated,R!==null))return z1(i,s,_,f,R,m,c);if(w){w=f.fallback,_=s.mode,m=i.child,R=m.sibling;var I={mode:"hidden",children:f.children};return(_&1)===0&&s.child!==m?(f=s.child,f.childLanes=0,f.pendingProps=I,s.deletions=null):(f=Cr(m,I),f.subtreeFlags=m.subtreeFlags&14680064),R!==null?w=Cr(R,w):(w=To(w,_,c,null),w.flags|=2),w.return=s,f.return=s,f.sibling=w,s.child=f,f=w,w=s.child,_=i.child.memoizedState,_=_===null?wm(c):{baseLanes:_.baseLanes|c,cachePool:null,transitions:_.transitions},w.memoizedState=_,w.childLanes=i.childLanes&~c,s.memoizedState=vm,f}return w=i.child,i=w.sibling,f=Cr(w,{mode:"visible",children:f.children}),(s.mode&1)===0&&(f.lanes=c),f.return=s,f.sibling=null,i!==null&&(c=s.deletions,c===null?(s.deletions=[i],s.flags|=16):c.push(i)),s.child=f,s.memoizedState=null,f}function Am(i,s){return s=wf({mode:"visible",children:s},i.mode,0,null),s.return=i,i.child=s}function of(i,s,c,f){return f!==null&&qg(f),sl(s,i.child,null,c),i=Am(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function z1(i,s,c,f,m,w,_){if(c)return s.flags&256?(s.flags&=-257,f=pm(Error(t(422))),of(i,s,_,f)):s.memoizedState!==null?(s.child=i.child,s.flags|=128,null):(w=f.fallback,m=s.mode,f=wf({mode:"visible",children:f.children},m,0,null),w=To(w,m,_,null),w.flags|=2,f.return=s,w.return=s,f.sibling=w,s.child=f,(s.mode&1)!==0&&sl(s,i.child,null,_),s.child.memoizedState=wm(_),s.memoizedState=vm,w);if((s.mode&1)===0)return of(i,s,_,null);if(m.data==="$!"){if(f=m.nextSibling&&m.nextSibling.dataset,f)var R=f.dgst;return f=R,w=Error(t(419)),f=pm(w,f,void 0),of(i,s,_,f)}if(R=(_&i.childLanes)!==0,Cn||R){if(f=Bt,f!==null){switch(_&-_){case 4:m=2;break;case 16:m=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:m=32;break;case 536870912:m=268435456;break;default:m=0}m=(m&(f.suspendedLanes|_))!==0?0:m,m!==0&&m!==w.retryLane&&(w.retryLane=m,Ss(i,m),xi(f,i,m,-1))}return Om(),f=pm(Error(t(421))),of(i,s,_,f)}return m.data==="$?"?(s.flags|=128,s.child=i.child,s=Z1.bind(null,i),m._reactRetry=s,null):(i=w.treeContext,Hn=gr(m.nextSibling),zn=s,at=!0,bi=null,i!==null&&(ni[ii++]=As,ni[ii++]=bs,ni[ii++]=vo,As=i.id,bs=i.overflow,vo=s),s=Am(s,f.children),s.flags|=4096,s)}function mA(i,s,c){i.lanes|=s;var f=i.alternate;f!==null&&(f.lanes|=s),Qg(i.return,s,c)}function bm(i,s,c,f,m){var w=i.memoizedState;w===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:f,tail:c,tailMode:m}:(w.isBackwards=s,w.rendering=null,w.renderingStartTime=0,w.last=f,w.tail=c,w.tailMode=m)}function yA(i,s,c){var f=s.pendingProps,m=f.revealOrder,w=f.tail;if(gn(i,s,f.children,c),f=ct.current,(f&2)!==0)f=f&1|2,s.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&mA(i,c,s);else if(i.tag===19)mA(i,c,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break e;for(;i.sibling===null;){if(i.return===null||i.return===s)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}f&=1}if(tt(ct,f),(s.mode&1)===0)s.memoizedState=null;else switch(m){case"forwards":for(c=s.child,m=null;c!==null;)i=c.alternate,i!==null&&Jd(i)===null&&(m=c),c=c.sibling;c=m,c===null?(m=s.child,s.child=null):(m=c.sibling,c.sibling=null),bm(s,!1,m,c,w);break;case"backwards":for(c=null,m=s.child,s.child=null;m!==null;){if(i=m.alternate,i!==null&&Jd(i)===null){s.child=m;break}i=m.sibling,m.sibling=c,c=m,m=i}bm(s,!0,c,null,w);break;case"together":bm(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function af(i,s){(s.mode&1)===0&&i!==null&&(i.alternate=null,s.alternate=null,s.flags|=2)}function _s(i,s,c){if(i!==null&&(s.dependencies=i.dependencies),Eo|=s.lanes,(c&s.childLanes)===0)return null;if(i!==null&&s.child!==i.child)throw Error(t(153));if(s.child!==null){for(i=s.child,c=Cr(i,i.pendingProps),s.child=c,c.return=s;i.sibling!==null;)i=i.sibling,c=c.sibling=Cr(i,i.pendingProps),c.return=s;c.sibling=null}return s.child}function H1(i,s,c){switch(s.tag){case 3:fA(s),il();break;case 5:Lw(s);break;case 1:xn(s.type)&&Ud(s);break;case 4:em(s,s.stateNode.containerInfo);break;case 10:var f=s.type._context,m=s.memoizedProps.value;tt(Xd,f._currentValue),f._currentValue=m;break;case 13:if(f=s.memoizedState,f!==null)return f.dehydrated!==null?(tt(ct,ct.current&1),s.flags|=128,null):(c&s.child.childLanes)!==0?gA(i,s,c):(tt(ct,ct.current&1),i=_s(i,s,c),i!==null?i.sibling:null);tt(ct,ct.current&1);break;case 19:if(f=(c&s.childLanes)!==0,(i.flags&128)!==0){if(f)return yA(i,s,c);s.flags|=128}if(m=s.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),tt(ct,ct.current),f)break;return null;case 22:case 23:return s.lanes=0,uA(i,s,c)}return _s(i,s,c)}var vA,Sm,wA,AA;vA=function(i,s){for(var c=s.child;c!==null;){if(c.tag===5||c.tag===6)i.appendChild(c.stateNode);else if(c.tag!==4&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===s)break;for(;c.sibling===null;){if(c.return===null||c.return===s)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},Sm=function(){},wA=function(i,s,c,f){var m=i.memoizedProps;if(m!==f){i=s.stateNode,bo(Gi.current);var w=null;switch(c){case"input":m=Ze(i,m),f=Ze(i,f),w=[];break;case"select":m=te({},m,{value:void 0}),f=te({},f,{value:void 0}),w=[];break;case"textarea":m=Mc(i,m),f=Mc(i,f),w=[];break;default:typeof m.onClick!="function"&&typeof f.onClick=="function"&&(i.onclick=Bd)}ng(c,f);var _;c=null;for($ in m)if(!f.hasOwnProperty($)&&m.hasOwnProperty($)&&m[$]!=null)if($==="style"){var R=m[$];for(_ in R)R.hasOwnProperty(_)&&(c||(c={}),c[_]="")}else $!=="dangerouslySetInnerHTML"&&$!=="children"&&$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&$!=="autoFocus"&&(r.hasOwnProperty($)?w||(w=[]):(w=w||[]).push($,null));for($ in f){var I=f[$];if(R=m!=null?m[$]:void 0,f.hasOwnProperty($)&&I!==R&&(I!=null||R!=null))if($==="style")if(R){for(_ in R)!R.hasOwnProperty(_)||I&&I.hasOwnProperty(_)||(c||(c={}),c[_]="");for(_ in I)I.hasOwnProperty(_)&&R[_]!==I[_]&&(c||(c={}),c[_]=I[_])}else c||(w||(w=[]),w.push($,c)),c=I;else $==="dangerouslySetInnerHTML"?(I=I?I.__html:void 0,R=R?R.__html:void 0,I!=null&&R!==I&&(w=w||[]).push($,I)):$==="children"?typeof I!="string"&&typeof I!="number"||(w=w||[]).push($,""+I):$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&(r.hasOwnProperty($)?(I!=null&&$==="onScroll"&&it("scroll",i),w||R===I||(w=[])):(w=w||[]).push($,I))}c&&(w=w||[]).push("style",c);var $=w;(s.updateQueue=$)&&(s.flags|=4)}},AA=function(i,s,c,f){c!==f&&(s.flags|=4)};function uu(i,s){if(!at)switch(i.tailMode){case"hidden":s=i.tail;for(var c=null;s!==null;)s.alternate!==null&&(c=s),s=s.sibling;c===null?i.tail=null:c.sibling=null;break;case"collapsed":c=i.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:f.sibling=null}}function sn(i){var s=i.alternate!==null&&i.alternate.child===i.child,c=0,f=0;if(s)for(var m=i.child;m!==null;)c|=m.lanes|m.childLanes,f|=m.subtreeFlags&14680064,f|=m.flags&14680064,m.return=i,m=m.sibling;else for(m=i.child;m!==null;)c|=m.lanes|m.childLanes,f|=m.subtreeFlags,f|=m.flags,m.return=i,m=m.sibling;return i.subtreeFlags|=f,i.childLanes=c,s}function U1(i,s,c){var f=s.pendingProps;switch(Wg(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return sn(s),null;case 1:return xn(s.type)&&Hd(),sn(s),null;case 3:return f=s.stateNode,al(),st(_n),st(tn),im(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(i===null||i.child===null)&&(Gd(s)?s.flags|=4:i===null||i.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,bi!==null&&(Im(bi),bi=null))),Sm(i,s),sn(s),null;case 5:tm(s);var m=bo(ru.current);if(c=s.type,i!==null&&s.stateNode!=null)wA(i,s,c,f,m),i.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!f){if(s.stateNode===null)throw Error(t(166));return sn(s),null}if(i=bo(Gi.current),Gd(s)){f=s.stateNode,c=s.type;var w=s.memoizedProps;switch(f[Vi]=s,f[eu]=w,i=(s.mode&1)!==0,c){case"dialog":it("cancel",f),it("close",f);break;case"iframe":case"object":case"embed":it("load",f);break;case"video":case"audio":for(m=0;m<Qc.length;m++)it(Qc[m],f);break;case"source":it("error",f);break;case"img":case"image":case"link":it("error",f),it("load",f);break;case"details":it("toggle",f);break;case"input":vt(f,w),it("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!w.multiple},it("invalid",f);break;case"textarea":pd(f,w),it("invalid",f)}ng(c,w),m=null;for(var _ in w)if(w.hasOwnProperty(_)){var R=w[_];_==="children"?typeof R=="string"?f.textContent!==R&&(w.suppressHydrationWarning!==!0&&jd(f.textContent,R,i),m=["children",R]):typeof R=="number"&&f.textContent!==""+R&&(w.suppressHydrationWarning!==!0&&jd(f.textContent,R,i),m=["children",""+R]):r.hasOwnProperty(_)&&R!=null&&_==="onScroll"&&it("scroll",f)}switch(c){case"input":Rt(f),lr(f,w,!0);break;case"textarea":Rt(f),md(f);break;case"select":case"option":break;default:typeof w.onClick=="function"&&(f.onclick=Bd)}f=m,s.updateQueue=f,f!==null&&(s.flags|=4)}else{_=m.nodeType===9?m:m.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=yd(c)),i==="http://www.w3.org/1999/xhtml"?c==="script"?(i=_.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof f.is=="string"?i=_.createElement(c,{is:f.is}):(i=_.createElement(c),c==="select"&&(_=i,f.multiple?_.multiple=!0:f.size&&(_.size=f.size))):i=_.createElementNS(i,c),i[Vi]=s,i[eu]=f,vA(i,s,!1,!1),s.stateNode=i;e:{switch(_=ig(c,f),c){case"dialog":it("cancel",i),it("close",i),m=f;break;case"iframe":case"object":case"embed":it("load",i),m=f;break;case"video":case"audio":for(m=0;m<Qc.length;m++)it(Qc[m],i);m=f;break;case"source":it("error",i),m=f;break;case"img":case"image":case"link":it("error",i),it("load",i),m=f;break;case"details":it("toggle",i),m=f;break;case"input":vt(i,f),m=Ze(i,f),it("invalid",i);break;case"option":m=f;break;case"select":i._wrapperState={wasMultiple:!!f.multiple},m=te({},f,{value:void 0}),it("invalid",i);break;case"textarea":pd(i,f),m=Mc(i,f),it("invalid",i);break;default:m=f}ng(c,m),R=m;for(w in R)if(R.hasOwnProperty(w)){var I=R[w];w==="style"?c0(i,I):w==="dangerouslySetInnerHTML"?(I=I?I.__html:void 0,I!=null&&po(i,I)):w==="children"?typeof I=="string"?(c!=="textarea"||I!=="")&&ys(i,I):typeof I=="number"&&ys(i,""+I):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(r.hasOwnProperty(w)?I!=null&&w==="onScroll"&&it("scroll",i):I!=null&&M(i,w,I,_))}switch(c){case"input":Rt(i),lr(i,f,!1);break;case"textarea":Rt(i),md(i);break;case"option":f.value!=null&&i.setAttribute("value",""+Se(f.value));break;case"select":i.multiple=!!f.multiple,w=f.value,w!=null?vi(i,!!f.multiple,w,!1):f.defaultValue!=null&&vi(i,!!f.multiple,f.defaultValue,!0);break;default:typeof m.onClick=="function"&&(i.onclick=Bd)}switch(c){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return sn(s),null;case 6:if(i&&s.stateNode!=null)AA(i,s,i.memoizedProps,f);else{if(typeof f!="string"&&s.stateNode===null)throw Error(t(166));if(c=bo(ru.current),bo(Gi.current),Gd(s)){if(f=s.stateNode,c=s.memoizedProps,f[Vi]=s,(w=f.nodeValue!==c)&&(i=zn,i!==null))switch(i.tag){case 3:jd(f.nodeValue,c,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&jd(f.nodeValue,c,(i.mode&1)!==0)}w&&(s.flags|=4)}else f=(c.nodeType===9?c:c.ownerDocument).createTextNode(f),f[Vi]=s,s.stateNode=f}return sn(s),null;case 13:if(st(ct),f=s.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(at&&Hn!==null&&(s.mode&1)!==0&&(s.flags&128)===0)Ew(),il(),s.flags|=98560,w=!1;else if(w=Gd(s),f!==null&&f.dehydrated!==null){if(i===null){if(!w)throw Error(t(318));if(w=s.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(t(317));w[Vi]=s}else il(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;sn(s),w=!1}else bi!==null&&(Im(bi),bi=null),w=!0;if(!w)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=c,s):(f=f!==null,f!==(i!==null&&i.memoizedState!==null)&&f&&(s.child.flags|=8192,(s.mode&1)!==0&&(i===null||(ct.current&1)!==0?Lt===0&&(Lt=3):Om())),s.updateQueue!==null&&(s.flags|=4),sn(s),null);case 4:return al(),Sm(i,s),i===null&&Jc(s.stateNode.containerInfo),sn(s),null;case 10:return Yg(s.type._context),sn(s),null;case 17:return xn(s.type)&&Hd(),sn(s),null;case 19:if(st(ct),w=s.memoizedState,w===null)return sn(s),null;if(f=(s.flags&128)!==0,_=w.rendering,_===null)if(f)uu(w,!1);else{if(Lt!==0||i!==null&&(i.flags&128)!==0)for(i=s.child;i!==null;){if(_=Jd(i),_!==null){for(s.flags|=128,uu(w,!1),f=_.updateQueue,f!==null&&(s.updateQueue=f,s.flags|=4),s.subtreeFlags=0,f=c,c=s.child;c!==null;)w=c,i=f,w.flags&=14680066,_=w.alternate,_===null?(w.childLanes=0,w.lanes=i,w.child=null,w.subtreeFlags=0,w.memoizedProps=null,w.memoizedState=null,w.updateQueue=null,w.dependencies=null,w.stateNode=null):(w.childLanes=_.childLanes,w.lanes=_.lanes,w.child=_.child,w.subtreeFlags=0,w.deletions=null,w.memoizedProps=_.memoizedProps,w.memoizedState=_.memoizedState,w.updateQueue=_.updateQueue,w.type=_.type,i=_.dependencies,w.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),c=c.sibling;return tt(ct,ct.current&1|2),s.child}i=i.sibling}w.tail!==null&&wt()>hl&&(s.flags|=128,f=!0,uu(w,!1),s.lanes=4194304)}else{if(!f)if(i=Jd(_),i!==null){if(s.flags|=128,f=!0,c=i.updateQueue,c!==null&&(s.updateQueue=c,s.flags|=4),uu(w,!0),w.tail===null&&w.tailMode==="hidden"&&!_.alternate&&!at)return sn(s),null}else 2*wt()-w.renderingStartTime>hl&&c!==1073741824&&(s.flags|=128,f=!0,uu(w,!1),s.lanes=4194304);w.isBackwards?(_.sibling=s.child,s.child=_):(c=w.last,c!==null?c.sibling=_:s.child=_,w.last=_)}return w.tail!==null?(s=w.tail,w.rendering=s,w.tail=s.sibling,w.renderingStartTime=wt(),s.sibling=null,c=ct.current,tt(ct,f?c&1|2:c&1),s):(sn(s),null);case 22:case 23:return Dm(),f=s.memoizedState!==null,i!==null&&i.memoizedState!==null!==f&&(s.flags|=8192),f&&(s.mode&1)!==0?(Un&1073741824)!==0&&(sn(s),s.subtreeFlags&6&&(s.flags|=8192)):sn(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function $1(i,s){switch(Wg(s),s.tag){case 1:return xn(s.type)&&Hd(),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return al(),st(_n),st(tn),im(),i=s.flags,(i&65536)!==0&&(i&128)===0?(s.flags=i&-65537|128,s):null;case 5:return tm(s),null;case 13:if(st(ct),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(t(340));il()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return st(ct),null;case 4:return al(),null;case 10:return Yg(s.type._context),null;case 22:case 23:return Dm(),null;case 24:return null;default:return null}}var lf=!1,rn=!1,W1=typeof WeakSet=="function"?WeakSet:Set,fe=null;function cl(i,s){var c=i.ref;if(c!==null)if(typeof c=="function")try{c(null)}catch(f){gt(i,s,f)}else c.current=null}function Em(i,s,c){try{c()}catch(f){gt(i,s,f)}}var bA=!1;function V1(i,s){if(Dg=Td,i=Z0(),Tg(i)){if("selectionStart"in i)var c={start:i.selectionStart,end:i.selectionEnd};else e:{c=(c=i.ownerDocument)&&c.defaultView||window;var f=c.getSelection&&c.getSelection();if(f&&f.rangeCount!==0){c=f.anchorNode;var m=f.anchorOffset,w=f.focusNode;f=f.focusOffset;try{c.nodeType,w.nodeType}catch{c=null;break e}var _=0,R=-1,I=-1,$=0,K=0,Q=i,X=null;t:for(;;){for(var ue;Q!==c||m!==0&&Q.nodeType!==3||(R=_+m),Q!==w||f!==0&&Q.nodeType!==3||(I=_+f),Q.nodeType===3&&(_+=Q.nodeValue.length),(ue=Q.firstChild)!==null;)X=Q,Q=ue;for(;;){if(Q===i)break t;if(X===c&&++$===m&&(R=_),X===w&&++K===f&&(I=_),(ue=Q.nextSibling)!==null)break;Q=X,X=Q.parentNode}Q=ue}c=R===-1||I===-1?null:{start:R,end:I}}else c=null}c=c||{start:0,end:0}}else c=null;for(Og={focusedElem:i,selectionRange:c},Td=!1,fe=s;fe!==null;)if(s=fe,i=s.child,(s.subtreeFlags&1028)!==0&&i!==null)i.return=s,fe=i;else for(;fe!==null;){s=fe;try{var pe=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(pe!==null){var ge=pe.memoizedProps,At=pe.memoizedState,B=s.stateNode,O=B.getSnapshotBeforeUpdate(s.elementType===s.type?ge:Si(s.type,ge),At);B.__reactInternalSnapshotBeforeUpdate=O}break;case 3:var H=s.stateNode.containerInfo;H.nodeType===1?H.textContent="":H.nodeType===9&&H.documentElement&&H.removeChild(H.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ee){gt(s,s.return,ee)}if(i=s.sibling,i!==null){i.return=s.return,fe=i;break}fe=s.return}return pe=bA,bA=!1,pe}function hu(i,s,c){var f=s.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var m=f=f.next;do{if((m.tag&i)===i){var w=m.destroy;m.destroy=void 0,w!==void 0&&Em(s,c,w)}m=m.next}while(m!==f)}}function cf(i,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var c=s=s.next;do{if((c.tag&i)===i){var f=c.create;c.destroy=f()}c=c.next}while(c!==s)}}function _m(i){var s=i.ref;if(s!==null){var c=i.stateNode;switch(i.tag){case 5:i=c;break;default:i=c}typeof s=="function"?s(i):s.current=i}}function SA(i){var s=i.alternate;s!==null&&(i.alternate=null,SA(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&(delete s[Vi],delete s[eu],delete s[zg],delete s[T1],delete s[k1])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function EA(i){return i.tag===5||i.tag===3||i.tag===4}function _A(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||EA(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function xm(i,s,c){var f=i.tag;if(f===5||f===6)i=i.stateNode,s?c.nodeType===8?c.parentNode.insertBefore(i,s):c.insertBefore(i,s):(c.nodeType===8?(s=c.parentNode,s.insertBefore(i,c)):(s=c,s.appendChild(i)),c=c._reactRootContainer,c!=null||s.onclick!==null||(s.onclick=Bd));else if(f!==4&&(i=i.child,i!==null))for(xm(i,s,c),i=i.sibling;i!==null;)xm(i,s,c),i=i.sibling}function Cm(i,s,c){var f=i.tag;if(f===5||f===6)i=i.stateNode,s?c.insertBefore(i,s):c.appendChild(i);else if(f!==4&&(i=i.child,i!==null))for(Cm(i,s,c),i=i.sibling;i!==null;)Cm(i,s,c),i=i.sibling}var qt=null,Ei=!1;function br(i,s,c){for(c=c.child;c!==null;)xA(i,s,c),c=c.sibling}function xA(i,s,c){if(Wi&&typeof Wi.onCommitFiberUnmount=="function")try{Wi.onCommitFiberUnmount(bd,c)}catch{}switch(c.tag){case 5:rn||cl(c,s);case 6:var f=qt,m=Ei;qt=null,br(i,s,c),qt=f,Ei=m,qt!==null&&(Ei?(i=qt,c=c.stateNode,i.nodeType===8?i.parentNode.removeChild(c):i.removeChild(c)):qt.removeChild(c.stateNode));break;case 18:qt!==null&&(Ei?(i=qt,c=c.stateNode,i.nodeType===8?Bg(i.parentNode,c):i.nodeType===1&&Bg(i,c),$c(i)):Bg(qt,c.stateNode));break;case 4:f=qt,m=Ei,qt=c.stateNode.containerInfo,Ei=!0,br(i,s,c),qt=f,Ei=m;break;case 0:case 11:case 14:case 15:if(!rn&&(f=c.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){m=f=f.next;do{var w=m,_=w.destroy;w=w.tag,_!==void 0&&((w&2)!==0||(w&4)!==0)&&Em(c,s,_),m=m.next}while(m!==f)}br(i,s,c);break;case 1:if(!rn&&(cl(c,s),f=c.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=c.memoizedProps,f.state=c.memoizedState,f.componentWillUnmount()}catch(R){gt(c,s,R)}br(i,s,c);break;case 21:br(i,s,c);break;case 22:c.mode&1?(rn=(f=rn)||c.memoizedState!==null,br(i,s,c),rn=f):br(i,s,c);break;default:br(i,s,c)}}function CA(i){var s=i.updateQueue;if(s!==null){i.updateQueue=null;var c=i.stateNode;c===null&&(c=i.stateNode=new W1),s.forEach(function(f){var m=eC.bind(null,i,f);c.has(f)||(c.add(f),f.then(m,m))})}}function _i(i,s){var c=s.deletions;if(c!==null)for(var f=0;f<c.length;f++){var m=c[f];try{var w=i,_=s,R=_;e:for(;R!==null;){switch(R.tag){case 5:qt=R.stateNode,Ei=!1;break e;case 3:qt=R.stateNode.containerInfo,Ei=!0;break e;case 4:qt=R.stateNode.containerInfo,Ei=!0;break e}R=R.return}if(qt===null)throw Error(t(160));xA(w,_,m),qt=null,Ei=!1;var I=m.alternate;I!==null&&(I.return=null),m.return=null}catch($){gt(m,s,$)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)TA(s,i),s=s.sibling}function TA(i,s){var c=i.alternate,f=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(_i(s,i),Xi(i),f&4){try{hu(3,i,i.return),cf(3,i)}catch(ge){gt(i,i.return,ge)}try{hu(5,i,i.return)}catch(ge){gt(i,i.return,ge)}}break;case 1:_i(s,i),Xi(i),f&512&&c!==null&&cl(c,c.return);break;case 5:if(_i(s,i),Xi(i),f&512&&c!==null&&cl(c,c.return),i.flags&32){var m=i.stateNode;try{ys(m,"")}catch(ge){gt(i,i.return,ge)}}if(f&4&&(m=i.stateNode,m!=null)){var w=i.memoizedProps,_=c!==null?c.memoizedProps:w,R=i.type,I=i.updateQueue;if(i.updateQueue=null,I!==null)try{R==="input"&&w.type==="radio"&&w.name!=null&&ot(m,w),ig(R,_);var $=ig(R,w);for(_=0;_<I.length;_+=2){var K=I[_],Q=I[_+1];K==="style"?c0(m,Q):K==="dangerouslySetInnerHTML"?po(m,Q):K==="children"?ys(m,Q):M(m,K,Q,$)}switch(R){case"input":en(m,w);break;case"textarea":gd(m,w);break;case"select":var X=m._wrapperState.wasMultiple;m._wrapperState.wasMultiple=!!w.multiple;var ue=w.value;ue!=null?vi(m,!!w.multiple,ue,!1):X!==!!w.multiple&&(w.defaultValue!=null?vi(m,!!w.multiple,w.defaultValue,!0):vi(m,!!w.multiple,w.multiple?[]:"",!1))}m[eu]=w}catch(ge){gt(i,i.return,ge)}}break;case 6:if(_i(s,i),Xi(i),f&4){if(i.stateNode===null)throw Error(t(162));m=i.stateNode,w=i.memoizedProps;try{m.nodeValue=w}catch(ge){gt(i,i.return,ge)}}break;case 3:if(_i(s,i),Xi(i),f&4&&c!==null&&c.memoizedState.isDehydrated)try{$c(s.containerInfo)}catch(ge){gt(i,i.return,ge)}break;case 4:_i(s,i),Xi(i);break;case 13:_i(s,i),Xi(i),m=i.child,m.flags&8192&&(w=m.memoizedState!==null,m.stateNode.isHidden=w,!w||m.alternate!==null&&m.alternate.memoizedState!==null||(Rm=wt())),f&4&&CA(i);break;case 22:if(K=c!==null&&c.memoizedState!==null,i.mode&1?(rn=($=rn)||K,_i(s,i),rn=$):_i(s,i),Xi(i),f&8192){if($=i.memoizedState!==null,(i.stateNode.isHidden=$)&&!K&&(i.mode&1)!==0)for(fe=i,K=i.child;K!==null;){for(Q=fe=K;fe!==null;){switch(X=fe,ue=X.child,X.tag){case 0:case 11:case 14:case 15:hu(4,X,X.return);break;case 1:cl(X,X.return);var pe=X.stateNode;if(typeof pe.componentWillUnmount=="function"){f=X,c=X.return;try{s=f,pe.props=s.memoizedProps,pe.state=s.memoizedState,pe.componentWillUnmount()}catch(ge){gt(f,c,ge)}}break;case 5:cl(X,X.return);break;case 22:if(X.memoizedState!==null){PA(Q);continue}}ue!==null?(ue.return=X,fe=ue):PA(Q)}K=K.sibling}e:for(K=null,Q=i;;){if(Q.tag===5){if(K===null){K=Q;try{m=Q.stateNode,$?(w=m.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none"):(R=Q.stateNode,I=Q.memoizedProps.style,_=I!=null&&I.hasOwnProperty("display")?I.display:null,R.style.display=l0("display",_))}catch(ge){gt(i,i.return,ge)}}}else if(Q.tag===6){if(K===null)try{Q.stateNode.nodeValue=$?"":Q.memoizedProps}catch(ge){gt(i,i.return,ge)}}else if((Q.tag!==22&&Q.tag!==23||Q.memoizedState===null||Q===i)&&Q.child!==null){Q.child.return=Q,Q=Q.child;continue}if(Q===i)break e;for(;Q.sibling===null;){if(Q.return===null||Q.return===i)break e;K===Q&&(K=null),Q=Q.return}K===Q&&(K=null),Q.sibling.return=Q.return,Q=Q.sibling}}break;case 19:_i(s,i),Xi(i),f&4&&CA(i);break;case 21:break;default:_i(s,i),Xi(i)}}function Xi(i){var s=i.flags;if(s&2){try{e:{for(var c=i.return;c!==null;){if(EA(c)){var f=c;break e}c=c.return}throw Error(t(160))}switch(f.tag){case 5:var m=f.stateNode;f.flags&32&&(ys(m,""),f.flags&=-33);var w=_A(i);Cm(i,w,m);break;case 3:case 4:var _=f.stateNode.containerInfo,R=_A(i);xm(i,R,_);break;default:throw Error(t(161))}}catch(I){gt(i,i.return,I)}i.flags&=-3}s&4096&&(i.flags&=-4097)}function G1(i,s,c){fe=i,kA(i)}function kA(i,s,c){for(var f=(i.mode&1)!==0;fe!==null;){var m=fe,w=m.child;if(m.tag===22&&f){var _=m.memoizedState!==null||lf;if(!_){var R=m.alternate,I=R!==null&&R.memoizedState!==null||rn;R=lf;var $=rn;if(lf=_,(rn=I)&&!$)for(fe=m;fe!==null;)_=fe,I=_.child,_.tag===22&&_.memoizedState!==null?LA(m):I!==null?(I.return=_,fe=I):LA(m);for(;w!==null;)fe=w,kA(w),w=w.sibling;fe=m,lf=R,rn=$}RA(i)}else(m.subtreeFlags&8772)!==0&&w!==null?(w.return=m,fe=w):RA(i)}}function RA(i){for(;fe!==null;){var s=fe;if((s.flags&8772)!==0){var c=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:rn||cf(5,s);break;case 1:var f=s.stateNode;if(s.flags&4&&!rn)if(c===null)f.componentDidMount();else{var m=s.elementType===s.type?c.memoizedProps:Si(s.type,c.memoizedProps);f.componentDidUpdate(m,c.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var w=s.updateQueue;w!==null&&Pw(s,w,f);break;case 3:var _=s.updateQueue;if(_!==null){if(c=null,s.child!==null)switch(s.child.tag){case 5:c=s.child.stateNode;break;case 1:c=s.child.stateNode}Pw(s,_,c)}break;case 5:var R=s.stateNode;if(c===null&&s.flags&4){c=R;var I=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":I.autoFocus&&c.focus();break;case"img":I.src&&(c.src=I.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var $=s.alternate;if($!==null){var K=$.memoizedState;if(K!==null){var Q=K.dehydrated;Q!==null&&$c(Q)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}rn||s.flags&512&&_m(s)}catch(X){gt(s,s.return,X)}}if(s===i){fe=null;break}if(c=s.sibling,c!==null){c.return=s.return,fe=c;break}fe=s.return}}function PA(i){for(;fe!==null;){var s=fe;if(s===i){fe=null;break}var c=s.sibling;if(c!==null){c.return=s.return,fe=c;break}fe=s.return}}function LA(i){for(;fe!==null;){var s=fe;try{switch(s.tag){case 0:case 11:case 15:var c=s.return;try{cf(4,s)}catch(I){gt(s,c,I)}break;case 1:var f=s.stateNode;if(typeof f.componentDidMount=="function"){var m=s.return;try{f.componentDidMount()}catch(I){gt(s,m,I)}}var w=s.return;try{_m(s)}catch(I){gt(s,w,I)}break;case 5:var _=s.return;try{_m(s)}catch(I){gt(s,_,I)}}}catch(I){gt(s,s.return,I)}if(s===i){fe=null;break}var R=s.sibling;if(R!==null){R.return=s.return,fe=R;break}fe=s.return}}var q1=Math.ceil,uf=F.ReactCurrentDispatcher,Tm=F.ReactCurrentOwner,oi=F.ReactCurrentBatchConfig,$e=0,Bt=null,xt=null,Xt=0,Un=0,ul=mr(0),Lt=0,du=null,Eo=0,hf=0,km=0,fu=null,Tn=null,Rm=0,hl=1/0,xs=null,df=!1,Pm=null,Sr=null,ff=!1,Er=null,pf=0,pu=0,Lm=null,gf=-1,mf=0;function mn(){return($e&6)!==0?wt():gf!==-1?gf:gf=wt()}function _r(i){return(i.mode&1)===0?1:($e&2)!==0&&Xt!==0?Xt&-Xt:P1.transition!==null?(mf===0&&(mf=_0()),mf):(i=qe,i!==0||(i=window.event,i=i===void 0?16:I0(i.type)),i)}function xi(i,s,c,f){if(50<pu)throw pu=0,Lm=null,Error(t(185));jc(i,c,f),(($e&2)===0||i!==Bt)&&(i===Bt&&(($e&2)===0&&(hf|=c),Lt===4&&xr(i,Xt)),kn(i,f),c===1&&$e===0&&(s.mode&1)===0&&(hl=wt()+500,$d&&vr()))}function kn(i,s){var c=i.callbackNode;Px(i,s);var f=_d(i,i===Bt?Xt:0);if(f===0)c!==null&&b0(c),i.callbackNode=null,i.callbackPriority=0;else if(s=f&-f,i.callbackPriority!==s){if(c!=null&&b0(c),s===1)i.tag===0?R1(IA.bind(null,i)):vw(IA.bind(null,i)),x1(function(){($e&6)===0&&vr()}),c=null;else{switch(x0(f)){case 1:c=ug;break;case 4:c=S0;break;case 16:c=Ad;break;case 536870912:c=E0;break;default:c=Ad}c=HA(c,MA.bind(null,i))}i.callbackPriority=s,i.callbackNode=c}}function MA(i,s){if(gf=-1,mf=0,($e&6)!==0)throw Error(t(327));var c=i.callbackNode;if(dl()&&i.callbackNode!==c)return null;var f=_d(i,i===Bt?Xt:0);if(f===0)return null;if((f&30)!==0||(f&i.expiredLanes)!==0||s)s=yf(i,f);else{s=f;var m=$e;$e|=2;var w=DA();(Bt!==i||Xt!==s)&&(xs=null,hl=wt()+500,xo(i,s));do try{Y1();break}catch(R){FA(i,R)}while(!0);Kg(),uf.current=w,$e=m,xt!==null?s=0:(Bt=null,Xt=0,s=Lt)}if(s!==0){if(s===2&&(m=hg(i),m!==0&&(f=m,s=Mm(i,m))),s===1)throw c=du,xo(i,0),xr(i,f),kn(i,wt()),c;if(s===6)xr(i,f);else{if(m=i.current.alternate,(f&30)===0&&!X1(m)&&(s=yf(i,f),s===2&&(w=hg(i),w!==0&&(f=w,s=Mm(i,w))),s===1))throw c=du,xo(i,0),xr(i,f),kn(i,wt()),c;switch(i.finishedWork=m,i.finishedLanes=f,s){case 0:case 1:throw Error(t(345));case 2:Co(i,Tn,xs);break;case 3:if(xr(i,f),(f&130023424)===f&&(s=Rm+500-wt(),10<s)){if(_d(i,0)!==0)break;if(m=i.suspendedLanes,(m&f)!==f){mn(),i.pingedLanes|=i.suspendedLanes&m;break}i.timeoutHandle=jg(Co.bind(null,i,Tn,xs),s);break}Co(i,Tn,xs);break;case 4:if(xr(i,f),(f&4194240)===f)break;for(s=i.eventTimes,m=-1;0<f;){var _=31-wi(f);w=1<<_,_=s[_],_>m&&(m=_),f&=~w}if(f=m,f=wt()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*q1(f/1960))-f,10<f){i.timeoutHandle=jg(Co.bind(null,i,Tn,xs),f);break}Co(i,Tn,xs);break;case 5:Co(i,Tn,xs);break;default:throw Error(t(329))}}}return kn(i,wt()),i.callbackNode===c?MA.bind(null,i):null}function Mm(i,s){var c=fu;return i.current.memoizedState.isDehydrated&&(xo(i,s).flags|=256),i=yf(i,s),i!==2&&(s=Tn,Tn=c,s!==null&&Im(s)),i}function Im(i){Tn===null?Tn=i:Tn.push.apply(Tn,i)}function X1(i){for(var s=i;;){if(s.flags&16384){var c=s.updateQueue;if(c!==null&&(c=c.stores,c!==null))for(var f=0;f<c.length;f++){var m=c[f],w=m.getSnapshot;m=m.value;try{if(!Ai(w(),m))return!1}catch{return!1}}}if(c=s.child,s.subtreeFlags&16384&&c!==null)c.return=s,s=c;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function xr(i,s){for(s&=~km,s&=~hf,i.suspendedLanes|=s,i.pingedLanes&=~s,i=i.expirationTimes;0<s;){var c=31-wi(s),f=1<<c;i[c]=-1,s&=~f}}function IA(i){if(($e&6)!==0)throw Error(t(327));dl();var s=_d(i,0);if((s&1)===0)return kn(i,wt()),null;var c=yf(i,s);if(i.tag!==0&&c===2){var f=hg(i);f!==0&&(s=f,c=Mm(i,f))}if(c===1)throw c=du,xo(i,0),xr(i,s),kn(i,wt()),c;if(c===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=s,Co(i,Tn,xs),kn(i,wt()),null}function Fm(i,s){var c=$e;$e|=1;try{return i(s)}finally{$e=c,$e===0&&(hl=wt()+500,$d&&vr())}}function _o(i){Er!==null&&Er.tag===0&&($e&6)===0&&dl();var s=$e;$e|=1;var c=oi.transition,f=qe;try{if(oi.transition=null,qe=1,i)return i()}finally{qe=f,oi.transition=c,$e=s,($e&6)===0&&vr()}}function Dm(){Un=ul.current,st(ul)}function xo(i,s){i.finishedWork=null,i.finishedLanes=0;var c=i.timeoutHandle;if(c!==-1&&(i.timeoutHandle=-1,_1(c)),xt!==null)for(c=xt.return;c!==null;){var f=c;switch(Wg(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&Hd();break;case 3:al(),st(_n),st(tn),im();break;case 5:tm(f);break;case 4:al();break;case 13:st(ct);break;case 19:st(ct);break;case 10:Yg(f.type._context);break;case 22:case 23:Dm()}c=c.return}if(Bt=i,xt=i=Cr(i.current,null),Xt=Un=s,Lt=0,du=null,km=hf=Eo=0,Tn=fu=null,Ao!==null){for(s=0;s<Ao.length;s++)if(c=Ao[s],f=c.interleaved,f!==null){c.interleaved=null;var m=f.next,w=c.pending;if(w!==null){var _=w.next;w.next=m,f.next=_}c.pending=f}Ao=null}return i}function FA(i,s){do{var c=xt;try{if(Kg(),Zd.current=sf,ef){for(var f=ut.memoizedState;f!==null;){var m=f.queue;m!==null&&(m.pending=null),f=f.next}ef=!1}if(So=0,jt=Pt=ut=null,ou=!1,au=0,Tm.current=null,c===null||c.return===null){Lt=1,du=s,xt=null;break}e:{var w=i,_=c.return,R=c,I=s;if(s=Xt,R.flags|=32768,I!==null&&typeof I=="object"&&typeof I.then=="function"){var $=I,K=R,Q=K.tag;if((K.mode&1)===0&&(Q===0||Q===11||Q===15)){var X=K.alternate;X?(K.updateQueue=X.updateQueue,K.memoizedState=X.memoizedState,K.lanes=X.lanes):(K.updateQueue=null,K.memoizedState=null)}var ue=rA(_);if(ue!==null){ue.flags&=-257,oA(ue,_,R,w,s),ue.mode&1&&sA(w,$,s),s=ue,I=$;var pe=s.updateQueue;if(pe===null){var ge=new Set;ge.add(I),s.updateQueue=ge}else pe.add(I);break e}else{if((s&1)===0){sA(w,$,s),Om();break e}I=Error(t(426))}}else if(at&&R.mode&1){var At=rA(_);if(At!==null){(At.flags&65536)===0&&(At.flags|=256),oA(At,_,R,w,s),qg(ll(I,R));break e}}w=I=ll(I,R),Lt!==4&&(Lt=2),fu===null?fu=[w]:fu.push(w),w=_;do{switch(w.tag){case 3:w.flags|=65536,s&=-s,w.lanes|=s;var B=nA(w,I,s);Rw(w,B);break e;case 1:R=I;var O=w.type,H=w.stateNode;if((w.flags&128)===0&&(typeof O.getDerivedStateFromError=="function"||H!==null&&typeof H.componentDidCatch=="function"&&(Sr===null||!Sr.has(H)))){w.flags|=65536,s&=-s,w.lanes|=s;var ee=iA(w,R,s);Rw(w,ee);break e}}w=w.return}while(w!==null)}NA(c)}catch(ve){s=ve,xt===c&&c!==null&&(xt=c=c.return);continue}break}while(!0)}function DA(){var i=uf.current;return uf.current=sf,i===null?sf:i}function Om(){(Lt===0||Lt===3||Lt===2)&&(Lt=4),Bt===null||(Eo&268435455)===0&&(hf&268435455)===0||xr(Bt,Xt)}function yf(i,s){var c=$e;$e|=2;var f=DA();(Bt!==i||Xt!==s)&&(xs=null,xo(i,s));do try{K1();break}catch(m){FA(i,m)}while(!0);if(Kg(),$e=c,uf.current=f,xt!==null)throw Error(t(261));return Bt=null,Xt=0,Lt}function K1(){for(;xt!==null;)OA(xt)}function Y1(){for(;xt!==null&&!bx();)OA(xt)}function OA(i){var s=zA(i.alternate,i,Un);i.memoizedProps=i.pendingProps,s===null?NA(i):xt=s,Tm.current=null}function NA(i){var s=i;do{var c=s.alternate;if(i=s.return,(s.flags&32768)===0){if(c=U1(c,s,Un),c!==null){xt=c;return}}else{if(c=$1(c,s),c!==null){c.flags&=32767,xt=c;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{Lt=6,xt=null;return}}if(s=s.sibling,s!==null){xt=s;return}xt=s=i}while(s!==null);Lt===0&&(Lt=5)}function Co(i,s,c){var f=qe,m=oi.transition;try{oi.transition=null,qe=1,Q1(i,s,c,f)}finally{oi.transition=m,qe=f}return null}function Q1(i,s,c,f){do dl();while(Er!==null);if(($e&6)!==0)throw Error(t(327));c=i.finishedWork;var m=i.finishedLanes;if(c===null)return null;if(i.finishedWork=null,i.finishedLanes=0,c===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var w=c.lanes|c.childLanes;if(Lx(i,w),i===Bt&&(xt=Bt=null,Xt=0),(c.subtreeFlags&2064)===0&&(c.flags&2064)===0||ff||(ff=!0,HA(Ad,function(){return dl(),null})),w=(c.flags&15990)!==0,(c.subtreeFlags&15990)!==0||w){w=oi.transition,oi.transition=null;var _=qe;qe=1;var R=$e;$e|=4,Tm.current=null,V1(i,c),TA(c,i),y1(Og),Td=!!Dg,Og=Dg=null,i.current=c,G1(c),Sx(),$e=R,qe=_,oi.transition=w}else i.current=c;if(ff&&(ff=!1,Er=i,pf=m),w=i.pendingLanes,w===0&&(Sr=null),xx(c.stateNode),kn(i,wt()),s!==null)for(f=i.onRecoverableError,c=0;c<s.length;c++)m=s[c],f(m.value,{componentStack:m.stack,digest:m.digest});if(df)throw df=!1,i=Pm,Pm=null,i;return(pf&1)!==0&&i.tag!==0&&dl(),w=i.pendingLanes,(w&1)!==0?i===Lm?pu++:(pu=0,Lm=i):pu=0,vr(),null}function dl(){if(Er!==null){var i=x0(pf),s=oi.transition,c=qe;try{if(oi.transition=null,qe=16>i?16:i,Er===null)var f=!1;else{if(i=Er,Er=null,pf=0,($e&6)!==0)throw Error(t(331));var m=$e;for($e|=4,fe=i.current;fe!==null;){var w=fe,_=w.child;if((fe.flags&16)!==0){var R=w.deletions;if(R!==null){for(var I=0;I<R.length;I++){var $=R[I];for(fe=$;fe!==null;){var K=fe;switch(K.tag){case 0:case 11:case 15:hu(8,K,w)}var Q=K.child;if(Q!==null)Q.return=K,fe=Q;else for(;fe!==null;){K=fe;var X=K.sibling,ue=K.return;if(SA(K),K===$){fe=null;break}if(X!==null){X.return=ue,fe=X;break}fe=ue}}}var pe=w.alternate;if(pe!==null){var ge=pe.child;if(ge!==null){pe.child=null;do{var At=ge.sibling;ge.sibling=null,ge=At}while(ge!==null)}}fe=w}}if((w.subtreeFlags&2064)!==0&&_!==null)_.return=w,fe=_;else e:for(;fe!==null;){if(w=fe,(w.flags&2048)!==0)switch(w.tag){case 0:case 11:case 15:hu(9,w,w.return)}var B=w.sibling;if(B!==null){B.return=w.return,fe=B;break e}fe=w.return}}var O=i.current;for(fe=O;fe!==null;){_=fe;var H=_.child;if((_.subtreeFlags&2064)!==0&&H!==null)H.return=_,fe=H;else e:for(_=O;fe!==null;){if(R=fe,(R.flags&2048)!==0)try{switch(R.tag){case 0:case 11:case 15:cf(9,R)}}catch(ve){gt(R,R.return,ve)}if(R===_){fe=null;break e}var ee=R.sibling;if(ee!==null){ee.return=R.return,fe=ee;break e}fe=R.return}}if($e=m,vr(),Wi&&typeof Wi.onPostCommitFiberRoot=="function")try{Wi.onPostCommitFiberRoot(bd,i)}catch{}f=!0}return f}finally{qe=c,oi.transition=s}}return!1}function jA(i,s,c){s=ll(c,s),s=nA(i,s,1),i=Ar(i,s,1),s=mn(),i!==null&&(jc(i,1,s),kn(i,s))}function gt(i,s,c){if(i.tag===3)jA(i,i,c);else for(;s!==null;){if(s.tag===3){jA(s,i,c);break}else if(s.tag===1){var f=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Sr===null||!Sr.has(f))){i=ll(c,i),i=iA(s,i,1),s=Ar(s,i,1),i=mn(),s!==null&&(jc(s,1,i),kn(s,i));break}}s=s.return}}function J1(i,s,c){var f=i.pingCache;f!==null&&f.delete(s),s=mn(),i.pingedLanes|=i.suspendedLanes&c,Bt===i&&(Xt&c)===c&&(Lt===4||Lt===3&&(Xt&130023424)===Xt&&500>wt()-Rm?xo(i,0):km|=c),kn(i,s)}function BA(i,s){s===0&&((i.mode&1)===0?s=1:(s=Ed,Ed<<=1,(Ed&130023424)===0&&(Ed=4194304)));var c=mn();i=Ss(i,s),i!==null&&(jc(i,s,c),kn(i,c))}function Z1(i){var s=i.memoizedState,c=0;s!==null&&(c=s.retryLane),BA(i,c)}function eC(i,s){var c=0;switch(i.tag){case 13:var f=i.stateNode,m=i.memoizedState;m!==null&&(c=m.retryLane);break;case 19:f=i.stateNode;break;default:throw Error(t(314))}f!==null&&f.delete(s),BA(i,c)}var zA;zA=function(i,s,c){if(i!==null)if(i.memoizedProps!==s.pendingProps||_n.current)Cn=!0;else{if((i.lanes&c)===0&&(s.flags&128)===0)return Cn=!1,H1(i,s,c);Cn=(i.flags&131072)!==0}else Cn=!1,at&&(s.flags&1048576)!==0&&ww(s,Vd,s.index);switch(s.lanes=0,s.tag){case 2:var f=s.type;af(i,s),i=s.pendingProps;var m=el(s,tn.current);ol(s,c),m=om(null,s,f,i,m,c);var w=am();return s.flags|=1,typeof m=="object"&&m!==null&&typeof m.render=="function"&&m.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,xn(f)?(w=!0,Ud(s)):w=!1,s.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,Zg(s),m.updater=rf,s.stateNode=m,m._reactInternals=s,fm(s,f,i,c),s=ym(null,s,f,!0,w,c)):(s.tag=0,at&&w&&$g(s),gn(null,s,m,c),s=s.child),s;case 16:f=s.elementType;e:{switch(af(i,s),i=s.pendingProps,m=f._init,f=m(f._payload),s.type=f,m=s.tag=nC(f),i=Si(f,i),m){case 0:s=mm(null,s,f,i,c);break e;case 1:s=dA(null,s,f,i,c);break e;case 11:s=aA(null,s,f,i,c);break e;case 14:s=lA(null,s,f,Si(f.type,i),c);break e}throw Error(t(306,f,""))}return s;case 0:return f=s.type,m=s.pendingProps,m=s.elementType===f?m:Si(f,m),mm(i,s,f,m,c);case 1:return f=s.type,m=s.pendingProps,m=s.elementType===f?m:Si(f,m),dA(i,s,f,m,c);case 3:e:{if(fA(s),i===null)throw Error(t(387));f=s.pendingProps,w=s.memoizedState,m=w.element,kw(i,s),Qd(s,f,null,c);var _=s.memoizedState;if(f=_.element,w.isDehydrated)if(w={element:f,isDehydrated:!1,cache:_.cache,pendingSuspenseBoundaries:_.pendingSuspenseBoundaries,transitions:_.transitions},s.updateQueue.baseState=w,s.memoizedState=w,s.flags&256){m=ll(Error(t(423)),s),s=pA(i,s,f,c,m);break e}else if(f!==m){m=ll(Error(t(424)),s),s=pA(i,s,f,c,m);break e}else for(Hn=gr(s.stateNode.containerInfo.firstChild),zn=s,at=!0,bi=null,c=Cw(s,null,f,c),s.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(il(),f===m){s=_s(i,s,c);break e}gn(i,s,f,c)}s=s.child}return s;case 5:return Lw(s),i===null&&Gg(s),f=s.type,m=s.pendingProps,w=i!==null?i.memoizedProps:null,_=m.children,Ng(f,m)?_=null:w!==null&&Ng(f,w)&&(s.flags|=32),hA(i,s),gn(i,s,_,c),s.child;case 6:return i===null&&Gg(s),null;case 13:return gA(i,s,c);case 4:return em(s,s.stateNode.containerInfo),f=s.pendingProps,i===null?s.child=sl(s,null,f,c):gn(i,s,f,c),s.child;case 11:return f=s.type,m=s.pendingProps,m=s.elementType===f?m:Si(f,m),aA(i,s,f,m,c);case 7:return gn(i,s,s.pendingProps,c),s.child;case 8:return gn(i,s,s.pendingProps.children,c),s.child;case 12:return gn(i,s,s.pendingProps.children,c),s.child;case 10:e:{if(f=s.type._context,m=s.pendingProps,w=s.memoizedProps,_=m.value,tt(Xd,f._currentValue),f._currentValue=_,w!==null)if(Ai(w.value,_)){if(w.children===m.children&&!_n.current){s=_s(i,s,c);break e}}else for(w=s.child,w!==null&&(w.return=s);w!==null;){var R=w.dependencies;if(R!==null){_=w.child;for(var I=R.firstContext;I!==null;){if(I.context===f){if(w.tag===1){I=Es(-1,c&-c),I.tag=2;var $=w.updateQueue;if($!==null){$=$.shared;var K=$.pending;K===null?I.next=I:(I.next=K.next,K.next=I),$.pending=I}}w.lanes|=c,I=w.alternate,I!==null&&(I.lanes|=c),Qg(w.return,c,s),R.lanes|=c;break}I=I.next}}else if(w.tag===10)_=w.type===s.type?null:w.child;else if(w.tag===18){if(_=w.return,_===null)throw Error(t(341));_.lanes|=c,R=_.alternate,R!==null&&(R.lanes|=c),Qg(_,c,s),_=w.sibling}else _=w.child;if(_!==null)_.return=w;else for(_=w;_!==null;){if(_===s){_=null;break}if(w=_.sibling,w!==null){w.return=_.return,_=w;break}_=_.return}w=_}gn(i,s,m.children,c),s=s.child}return s;case 9:return m=s.type,f=s.pendingProps.children,ol(s,c),m=si(m),f=f(m),s.flags|=1,gn(i,s,f,c),s.child;case 14:return f=s.type,m=Si(f,s.pendingProps),m=Si(f.type,m),lA(i,s,f,m,c);case 15:return cA(i,s,s.type,s.pendingProps,c);case 17:return f=s.type,m=s.pendingProps,m=s.elementType===f?m:Si(f,m),af(i,s),s.tag=1,xn(f)?(i=!0,Ud(s)):i=!1,ol(s,c),eA(s,f,m),fm(s,f,m,c),ym(null,s,f,!0,i,c);case 19:return yA(i,s,c);case 22:return uA(i,s,c)}throw Error(t(156,s.tag))};function HA(i,s){return A0(i,s)}function tC(i,s,c,f){this.tag=i,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ai(i,s,c,f){return new tC(i,s,c,f)}function Nm(i){return i=i.prototype,!(!i||!i.isReactComponent)}function nC(i){if(typeof i=="function")return Nm(i)?1:0;if(i!=null){if(i=i.$$typeof,i===be)return 11;if(i===me)return 14}return 2}function Cr(i,s){var c=i.alternate;return c===null?(c=ai(i.tag,s,i.key,i.mode),c.elementType=i.elementType,c.type=i.type,c.stateNode=i.stateNode,c.alternate=i,i.alternate=c):(c.pendingProps=s,c.type=i.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=i.flags&14680064,c.childLanes=i.childLanes,c.lanes=i.lanes,c.child=i.child,c.memoizedProps=i.memoizedProps,c.memoizedState=i.memoizedState,c.updateQueue=i.updateQueue,s=i.dependencies,c.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},c.sibling=i.sibling,c.index=i.index,c.ref=i.ref,c}function vf(i,s,c,f,m,w){var _=2;if(f=i,typeof i=="function")Nm(i)&&(_=1);else if(typeof i=="string")_=5;else e:switch(i){case N:return To(c.children,m,w,s);case q:_=8,m|=8;break;case J:return i=ai(12,c,s,m|2),i.elementType=J,i.lanes=w,i;case de:return i=ai(13,c,s,m),i.elementType=de,i.lanes=w,i;case ce:return i=ai(19,c,s,m),i.elementType=ce,i.lanes=w,i;case Z:return wf(c,m,w,s);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case se:_=10;break e;case ne:_=9;break e;case be:_=11;break e;case me:_=14;break e;case le:_=16,f=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return s=ai(_,c,s,m),s.elementType=i,s.type=f,s.lanes=w,s}function To(i,s,c,f){return i=ai(7,i,f,s),i.lanes=c,i}function wf(i,s,c,f){return i=ai(22,i,f,s),i.elementType=Z,i.lanes=c,i.stateNode={isHidden:!1},i}function jm(i,s,c){return i=ai(6,i,null,s),i.lanes=c,i}function Bm(i,s,c){return s=ai(4,i.children!==null?i.children:[],i.key,s),s.lanes=c,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}function iC(i,s,c,f,m){this.tag=s,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=dg(0),this.expirationTimes=dg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=dg(0),this.identifierPrefix=f,this.onRecoverableError=m,this.mutableSourceEagerHydrationData=null}function zm(i,s,c,f,m,w,_,R,I){return i=new iC(i,s,c,R,I),s===1?(s=1,w===!0&&(s|=8)):s=0,w=ai(3,null,null,s),i.current=w,w.stateNode=i,w.memoizedState={element:f,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},Zg(w),i}function sC(i,s,c){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:U,key:f==null?null:""+f,children:i,containerInfo:s,implementation:c}}function UA(i){if(!i)return yr;i=i._reactInternals;e:{if(go(i)!==i||i.tag!==1)throw Error(t(170));var s=i;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(xn(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(i.tag===1){var c=i.type;if(xn(c))return mw(i,c,s)}return s}function $A(i,s,c,f,m,w,_,R,I){return i=zm(c,f,!0,i,m,w,_,R,I),i.context=UA(null),c=i.current,f=mn(),m=_r(c),w=Es(f,m),w.callback=s??null,Ar(c,w,m),i.current.lanes=m,jc(i,m,f),kn(i,f),i}function Af(i,s,c,f){var m=s.current,w=mn(),_=_r(m);return c=UA(c),s.context===null?s.context=c:s.pendingContext=c,s=Es(w,_),s.payload={element:i},f=f===void 0?null:f,f!==null&&(s.callback=f),i=Ar(m,s,_),i!==null&&(xi(i,m,_,w),Yd(i,m,_)),_}function bf(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function WA(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var c=i.retryLane;i.retryLane=c!==0&&c<s?c:s}}function Hm(i,s){WA(i,s),(i=i.alternate)&&WA(i,s)}function rC(){return null}var VA=typeof reportError=="function"?reportError:function(i){console.error(i)};function Um(i){this._internalRoot=i}Sf.prototype.render=Um.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw Error(t(409));Af(i,s,null,null)},Sf.prototype.unmount=Um.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;_o(function(){Af(null,i,null,null)}),s[vs]=null}};function Sf(i){this._internalRoot=i}Sf.prototype.unstable_scheduleHydration=function(i){if(i){var s=k0();i={blockedOn:null,target:i,priority:s};for(var c=0;c<dr.length&&s!==0&&s<dr[c].priority;c++);dr.splice(c,0,i),c===0&&L0(i)}};function $m(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function Ef(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function GA(){}function oC(i,s,c,f,m){if(m){if(typeof f=="function"){var w=f;f=function(){var $=bf(_);w.call($)}}var _=$A(s,f,i,0,null,!1,!1,"",GA);return i._reactRootContainer=_,i[vs]=_.current,Jc(i.nodeType===8?i.parentNode:i),_o(),_}for(;m=i.lastChild;)i.removeChild(m);if(typeof f=="function"){var R=f;f=function(){var $=bf(I);R.call($)}}var I=zm(i,0,!1,null,null,!1,!1,"",GA);return i._reactRootContainer=I,i[vs]=I.current,Jc(i.nodeType===8?i.parentNode:i),_o(function(){Af(s,I,c,f)}),I}function _f(i,s,c,f,m){var w=c._reactRootContainer;if(w){var _=w;if(typeof m=="function"){var R=m;m=function(){var I=bf(_);R.call(I)}}Af(s,_,i,m)}else _=oC(c,s,i,m,f);return bf(_)}C0=function(i){switch(i.tag){case 3:var s=i.stateNode;if(s.current.memoizedState.isDehydrated){var c=Nc(s.pendingLanes);c!==0&&(fg(s,c|1),kn(s,wt()),($e&6)===0&&(hl=wt()+500,vr()))}break;case 13:_o(function(){var f=Ss(i,1);if(f!==null){var m=mn();xi(f,i,1,m)}}),Hm(i,1)}},pg=function(i){if(i.tag===13){var s=Ss(i,134217728);if(s!==null){var c=mn();xi(s,i,134217728,c)}Hm(i,134217728)}},T0=function(i){if(i.tag===13){var s=_r(i),c=Ss(i,s);if(c!==null){var f=mn();xi(c,i,s,f)}Hm(i,s)}},k0=function(){return qe},R0=function(i,s){var c=qe;try{return qe=i,s()}finally{qe=c}},og=function(i,s,c){switch(s){case"input":if(en(i,c),s=c.name,c.type==="radio"&&s!=null){for(c=i;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<c.length;s++){var f=c[s];if(f!==i&&f.form===i.form){var m=zd(f);if(!m)throw Error(t(90));ti(f),en(f,m)}}}break;case"textarea":gd(i,c);break;case"select":s=c.value,s!=null&&vi(i,!!c.multiple,s,!1)}},f0=Fm,p0=_o;var aC={usingClientEntryPoint:!1,Events:[tu,Ja,zd,h0,d0,Fm]},gu={findFiberByHostInstance:mo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},lC={bundleType:gu.bundleType,version:gu.version,rendererPackageName:gu.rendererPackageName,rendererConfig:gu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:F.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=v0(i),i===null?null:i.stateNode},findFiberByHostInstance:gu.findFiberByHostInstance||rC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xf.isDisabled&&xf.supportsFiber)try{bd=xf.inject(lC),Wi=xf}catch{}}return Rn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=aC,Rn.createPortal=function(i,s){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$m(s))throw Error(t(200));return sC(i,s,null,c)},Rn.createRoot=function(i,s){if(!$m(i))throw Error(t(299));var c=!1,f="",m=VA;return s!=null&&(s.unstable_strictMode===!0&&(c=!0),s.identifierPrefix!==void 0&&(f=s.identifierPrefix),s.onRecoverableError!==void 0&&(m=s.onRecoverableError)),s=zm(i,1,!1,null,null,c,!1,f,m),i[vs]=s.current,Jc(i.nodeType===8?i.parentNode:i),new Um(s)},Rn.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=v0(s),i=i===null?null:i.stateNode,i},Rn.flushSync=function(i){return _o(i)},Rn.hydrate=function(i,s,c){if(!Ef(s))throw Error(t(200));return _f(null,i,s,!0,c)},Rn.hydrateRoot=function(i,s,c){if(!$m(i))throw Error(t(405));var f=c!=null&&c.hydratedSources||null,m=!1,w="",_=VA;if(c!=null&&(c.unstable_strictMode===!0&&(m=!0),c.identifierPrefix!==void 0&&(w=c.identifierPrefix),c.onRecoverableError!==void 0&&(_=c.onRecoverableError)),s=$A(s,null,i,1,c??null,m,!1,w,_),i[vs]=s.current,Jc(i),f)for(i=0;i<f.length;i++)c=f[i],m=c._getVersion,m=m(c._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[c,m]:s.mutableSourceEagerHydrationData.push(c,m);return new Sf(s)},Rn.render=function(i,s,c){if(!Ef(s))throw Error(t(200));return _f(null,i,s,!1,c)},Rn.unmountComponentAtNode=function(i){if(!Ef(i))throw Error(t(40));return i._reactRootContainer?(_o(function(){_f(null,null,i,!1,function(){i._reactRootContainer=null,i[vs]=null})}),!0):!1},Rn.unstable_batchedUpdates=Fm,Rn.unstable_renderSubtreeIntoContainer=function(i,s,c,f){if(!Ef(c))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return _f(i,s,c,!1,f)},Rn.version="18.3.1-next-f1338f8080-20240426",Rn}var tb;function cS(){if(tb)return qm.exports;tb=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(e){console.error(e)}}return a(),qm.exports=wC(),qm.exports}var nb;function AC(){if(nb)return Cf;nb=1;var a=cS();return Cf.createRoot=a.createRoot,Cf.hydrateRoot=a.hydrateRoot,Cf}var bC=AC();const SC=Fv(bC);cS();/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zu(){return zu=Object.assign?Object.assign.bind():function(a){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(a[n]=t[n])}return a},zu.apply(this,arguments)}var so;(function(a){a.Pop="POP",a.Push="PUSH",a.Replace="REPLACE"})(so||(so={}));const ib="popstate";function EC(a){a===void 0&&(a={});function e(n,r){let{pathname:o,search:l,hash:h}=n.location;return ay("",{pathname:o,search:l,hash:h},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function t(n,r){return typeof r=="string"?r:fp(r)}return xC(e,t,null,a)}function St(a,e){if(a===!1||a===null||typeof a>"u")throw new Error(e)}function Ov(a,e){if(!a){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function _C(){return Math.random().toString(36).substr(2,8)}function sb(a,e){return{usr:a.state,key:a.key,idx:e}}function ay(a,e,t,n){return t===void 0&&(t=null),zu({pathname:typeof a=="string"?a:a.pathname,search:"",hash:""},typeof e=="string"?Tc(e):e,{state:t,key:e&&e.key||n||_C()})}function fp(a){let{pathname:e="/",search:t="",hash:n=""}=a;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Tc(a){let e={};if(a){let t=a.indexOf("#");t>=0&&(e.hash=a.substr(t),a=a.substr(0,t));let n=a.indexOf("?");n>=0&&(e.search=a.substr(n),a=a.substr(0,n)),a&&(e.pathname=a)}return e}function xC(a,e,t,n){n===void 0&&(n={});let{window:r=document.defaultView,v5Compat:o=!1}=n,l=r.history,h=so.Pop,d=null,p=g();p==null&&(p=0,l.replaceState(zu({},l.state,{idx:p}),""));function g(){return(l.state||{idx:null}).idx}function y(){h=so.Pop;let C=g(),k=C==null?null:C-p;p=C,d&&d({action:h,location:E.location,delta:k})}function v(C,k){h=so.Push;let L=ay(E.location,C,k);p=g()+1;let M=sb(L,p),F=E.createHref(L);try{l.pushState(M,"",F)}catch(z){if(z instanceof DOMException&&z.name==="DataCloneError")throw z;r.location.assign(F)}o&&d&&d({action:h,location:E.location,delta:1})}function b(C,k){h=so.Replace;let L=ay(E.location,C,k);p=g();let M=sb(L,p),F=E.createHref(L);l.replaceState(M,"",F),o&&d&&d({action:h,location:E.location,delta:0})}function A(C){let k=r.location.origin!=="null"?r.location.origin:r.location.href,L=typeof C=="string"?C:fp(C);return L=L.replace(/ $/,"%20"),St(k,"No window.location.(origin|href) available to create URL for href: "+L),new URL(L,k)}let E={get action(){return h},get location(){return a(r,l)},listen(C){if(d)throw new Error("A history only accepts one active listener");return r.addEventListener(ib,y),d=C,()=>{r.removeEventListener(ib,y),d=null}},createHref(C){return e(r,C)},createURL:A,encodeLocation(C){let k=A(C);return{pathname:k.pathname,search:k.search,hash:k.hash}},push:v,replace:b,go(C){return l.go(C)}};return E}var rb;(function(a){a.data="data",a.deferred="deferred",a.redirect="redirect",a.error="error"})(rb||(rb={}));function CC(a,e,t){return t===void 0&&(t="/"),TC(a,e,t)}function TC(a,e,t,n){let r=typeof e=="string"?Tc(e):e,o=Nv(r.pathname||"/",t);if(o==null)return null;let l=uS(a);kC(l);let h=null;for(let d=0;h==null&&d<l.length;++d){let p=zC(o);h=NC(l[d],p)}return h}function uS(a,e,t,n){e===void 0&&(e=[]),t===void 0&&(t=[]),n===void 0&&(n="");let r=(o,l,h)=>{let d={relativePath:h===void 0?o.path||"":h,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};d.relativePath.startsWith("/")&&(St(d.relativePath.startsWith(n),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(n.length));let p=ro([n,d.relativePath]),g=t.concat(d);o.children&&o.children.length>0&&(St(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+p+'".')),uS(o.children,e,g,p)),!(o.path==null&&!o.index)&&e.push({path:p,score:DC(p,o.index),routesMeta:g})};return a.forEach((o,l)=>{var h;if(o.path===""||!((h=o.path)!=null&&h.includes("?")))r(o,l);else for(let d of hS(o.path))r(o,l,d)}),e}function hS(a){let e=a.split("/");if(e.length===0)return[];let[t,...n]=e,r=t.endsWith("?"),o=t.replace(/\?$/,"");if(n.length===0)return r?[o,""]:[o];let l=hS(n.join("/")),h=[];return h.push(...l.map(d=>d===""?o:[o,d].join("/"))),r&&h.push(...l),h.map(d=>a.startsWith("/")&&d===""?"/":d)}function kC(a){a.sort((e,t)=>e.score!==t.score?t.score-e.score:OC(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}const RC=/^:[\w-]+$/,PC=3,LC=2,MC=1,IC=10,FC=-2,ob=a=>a==="*";function DC(a,e){let t=a.split("/"),n=t.length;return t.some(ob)&&(n+=FC),e&&(n+=LC),t.filter(r=>!ob(r)).reduce((r,o)=>r+(RC.test(o)?PC:o===""?MC:IC),n)}function OC(a,e){return a.length===e.length&&a.slice(0,-1).every((n,r)=>n===e[r])?a[a.length-1]-e[e.length-1]:0}function NC(a,e,t){let{routesMeta:n}=a,r={},o="/",l=[];for(let h=0;h<n.length;++h){let d=n[h],p=h===n.length-1,g=o==="/"?e:e.slice(o.length)||"/",y=jC({path:d.relativePath,caseSensitive:d.caseSensitive,end:p},g),v=d.route;if(!y)return null;Object.assign(r,y.params),l.push({params:r,pathname:ro([o,y.pathname]),pathnameBase:VC(ro([o,y.pathnameBase])),route:v}),y.pathnameBase!=="/"&&(o=ro([o,y.pathnameBase]))}return l}function jC(a,e){typeof a=="string"&&(a={path:a,caseSensitive:!1,end:!0});let[t,n]=BC(a.path,a.caseSensitive,a.end),r=e.match(t);if(!r)return null;let o=r[0],l=o.replace(/(.)\/+$/,"$1"),h=r.slice(1);return{params:n.reduce((p,g,y)=>{let{paramName:v,isOptional:b}=g;if(v==="*"){let E=h[y]||"";l=o.slice(0,o.length-E.length).replace(/(.)\/+$/,"$1")}const A=h[y];return b&&!A?p[v]=void 0:p[v]=(A||"").replace(/%2F/g,"/"),p},{}),pathname:o,pathnameBase:l,pattern:a}}function BC(a,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),Ov(a==="*"||!a.endsWith("*")||a.endsWith("/*"),'Route path "'+a+'" will be treated as if it were '+('"'+a.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+a.replace(/\*$/,"/*")+'".'));let n=[],r="^"+a.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,h,d)=>(n.push({paramName:h,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return a.endsWith("*")?(n.push({paramName:"*"}),r+=a==="*"||a==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":a!==""&&a!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),n]}function zC(a){try{return a.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ov(!1,'The URL path "'+a+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),a}}function Nv(a,e){if(e==="/")return a;if(!a.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=a.charAt(t);return n&&n!=="/"?null:a.slice(t)||"/"}const HC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,UC=a=>HC.test(a);function $C(a,e){e===void 0&&(e="/");let{pathname:t,search:n="",hash:r=""}=typeof a=="string"?Tc(a):a,o;if(t)if(UC(t))o=t;else{if(t.includes("//")){let l=t;t=t.replace(/\/\/+/g,"/"),Ov(!1,"Pathnames cannot have embedded double slashes - normalizing "+(l+" -> "+t))}t.startsWith("/")?o=ab(t.substring(1),"/"):o=ab(t,e)}else o=e;return{pathname:o,search:GC(n),hash:qC(r)}}function ab(a,e){let t=e.replace(/\/+$/,"").split("/");return a.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function Ym(a,e,t,n){return"Cannot include a '"+a+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function WC(a){return a.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function jv(a,e){let t=WC(a);return e?t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase):t.map(n=>n.pathnameBase)}function Bv(a,e,t,n){n===void 0&&(n=!1);let r;typeof a=="string"?r=Tc(a):(r=zu({},a),St(!r.pathname||!r.pathname.includes("?"),Ym("?","pathname","search",r)),St(!r.pathname||!r.pathname.includes("#"),Ym("#","pathname","hash",r)),St(!r.search||!r.search.includes("#"),Ym("#","search","hash",r)));let o=a===""||r.pathname==="",l=o?"/":r.pathname,h;if(l==null)h=t;else{let y=e.length-1;if(!n&&l.startsWith("..")){let v=l.split("/");for(;v[0]==="..";)v.shift(),y-=1;r.pathname=v.join("/")}h=y>=0?e[y]:"/"}let d=$C(r,h),p=l&&l!=="/"&&l.endsWith("/"),g=(o||l===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(p||g)&&(d.pathname+="/"),d}const ro=a=>a.join("/").replace(/\/\/+/g,"/"),VC=a=>a.replace(/\/+$/,"").replace(/^\/*/,"/"),GC=a=>!a||a==="?"?"":a.startsWith("?")?a:"?"+a,qC=a=>!a||a==="#"?"":a.startsWith("#")?a:"#"+a;function XC(a){return a!=null&&typeof a.status=="number"&&typeof a.statusText=="string"&&typeof a.internal=="boolean"&&"data"in a}const dS=["post","put","patch","delete"];new Set(dS);const KC=["get",...dS];new Set(KC);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Hu(){return Hu=Object.assign?Object.assign.bind():function(a){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(a[n]=t[n])}return a},Hu.apply(this,arguments)}const zv=j.createContext(null),YC=j.createContext(null),uo=j.createContext(null),jp=j.createContext(null),ar=j.createContext({outlet:null,matches:[],isDataRoute:!1}),fS=j.createContext(null);function QC(a,e){let{relative:t}=e===void 0?{}:e;kc()||St(!1);let{basename:n,navigator:r}=j.useContext(uo),{hash:o,pathname:l,search:h}=gS(a,{relative:t}),d=l;return n!=="/"&&(d=l==="/"?n:ro([n,l])),r.createHref({pathname:d,search:h,hash:o})}function kc(){return j.useContext(jp)!=null}function sd(){return kc()||St(!1),j.useContext(jp).location}function pS(a){j.useContext(uo).static||j.useLayoutEffect(a)}function rd(){let{isDataRoute:a}=j.useContext(ar);return a?hT():JC()}function JC(){kc()||St(!1);let a=j.useContext(zv),{basename:e,future:t,navigator:n}=j.useContext(uo),{matches:r}=j.useContext(ar),{pathname:o}=sd(),l=JSON.stringify(jv(r,t.v7_relativeSplatPath)),h=j.useRef(!1);return pS(()=>{h.current=!0}),j.useCallback(function(p,g){if(g===void 0&&(g={}),!h.current)return;if(typeof p=="number"){n.go(p);return}let y=Bv(p,JSON.parse(l),o,g.relative==="path");a==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:ro([e,y.pathname])),(g.replace?n.replace:n.push)(y,g.state,g)},[e,n,l,o,a])}function ZC(){let{matches:a}=j.useContext(ar),e=a[a.length-1];return e?e.params:{}}function gS(a,e){let{relative:t}=e===void 0?{}:e,{future:n}=j.useContext(uo),{matches:r}=j.useContext(ar),{pathname:o}=sd(),l=JSON.stringify(jv(r,n.v7_relativeSplatPath));return j.useMemo(()=>Bv(a,JSON.parse(l),o,t==="path"),[a,l,o,t])}function eT(a,e){return tT(a,e)}function tT(a,e,t,n){kc()||St(!1);let{navigator:r}=j.useContext(uo),{matches:o}=j.useContext(ar),l=o[o.length-1],h=l?l.params:{};l&&l.pathname;let d=l?l.pathnameBase:"/";l&&l.route;let p=sd(),g;if(e){var y;let C=typeof e=="string"?Tc(e):e;d==="/"||(y=C.pathname)!=null&&y.startsWith(d)||St(!1),g=C}else g=p;let v=g.pathname||"/",b=v;if(d!=="/"){let C=d.replace(/^\//,"").split("/");b="/"+v.replace(/^\//,"").split("/").slice(C.length).join("/")}let A=CC(a,{pathname:b}),E=oT(A&&A.map(C=>Object.assign({},C,{params:Object.assign({},h,C.params),pathname:ro([d,r.encodeLocation?r.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?d:ro([d,r.encodeLocation?r.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),o,t,n);return e&&E?j.createElement(jp.Provider,{value:{location:Hu({pathname:"/",search:"",hash:"",state:null,key:"default"},g),navigationType:so.Pop}},E):E}function nT(){let a=uT(),e=XC(a)?a.status+" "+a.statusText:a instanceof Error?a.message:JSON.stringify(a),t=a instanceof Error?a.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},e),t?j.createElement("pre",{style:r},t):null,null)}const iT=j.createElement(nT,null);class sT extends j.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?j.createElement(ar.Provider,{value:this.props.routeContext},j.createElement(fS.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function rT(a){let{routeContext:e,match:t,children:n}=a,r=j.useContext(zv);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),j.createElement(ar.Provider,{value:e},n)}function oT(a,e,t,n){var r;if(e===void 0&&(e=[]),t===void 0&&(t=null),n===void 0&&(n=null),a==null){var o;if(!t)return null;if(t.errors)a=t.matches;else if((o=n)!=null&&o.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)a=t.matches;else return null}let l=a,h=(r=t)==null?void 0:r.errors;if(h!=null){let g=l.findIndex(y=>y.route.id&&(h==null?void 0:h[y.route.id])!==void 0);g>=0||St(!1),l=l.slice(0,Math.min(l.length,g+1))}let d=!1,p=-1;if(t&&n&&n.v7_partialHydration)for(let g=0;g<l.length;g++){let y=l[g];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(p=g),y.route.id){let{loaderData:v,errors:b}=t,A=y.route.loader&&v[y.route.id]===void 0&&(!b||b[y.route.id]===void 0);if(y.route.lazy||A){d=!0,p>=0?l=l.slice(0,p+1):l=[l[0]];break}}}return l.reduceRight((g,y,v)=>{let b,A=!1,E=null,C=null;t&&(b=h&&y.route.id?h[y.route.id]:void 0,E=y.route.errorElement||iT,d&&(p<0&&v===0?(dT("route-fallback"),A=!0,C=null):p===v&&(A=!0,C=y.route.hydrateFallbackElement||null)));let k=e.concat(l.slice(0,v+1)),L=()=>{let M;return b?M=E:A?M=C:y.route.Component?M=j.createElement(y.route.Component,null):y.route.element?M=y.route.element:M=g,j.createElement(rT,{match:y,routeContext:{outlet:g,matches:k,isDataRoute:t!=null},children:M})};return t&&(y.route.ErrorBoundary||y.route.errorElement||v===0)?j.createElement(sT,{location:t.location,revalidation:t.revalidation,component:E,error:b,children:L(),routeContext:{outlet:null,matches:k,isDataRoute:!0}}):L()},null)}var mS=(function(a){return a.UseBlocker="useBlocker",a.UseRevalidator="useRevalidator",a.UseNavigateStable="useNavigate",a})(mS||{}),yS=(function(a){return a.UseBlocker="useBlocker",a.UseLoaderData="useLoaderData",a.UseActionData="useActionData",a.UseRouteError="useRouteError",a.UseNavigation="useNavigation",a.UseRouteLoaderData="useRouteLoaderData",a.UseMatches="useMatches",a.UseRevalidator="useRevalidator",a.UseNavigateStable="useNavigate",a.UseRouteId="useRouteId",a})(yS||{});function aT(a){let e=j.useContext(zv);return e||St(!1),e}function lT(a){let e=j.useContext(YC);return e||St(!1),e}function cT(a){let e=j.useContext(ar);return e||St(!1),e}function vS(a){let e=cT(),t=e.matches[e.matches.length-1];return t.route.id||St(!1),t.route.id}function uT(){var a;let e=j.useContext(fS),t=lT(),n=vS();return e!==void 0?e:(a=t.errors)==null?void 0:a[n]}function hT(){let{router:a}=aT(mS.UseNavigateStable),e=vS(yS.UseNavigateStable),t=j.useRef(!1);return pS(()=>{t.current=!0}),j.useCallback(function(r,o){o===void 0&&(o={}),t.current&&(typeof r=="number"?a.navigate(r):a.navigate(r,Hu({fromRouteId:e},o)))},[a,e])}const lb={};function dT(a,e,t){lb[a]||(lb[a]=!0)}function fT(a,e){a==null||a.v7_startTransition,a==null||a.v7_relativeSplatPath}function wS(a){let{to:e,replace:t,state:n,relative:r}=a;kc()||St(!1);let{future:o,static:l}=j.useContext(uo),{matches:h}=j.useContext(ar),{pathname:d}=sd(),p=rd(),g=Bv(e,jv(h,o.v7_relativeSplatPath),d,r==="path"),y=JSON.stringify(g);return j.useEffect(()=>p(JSON.parse(y),{replace:t,state:n,relative:r}),[p,y,r,t,n]),null}function fl(a){St(!1)}function pT(a){let{basename:e="/",children:t=null,location:n,navigationType:r=so.Pop,navigator:o,static:l=!1,future:h}=a;kc()&&St(!1);let d=e.replace(/^\/*/,"/"),p=j.useMemo(()=>({basename:d,navigator:o,static:l,future:Hu({v7_relativeSplatPath:!1},h)}),[d,h,o,l]);typeof n=="string"&&(n=Tc(n));let{pathname:g="/",search:y="",hash:v="",state:b=null,key:A="default"}=n,E=j.useMemo(()=>{let C=Nv(g,d);return C==null?null:{location:{pathname:C,search:y,hash:v,state:b,key:A},navigationType:r}},[d,g,y,v,b,A,r]);return E==null?null:j.createElement(uo.Provider,{value:p},j.createElement(jp.Provider,{children:t,value:E}))}function gT(a){let{children:e,location:t}=a;return eT(ly(e),t)}new Promise(()=>{});function ly(a,e){e===void 0&&(e=[]);let t=[];return j.Children.forEach(a,(n,r)=>{if(!j.isValidElement(n))return;let o=[...e,r];if(n.type===j.Fragment){t.push.apply(t,ly(n.props.children,o));return}n.type!==fl&&St(!1),!n.props.index||!n.props.children||St(!1);let l={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(l.children=ly(n.props.children,o)),t.push(l)}),t}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function cy(){return cy=Object.assign?Object.assign.bind():function(a){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(a[n]=t[n])}return a},cy.apply(this,arguments)}function mT(a,e){if(a==null)return{};var t={},n=Object.keys(a),r,o;for(o=0;o<n.length;o++)r=n[o],!(e.indexOf(r)>=0)&&(t[r]=a[r]);return t}function yT(a){return!!(a.metaKey||a.altKey||a.ctrlKey||a.shiftKey)}function vT(a,e){return a.button===0&&(!e||e==="_self")&&!yT(a)}const wT=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],AT="6";try{window.__reactRouterVersion=AT}catch{}const bT="startTransition",cb=mC[bT];function ST(a){let{basename:e,children:t,future:n,window:r}=a,o=j.useRef();o.current==null&&(o.current=EC({window:r,v5Compat:!0}));let l=o.current,[h,d]=j.useState({action:l.action,location:l.location}),{v7_startTransition:p}=n||{},g=j.useCallback(y=>{p&&cb?cb(()=>d(y)):d(y)},[d,p]);return j.useLayoutEffect(()=>l.listen(g),[l,g]),j.useEffect(()=>fT(n),[n]),j.createElement(pT,{basename:e,children:t,location:h.location,navigationType:h.action,navigator:l,future:n})}const ET=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",_T=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,pp=j.forwardRef(function(e,t){let{onClick:n,relative:r,reloadDocument:o,replace:l,state:h,target:d,to:p,preventScrollReset:g,viewTransition:y}=e,v=mT(e,wT),{basename:b}=j.useContext(uo),A,E=!1;if(typeof p=="string"&&_T.test(p)&&(A=p,ET))try{let M=new URL(window.location.href),F=p.startsWith("//")?new URL(M.protocol+p):new URL(p),z=Nv(F.pathname,b);F.origin===M.origin&&z!=null?p=z+F.search+F.hash:E=!0}catch{}let C=QC(p,{relative:r}),k=xT(p,{replace:l,state:h,target:d,preventScrollReset:g,relative:r,viewTransition:y});function L(M){n&&n(M),M.defaultPrevented||k(M)}return j.createElement("a",cy({},v,{href:A||C,onClick:E||o?n:L,ref:t,target:d}))});var ub;(function(a){a.UseScrollRestoration="useScrollRestoration",a.UseSubmit="useSubmit",a.UseSubmitFetcher="useSubmitFetcher",a.UseFetcher="useFetcher",a.useViewTransitionState="useViewTransitionState"})(ub||(ub={}));var hb;(function(a){a.UseFetcher="useFetcher",a.UseFetchers="useFetchers",a.UseScrollRestoration="useScrollRestoration"})(hb||(hb={}));function xT(a,e){let{target:t,replace:n,state:r,preventScrollReset:o,relative:l,viewTransition:h}=e===void 0?{}:e,d=rd(),p=sd(),g=gS(a,{relative:l});return j.useCallback(y=>{if(vT(y,t)){y.preventDefault();let v=n!==void 0?n:fp(p)===fp(g);d(a,{replace:v,state:r,preventScrollReset:o,relative:l,viewTransition:h})}},[p,d,g,n,r,t,a,o,l,h])}function AS(a,e){return function(){return a.apply(e,arguments)}}const{toString:CT}=Object.prototype,{getPrototypeOf:Hv}=Object,{iterator:Bp,toStringTag:bS}=Symbol,zp=(a=>e=>{const t=CT.call(e);return a[t]||(a[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),Ui=a=>(a=a.toLowerCase(),e=>zp(e)===a),Hp=a=>e=>typeof e===a,{isArray:Rc}=Array,xc=Hp("undefined");function od(a){return a!==null&&!xc(a)&&a.constructor!==null&&!xc(a.constructor)&&Nn(a.constructor.isBuffer)&&a.constructor.isBuffer(a)}const SS=Ui("ArrayBuffer");function TT(a){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(a):e=a&&a.buffer&&SS(a.buffer),e}const kT=Hp("string"),Nn=Hp("function"),ES=Hp("number"),ad=a=>a!==null&&typeof a=="object",RT=a=>a===!0||a===!1,Ff=a=>{if(zp(a)!=="object")return!1;const e=Hv(a);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(bS in a)&&!(Bp in a)},PT=a=>{if(!ad(a)||od(a))return!1;try{return Object.keys(a).length===0&&Object.getPrototypeOf(a)===Object.prototype}catch{return!1}},LT=Ui("Date"),MT=Ui("File"),IT=Ui("Blob"),FT=Ui("FileList"),DT=a=>ad(a)&&Nn(a.pipe),OT=a=>{let e;return a&&(typeof FormData=="function"&&a instanceof FormData||Nn(a.append)&&((e=zp(a))==="formdata"||e==="object"&&Nn(a.toString)&&a.toString()==="[object FormData]"))},NT=Ui("URLSearchParams"),[jT,BT,zT,HT]=["ReadableStream","Request","Response","Headers"].map(Ui),UT=a=>a.trim?a.trim():a.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ld(a,e,{allOwnKeys:t=!1}={}){if(a===null||typeof a>"u")return;let n,r;if(typeof a!="object"&&(a=[a]),Rc(a))for(n=0,r=a.length;n<r;n++)e.call(null,a[n],n,a);else{if(od(a))return;const o=t?Object.getOwnPropertyNames(a):Object.keys(a),l=o.length;let h;for(n=0;n<l;n++)h=o[n],e.call(null,a[h],h,a)}}function _S(a,e){if(od(a))return null;e=e.toLowerCase();const t=Object.keys(a);let n=t.length,r;for(;n-- >0;)if(r=t[n],e===r.toLowerCase())return r;return null}const Do=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,xS=a=>!xc(a)&&a!==Do;function uy(){const{caseless:a,skipUndefined:e}=xS(this)&&this||{},t={},n=(r,o)=>{const l=a&&_S(t,o)||o;Ff(t[l])&&Ff(r)?t[l]=uy(t[l],r):Ff(r)?t[l]=uy({},r):Rc(r)?t[l]=r.slice():(!e||!xc(r))&&(t[l]=r)};for(let r=0,o=arguments.length;r<o;r++)arguments[r]&&ld(arguments[r],n);return t}const $T=(a,e,t,{allOwnKeys:n}={})=>(ld(e,(r,o)=>{t&&Nn(r)?a[o]=AS(r,t):a[o]=r},{allOwnKeys:n}),a),WT=a=>(a.charCodeAt(0)===65279&&(a=a.slice(1)),a),VT=(a,e,t,n)=>{a.prototype=Object.create(e.prototype,n),a.prototype.constructor=a,Object.defineProperty(a,"super",{value:e.prototype}),t&&Object.assign(a.prototype,t)},GT=(a,e,t,n)=>{let r,o,l;const h={};if(e=e||{},a==null)return e;do{for(r=Object.getOwnPropertyNames(a),o=r.length;o-- >0;)l=r[o],(!n||n(l,a,e))&&!h[l]&&(e[l]=a[l],h[l]=!0);a=t!==!1&&Hv(a)}while(a&&(!t||t(a,e))&&a!==Object.prototype);return e},qT=(a,e,t)=>{a=String(a),(t===void 0||t>a.length)&&(t=a.length),t-=e.length;const n=a.indexOf(e,t);return n!==-1&&n===t},XT=a=>{if(!a)return null;if(Rc(a))return a;let e=a.length;if(!ES(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=a[e];return t},KT=(a=>e=>a&&e instanceof a)(typeof Uint8Array<"u"&&Hv(Uint8Array)),YT=(a,e)=>{const n=(a&&a[Bp]).call(a);let r;for(;(r=n.next())&&!r.done;){const o=r.value;e.call(a,o[0],o[1])}},QT=(a,e)=>{let t;const n=[];for(;(t=a.exec(e))!==null;)n.push(t);return n},JT=Ui("HTMLFormElement"),ZT=a=>a.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,n,r){return n.toUpperCase()+r}),db=(({hasOwnProperty:a})=>(e,t)=>a.call(e,t))(Object.prototype),ek=Ui("RegExp"),CS=(a,e)=>{const t=Object.getOwnPropertyDescriptors(a),n={};ld(t,(r,o)=>{let l;(l=e(r,o,a))!==!1&&(n[o]=l||r)}),Object.defineProperties(a,n)},tk=a=>{CS(a,(e,t)=>{if(Nn(a)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const n=a[t];if(Nn(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},nk=(a,e)=>{const t={},n=r=>{r.forEach(o=>{t[o]=!0})};return Rc(a)?n(a):n(String(a).split(e)),t},ik=()=>{},sk=(a,e)=>a!=null&&Number.isFinite(a=+a)?a:e;function rk(a){return!!(a&&Nn(a.append)&&a[bS]==="FormData"&&a[Bp])}const ok=a=>{const e=new Array(10),t=(n,r)=>{if(ad(n)){if(e.indexOf(n)>=0)return;if(od(n))return n;if(!("toJSON"in n)){e[r]=n;const o=Rc(n)?[]:{};return ld(n,(l,h)=>{const d=t(l,r+1);!xc(d)&&(o[h]=d)}),e[r]=void 0,o}}return n};return t(a,0)},ak=Ui("AsyncFunction"),lk=a=>a&&(ad(a)||Nn(a))&&Nn(a.then)&&Nn(a.catch),TS=((a,e)=>a?setImmediate:e?((t,n)=>(Do.addEventListener("message",({source:r,data:o})=>{r===Do&&o===t&&n.length&&n.shift()()},!1),r=>{n.push(r),Do.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",Nn(Do.postMessage)),ck=typeof queueMicrotask<"u"?queueMicrotask.bind(Do):typeof process<"u"&&process.nextTick||TS,uk=a=>a!=null&&Nn(a[Bp]),W={isArray:Rc,isArrayBuffer:SS,isBuffer:od,isFormData:OT,isArrayBufferView:TT,isString:kT,isNumber:ES,isBoolean:RT,isObject:ad,isPlainObject:Ff,isEmptyObject:PT,isReadableStream:jT,isRequest:BT,isResponse:zT,isHeaders:HT,isUndefined:xc,isDate:LT,isFile:MT,isBlob:IT,isRegExp:ek,isFunction:Nn,isStream:DT,isURLSearchParams:NT,isTypedArray:KT,isFileList:FT,forEach:ld,merge:uy,extend:$T,trim:UT,stripBOM:WT,inherits:VT,toFlatObject:GT,kindOf:zp,kindOfTest:Ui,endsWith:qT,toArray:XT,forEachEntry:YT,matchAll:QT,isHTMLForm:JT,hasOwnProperty:db,hasOwnProp:db,reduceDescriptors:CS,freezeMethods:tk,toObjectSet:nk,toCamelCase:ZT,noop:ik,toFiniteNumber:sk,findKey:_S,global:Do,isContextDefined:xS,isSpecCompliantForm:rk,toJSONObject:ok,isAsyncFn:ak,isThenable:lk,setImmediate:TS,asap:ck,isIterable:uk};function Ie(a,e,t,n,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=a,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),n&&(this.request=n),r&&(this.response=r,this.status=r.status?r.status:null)}W.inherits(Ie,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:W.toJSONObject(this.config),code:this.code,status:this.status}}});const kS=Ie.prototype,RS={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(a=>{RS[a]={value:a}});Object.defineProperties(Ie,RS);Object.defineProperty(kS,"isAxiosError",{value:!0});Ie.from=(a,e,t,n,r,o)=>{const l=Object.create(kS);W.toFlatObject(a,l,function(g){return g!==Error.prototype},p=>p!=="isAxiosError");const h=a&&a.message?a.message:"Error",d=e==null&&a?a.code:e;return Ie.call(l,h,d,t,n,r),a&&l.cause==null&&Object.defineProperty(l,"cause",{value:a,configurable:!0}),l.name=a&&a.name||"Error",o&&Object.assign(l,o),l};const hk=null;function hy(a){return W.isPlainObject(a)||W.isArray(a)}function PS(a){return W.endsWith(a,"[]")?a.slice(0,-2):a}function fb(a,e,t){return a?a.concat(e).map(function(r,o){return r=PS(r),!t&&o?"["+r+"]":r}).join(t?".":""):e}function dk(a){return W.isArray(a)&&!a.some(hy)}const fk=W.toFlatObject(W,{},null,function(e){return/^is[A-Z]/.test(e)});function Up(a,e,t){if(!W.isObject(a))throw new TypeError("target must be an object");e=e||new FormData,t=W.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(E,C){return!W.isUndefined(C[E])});const n=t.metaTokens,r=t.visitor||g,o=t.dots,l=t.indexes,d=(t.Blob||typeof Blob<"u"&&Blob)&&W.isSpecCompliantForm(e);if(!W.isFunction(r))throw new TypeError("visitor must be a function");function p(A){if(A===null)return"";if(W.isDate(A))return A.toISOString();if(W.isBoolean(A))return A.toString();if(!d&&W.isBlob(A))throw new Ie("Blob is not supported. Use a Buffer instead.");return W.isArrayBuffer(A)||W.isTypedArray(A)?d&&typeof Blob=="function"?new Blob([A]):Buffer.from(A):A}function g(A,E,C){let k=A;if(A&&!C&&typeof A=="object"){if(W.endsWith(E,"{}"))E=n?E:E.slice(0,-2),A=JSON.stringify(A);else if(W.isArray(A)&&dk(A)||(W.isFileList(A)||W.endsWith(E,"[]"))&&(k=W.toArray(A)))return E=PS(E),k.forEach(function(M,F){!(W.isUndefined(M)||M===null)&&e.append(l===!0?fb([E],F,o):l===null?E:E+"[]",p(M))}),!1}return hy(A)?!0:(e.append(fb(C,E,o),p(A)),!1)}const y=[],v=Object.assign(fk,{defaultVisitor:g,convertValue:p,isVisitable:hy});function b(A,E){if(!W.isUndefined(A)){if(y.indexOf(A)!==-1)throw Error("Circular reference detected in "+E.join("."));y.push(A),W.forEach(A,function(k,L){(!(W.isUndefined(k)||k===null)&&r.call(e,k,W.isString(L)?L.trim():L,E,v))===!0&&b(k,E?E.concat(L):[L])}),y.pop()}}if(!W.isObject(a))throw new TypeError("data must be an object");return b(a),e}function pb(a){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(a).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function Uv(a,e){this._pairs=[],a&&Up(a,this,e)}const LS=Uv.prototype;LS.append=function(e,t){this._pairs.push([e,t])};LS.toString=function(e){const t=e?function(n){return e.call(this,n,pb)}:pb;return this._pairs.map(function(r){return t(r[0])+"="+t(r[1])},"").join("&")};function pk(a){return encodeURIComponent(a).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function MS(a,e,t){if(!e)return a;const n=t&&t.encode||pk;W.isFunction(t)&&(t={serialize:t});const r=t&&t.serialize;let o;if(r?o=r(e,t):o=W.isURLSearchParams(e)?e.toString():new Uv(e,t).toString(n),o){const l=a.indexOf("#");l!==-1&&(a=a.slice(0,l)),a+=(a.indexOf("?")===-1?"?":"&")+o}return a}class gb{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){W.forEach(this.handlers,function(n){n!==null&&e(n)})}}const IS={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},gk=typeof URLSearchParams<"u"?URLSearchParams:Uv,mk=typeof FormData<"u"?FormData:null,yk=typeof Blob<"u"?Blob:null,vk={isBrowser:!0,classes:{URLSearchParams:gk,FormData:mk,Blob:yk},protocols:["http","https","file","blob","url","data"]},$v=typeof window<"u"&&typeof document<"u",dy=typeof navigator=="object"&&navigator||void 0,wk=$v&&(!dy||["ReactNative","NativeScript","NS"].indexOf(dy.product)<0),Ak=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",bk=$v&&window.location.href||"http://localhost",Sk=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:$v,hasStandardBrowserEnv:wk,hasStandardBrowserWebWorkerEnv:Ak,navigator:dy,origin:bk},Symbol.toStringTag,{value:"Module"})),dn={...Sk,...vk};function Ek(a,e){return Up(a,new dn.classes.URLSearchParams,{visitor:function(t,n,r,o){return dn.isNode&&W.isBuffer(t)?(this.append(n,t.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)},...e})}function _k(a){return W.matchAll(/\w+|\[(\w*)]/g,a).map(e=>e[0]==="[]"?"":e[1]||e[0])}function xk(a){const e={},t=Object.keys(a);let n;const r=t.length;let o;for(n=0;n<r;n++)o=t[n],e[o]=a[o];return e}function FS(a){function e(t,n,r,o){let l=t[o++];if(l==="__proto__")return!0;const h=Number.isFinite(+l),d=o>=t.length;return l=!l&&W.isArray(r)?r.length:l,d?(W.hasOwnProp(r,l)?r[l]=[r[l],n]:r[l]=n,!h):((!r[l]||!W.isObject(r[l]))&&(r[l]=[]),e(t,n,r[l],o)&&W.isArray(r[l])&&(r[l]=xk(r[l])),!h)}if(W.isFormData(a)&&W.isFunction(a.entries)){const t={};return W.forEachEntry(a,(n,r)=>{e(_k(n),r,t,0)}),t}return null}function Ck(a,e,t){if(W.isString(a))try{return(e||JSON.parse)(a),W.trim(a)}catch(n){if(n.name!=="SyntaxError")throw n}return(t||JSON.stringify)(a)}const cd={transitional:IS,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,o=W.isObject(e);if(o&&W.isHTMLForm(e)&&(e=new FormData(e)),W.isFormData(e))return r?JSON.stringify(FS(e)):e;if(W.isArrayBuffer(e)||W.isBuffer(e)||W.isStream(e)||W.isFile(e)||W.isBlob(e)||W.isReadableStream(e))return e;if(W.isArrayBufferView(e))return e.buffer;if(W.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let h;if(o){if(n.indexOf("application/x-www-form-urlencoded")>-1)return Ek(e,this.formSerializer).toString();if((h=W.isFileList(e))||n.indexOf("multipart/form-data")>-1){const d=this.env&&this.env.FormData;return Up(h?{"files[]":e}:e,d&&new d,this.formSerializer)}}return o||r?(t.setContentType("application/json",!1),Ck(e)):e}],transformResponse:[function(e){const t=this.transitional||cd.transitional,n=t&&t.forcedJSONParsing,r=this.responseType==="json";if(W.isResponse(e)||W.isReadableStream(e))return e;if(e&&W.isString(e)&&(n&&!this.responseType||r)){const l=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e,this.parseReviver)}catch(h){if(l)throw h.name==="SyntaxError"?Ie.from(h,Ie.ERR_BAD_RESPONSE,this,null,this.response):h}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:dn.classes.FormData,Blob:dn.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};W.forEach(["delete","get","head","post","put","patch"],a=>{cd.headers[a]={}});const Tk=W.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),kk=a=>{const e={};let t,n,r;return a&&a.split(`
`).forEach(function(l){r=l.indexOf(":"),t=l.substring(0,r).trim().toLowerCase(),n=l.substring(r+1).trim(),!(!t||e[t]&&Tk[t])&&(t==="set-cookie"?e[t]?e[t].push(n):e[t]=[n]:e[t]=e[t]?e[t]+", "+n:n)}),e},mb=Symbol("internals");function yu(a){return a&&String(a).trim().toLowerCase()}function Df(a){return a===!1||a==null?a:W.isArray(a)?a.map(Df):String(a)}function Rk(a){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=t.exec(a);)e[n[1]]=n[2];return e}const Pk=a=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(a.trim());function Qm(a,e,t,n,r){if(W.isFunction(n))return n.call(this,e,t);if(r&&(e=t),!!W.isString(e)){if(W.isString(n))return e.indexOf(n)!==-1;if(W.isRegExp(n))return n.test(e)}}function Lk(a){return a.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,n)=>t.toUpperCase()+n)}function Mk(a,e){const t=W.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(a,n+t,{value:function(r,o,l){return this[n].call(this,e,r,o,l)},configurable:!0})})}let jn=class{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function o(h,d,p){const g=yu(d);if(!g)throw new Error("header name must be a non-empty string");const y=W.findKey(r,g);(!y||r[y]===void 0||p===!0||p===void 0&&r[y]!==!1)&&(r[y||d]=Df(h))}const l=(h,d)=>W.forEach(h,(p,g)=>o(p,g,d));if(W.isPlainObject(e)||e instanceof this.constructor)l(e,t);else if(W.isString(e)&&(e=e.trim())&&!Pk(e))l(kk(e),t);else if(W.isObject(e)&&W.isIterable(e)){let h={},d,p;for(const g of e){if(!W.isArray(g))throw TypeError("Object iterator must return a key-value pair");h[p=g[0]]=(d=h[p])?W.isArray(d)?[...d,g[1]]:[d,g[1]]:g[1]}l(h,t)}else e!=null&&o(t,e,n);return this}get(e,t){if(e=yu(e),e){const n=W.findKey(this,e);if(n){const r=this[n];if(!t)return r;if(t===!0)return Rk(r);if(W.isFunction(t))return t.call(this,r,n);if(W.isRegExp(t))return t.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=yu(e),e){const n=W.findKey(this,e);return!!(n&&this[n]!==void 0&&(!t||Qm(this,this[n],n,t)))}return!1}delete(e,t){const n=this;let r=!1;function o(l){if(l=yu(l),l){const h=W.findKey(n,l);h&&(!t||Qm(n,n[h],h,t))&&(delete n[h],r=!0)}}return W.isArray(e)?e.forEach(o):o(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const o=t[n];(!e||Qm(this,this[o],o,e,!0))&&(delete this[o],r=!0)}return r}normalize(e){const t=this,n={};return W.forEach(this,(r,o)=>{const l=W.findKey(n,o);if(l){t[l]=Df(r),delete t[o];return}const h=e?Lk(o):String(o).trim();h!==o&&delete t[o],t[h]=Df(r),n[h]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return W.forEach(this,(n,r)=>{n!=null&&n!==!1&&(t[r]=e&&W.isArray(n)?n.join(", "):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);return t.forEach(r=>n.set(r)),n}static accessor(e){const n=(this[mb]=this[mb]={accessors:{}}).accessors,r=this.prototype;function o(l){const h=yu(l);n[h]||(Mk(r,l),n[h]=!0)}return W.isArray(e)?e.forEach(o):o(e),this}};jn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);W.reduceDescriptors(jn.prototype,({value:a},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>a,set(n){this[t]=n}}});W.freezeMethods(jn);function Jm(a,e){const t=this||cd,n=e||t,r=jn.from(n.headers);let o=n.data;return W.forEach(a,function(h){o=h.call(t,o,r.normalize(),e?e.status:void 0)}),r.normalize(),o}function DS(a){return!!(a&&a.__CANCEL__)}function Pc(a,e,t){Ie.call(this,a??"canceled",Ie.ERR_CANCELED,e,t),this.name="CanceledError"}W.inherits(Pc,Ie,{__CANCEL__:!0});function OS(a,e,t){const n=t.config.validateStatus;!t.status||!n||n(t.status)?a(t):e(new Ie("Request failed with status code "+t.status,[Ie.ERR_BAD_REQUEST,Ie.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function Ik(a){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(a);return e&&e[1]||""}function Fk(a,e){a=a||10;const t=new Array(a),n=new Array(a);let r=0,o=0,l;return e=e!==void 0?e:1e3,function(d){const p=Date.now(),g=n[o];l||(l=p),t[r]=d,n[r]=p;let y=o,v=0;for(;y!==r;)v+=t[y++],y=y%a;if(r=(r+1)%a,r===o&&(o=(o+1)%a),p-l<e)return;const b=g&&p-g;return b?Math.round(v*1e3/b):void 0}}function Dk(a,e){let t=0,n=1e3/e,r,o;const l=(p,g=Date.now())=>{t=g,r=null,o&&(clearTimeout(o),o=null),a(...p)};return[(...p)=>{const g=Date.now(),y=g-t;y>=n?l(p,g):(r=p,o||(o=setTimeout(()=>{o=null,l(r)},n-y)))},()=>r&&l(r)]}const gp=(a,e,t=3)=>{let n=0;const r=Fk(50,250);return Dk(o=>{const l=o.loaded,h=o.lengthComputable?o.total:void 0,d=l-n,p=r(d),g=l<=h;n=l;const y={loaded:l,total:h,progress:h?l/h:void 0,bytes:d,rate:p||void 0,estimated:p&&h&&g?(h-l)/p:void 0,event:o,lengthComputable:h!=null,[e?"download":"upload"]:!0};a(y)},t)},yb=(a,e)=>{const t=a!=null;return[n=>e[0]({lengthComputable:t,total:a,loaded:n}),e[1]]},vb=a=>(...e)=>W.asap(()=>a(...e)),Ok=dn.hasStandardBrowserEnv?((a,e)=>t=>(t=new URL(t,dn.origin),a.protocol===t.protocol&&a.host===t.host&&(e||a.port===t.port)))(new URL(dn.origin),dn.navigator&&/(msie|trident)/i.test(dn.navigator.userAgent)):()=>!0,Nk=dn.hasStandardBrowserEnv?{write(a,e,t,n,r,o,l){if(typeof document>"u")return;const h=[`${a}=${encodeURIComponent(e)}`];W.isNumber(t)&&h.push(`expires=${new Date(t).toUTCString()}`),W.isString(n)&&h.push(`path=${n}`),W.isString(r)&&h.push(`domain=${r}`),o===!0&&h.push("secure"),W.isString(l)&&h.push(`SameSite=${l}`),document.cookie=h.join("; ")},read(a){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(?:^|; )"+a+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(a){this.write(a,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function jk(a){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(a)}function Bk(a,e){return e?a.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):a}function NS(a,e,t){let n=!jk(e);return a&&(n||t==!1)?Bk(a,e):e}const wb=a=>a instanceof jn?{...a}:a;function Ia(a,e){e=e||{};const t={};function n(p,g,y,v){return W.isPlainObject(p)&&W.isPlainObject(g)?W.merge.call({caseless:v},p,g):W.isPlainObject(g)?W.merge({},g):W.isArray(g)?g.slice():g}function r(p,g,y,v){if(W.isUndefined(g)){if(!W.isUndefined(p))return n(void 0,p,y,v)}else return n(p,g,y,v)}function o(p,g){if(!W.isUndefined(g))return n(void 0,g)}function l(p,g){if(W.isUndefined(g)){if(!W.isUndefined(p))return n(void 0,p)}else return n(void 0,g)}function h(p,g,y){if(y in e)return n(p,g);if(y in a)return n(void 0,p)}const d={url:o,method:o,data:o,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:h,headers:(p,g,y)=>r(wb(p),wb(g),y,!0)};return W.forEach(Object.keys({...a,...e}),function(g){const y=d[g]||r,v=y(a[g],e[g],g);W.isUndefined(v)&&y!==h||(t[g]=v)}),t}const jS=a=>{const e=Ia({},a);let{data:t,withXSRFToken:n,xsrfHeaderName:r,xsrfCookieName:o,headers:l,auth:h}=e;if(e.headers=l=jn.from(l),e.url=MS(NS(e.baseURL,e.url,e.allowAbsoluteUrls),a.params,a.paramsSerializer),h&&l.set("Authorization","Basic "+btoa((h.username||"")+":"+(h.password?unescape(encodeURIComponent(h.password)):""))),W.isFormData(t)){if(dn.hasStandardBrowserEnv||dn.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if(W.isFunction(t.getHeaders)){const d=t.getHeaders(),p=["content-type","content-length"];Object.entries(d).forEach(([g,y])=>{p.includes(g.toLowerCase())&&l.set(g,y)})}}if(dn.hasStandardBrowserEnv&&(n&&W.isFunction(n)&&(n=n(e)),n||n!==!1&&Ok(e.url))){const d=r&&o&&Nk.read(o);d&&l.set(r,d)}return e},zk=typeof XMLHttpRequest<"u",Hk=zk&&function(a){return new Promise(function(t,n){const r=jS(a);let o=r.data;const l=jn.from(r.headers).normalize();let{responseType:h,onUploadProgress:d,onDownloadProgress:p}=r,g,y,v,b,A;function E(){b&&b(),A&&A(),r.cancelToken&&r.cancelToken.unsubscribe(g),r.signal&&r.signal.removeEventListener("abort",g)}let C=new XMLHttpRequest;C.open(r.method.toUpperCase(),r.url,!0),C.timeout=r.timeout;function k(){if(!C)return;const M=jn.from("getAllResponseHeaders"in C&&C.getAllResponseHeaders()),z={data:!h||h==="text"||h==="json"?C.responseText:C.response,status:C.status,statusText:C.statusText,headers:M,config:a,request:C};OS(function(N){t(N),E()},function(N){n(N),E()},z),C=null}"onloadend"in C?C.onloadend=k:C.onreadystatechange=function(){!C||C.readyState!==4||C.status===0&&!(C.responseURL&&C.responseURL.indexOf("file:")===0)||setTimeout(k)},C.onabort=function(){C&&(n(new Ie("Request aborted",Ie.ECONNABORTED,a,C)),C=null)},C.onerror=function(F){const z=F&&F.message?F.message:"Network Error",U=new Ie(z,Ie.ERR_NETWORK,a,C);U.event=F||null,n(U),C=null},C.ontimeout=function(){let F=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const z=r.transitional||IS;r.timeoutErrorMessage&&(F=r.timeoutErrorMessage),n(new Ie(F,z.clarifyTimeoutError?Ie.ETIMEDOUT:Ie.ECONNABORTED,a,C)),C=null},o===void 0&&l.setContentType(null),"setRequestHeader"in C&&W.forEach(l.toJSON(),function(F,z){C.setRequestHeader(z,F)}),W.isUndefined(r.withCredentials)||(C.withCredentials=!!r.withCredentials),h&&h!=="json"&&(C.responseType=r.responseType),p&&([v,A]=gp(p,!0),C.addEventListener("progress",v)),d&&C.upload&&([y,b]=gp(d),C.upload.addEventListener("progress",y),C.upload.addEventListener("loadend",b)),(r.cancelToken||r.signal)&&(g=M=>{C&&(n(!M||M.type?new Pc(null,a,C):M),C.abort(),C=null)},r.cancelToken&&r.cancelToken.subscribe(g),r.signal&&(r.signal.aborted?g():r.signal.addEventListener("abort",g)));const L=Ik(r.url);if(L&&dn.protocols.indexOf(L)===-1){n(new Ie("Unsupported protocol "+L+":",Ie.ERR_BAD_REQUEST,a));return}C.send(o||null)})},Uk=(a,e)=>{const{length:t}=a=a?a.filter(Boolean):[];if(e||t){let n=new AbortController,r;const o=function(p){if(!r){r=!0,h();const g=p instanceof Error?p:this.reason;n.abort(g instanceof Ie?g:new Pc(g instanceof Error?g.message:g))}};let l=e&&setTimeout(()=>{l=null,o(new Ie(`timeout ${e} of ms exceeded`,Ie.ETIMEDOUT))},e);const h=()=>{a&&(l&&clearTimeout(l),l=null,a.forEach(p=>{p.unsubscribe?p.unsubscribe(o):p.removeEventListener("abort",o)}),a=null)};a.forEach(p=>p.addEventListener("abort",o));const{signal:d}=n;return d.unsubscribe=()=>W.asap(h),d}},$k=function*(a,e){let t=a.byteLength;if(t<e){yield a;return}let n=0,r;for(;n<t;)r=n+e,yield a.slice(n,r),n=r},Wk=async function*(a,e){for await(const t of Vk(a))yield*$k(t,e)},Vk=async function*(a){if(a[Symbol.asyncIterator]){yield*a;return}const e=a.getReader();try{for(;;){const{done:t,value:n}=await e.read();if(t)break;yield n}}finally{await e.cancel()}},Ab=(a,e,t,n)=>{const r=Wk(a,e);let o=0,l,h=d=>{l||(l=!0,n&&n(d))};return new ReadableStream({async pull(d){try{const{done:p,value:g}=await r.next();if(p){h(),d.close();return}let y=g.byteLength;if(t){let v=o+=y;t(v)}d.enqueue(new Uint8Array(g))}catch(p){throw h(p),p}},cancel(d){return h(d),r.return()}},{highWaterMark:2})},bb=64*1024,{isFunction:Tf}=W,Gk=(({Request:a,Response:e})=>({Request:a,Response:e}))(W.global),{ReadableStream:Sb,TextEncoder:Eb}=W.global,_b=(a,...e)=>{try{return!!a(...e)}catch{return!1}},qk=a=>{a=W.merge.call({skipUndefined:!0},Gk,a);const{fetch:e,Request:t,Response:n}=a,r=e?Tf(e):typeof fetch=="function",o=Tf(t),l=Tf(n);if(!r)return!1;const h=r&&Tf(Sb),d=r&&(typeof Eb=="function"?(A=>E=>A.encode(E))(new Eb):async A=>new Uint8Array(await new t(A).arrayBuffer())),p=o&&h&&_b(()=>{let A=!1;const E=new t(dn.origin,{body:new Sb,method:"POST",get duplex(){return A=!0,"half"}}).headers.has("Content-Type");return A&&!E}),g=l&&h&&_b(()=>W.isReadableStream(new n("").body)),y={stream:g&&(A=>A.body)};r&&["text","arrayBuffer","blob","formData","stream"].forEach(A=>{!y[A]&&(y[A]=(E,C)=>{let k=E&&E[A];if(k)return k.call(E);throw new Ie(`Response type '${A}' is not supported`,Ie.ERR_NOT_SUPPORT,C)})});const v=async A=>{if(A==null)return 0;if(W.isBlob(A))return A.size;if(W.isSpecCompliantForm(A))return(await new t(dn.origin,{method:"POST",body:A}).arrayBuffer()).byteLength;if(W.isArrayBufferView(A)||W.isArrayBuffer(A))return A.byteLength;if(W.isURLSearchParams(A)&&(A=A+""),W.isString(A))return(await d(A)).byteLength},b=async(A,E)=>{const C=W.toFiniteNumber(A.getContentLength());return C??v(E)};return async A=>{let{url:E,method:C,data:k,signal:L,cancelToken:M,timeout:F,onDownloadProgress:z,onUploadProgress:U,responseType:N,headers:q,withCredentials:J="same-origin",fetchOptions:se}=jS(A),ne=e||fetch;N=N?(N+"").toLowerCase():"text";let be=Uk([L,M&&M.toAbortSignal()],F),de=null;const ce=be&&be.unsubscribe&&(()=>{be.unsubscribe()});let me;try{if(U&&p&&C!=="get"&&C!=="head"&&(me=await b(q,k))!==0){let D=new t(E,{method:"POST",body:k,duplex:"half"}),G;if(W.isFormData(k)&&(G=D.headers.get("content-type"))&&q.setContentType(G),D.body){const[oe,we]=yb(me,gp(vb(U)));k=Ab(D.body,bb,oe,we)}}W.isString(J)||(J=J?"include":"omit");const le=o&&"credentials"in t.prototype,Z={...se,signal:be,method:C.toUpperCase(),headers:q.normalize().toJSON(),body:k,duplex:"half",credentials:le?J:void 0};de=o&&new t(E,Z);let V=await(o?ne(de,se):ne(E,Z));const ae=g&&(N==="stream"||N==="response");if(g&&(z||ae&&ce)){const D={};["status","statusText","headers"].forEach(Te=>{D[Te]=V[Te]});const G=W.toFiniteNumber(V.headers.get("content-length")),[oe,we]=z&&yb(G,gp(vb(z),!0))||[];V=new n(Ab(V.body,bb,oe,()=>{we&&we(),ce&&ce()}),D)}N=N||"text";let te=await y[W.findKey(y,N)||"text"](V,A);return!ae&&ce&&ce(),await new Promise((D,G)=>{OS(D,G,{data:te,headers:jn.from(V.headers),status:V.status,statusText:V.statusText,config:A,request:de})})}catch(le){throw ce&&ce(),le&&le.name==="TypeError"&&/Load failed|fetch/i.test(le.message)?Object.assign(new Ie("Network Error",Ie.ERR_NETWORK,A,de),{cause:le.cause||le}):Ie.from(le,le&&le.code,A,de)}}},Xk=new Map,BS=a=>{let e=a&&a.env||{};const{fetch:t,Request:n,Response:r}=e,o=[n,r,t];let l=o.length,h=l,d,p,g=Xk;for(;h--;)d=o[h],p=g.get(d),p===void 0&&g.set(d,p=h?new Map:qk(e)),g=p;return p};BS();const Wv={http:hk,xhr:Hk,fetch:{get:BS}};W.forEach(Wv,(a,e)=>{if(a){try{Object.defineProperty(a,"name",{value:e})}catch{}Object.defineProperty(a,"adapterName",{value:e})}});const xb=a=>`- ${a}`,Kk=a=>W.isFunction(a)||a===null||a===!1;function Yk(a,e){a=W.isArray(a)?a:[a];const{length:t}=a;let n,r;const o={};for(let l=0;l<t;l++){n=a[l];let h;if(r=n,!Kk(n)&&(r=Wv[(h=String(n)).toLowerCase()],r===void 0))throw new Ie(`Unknown adapter '${h}'`);if(r&&(W.isFunction(r)||(r=r.get(e))))break;o[h||"#"+l]=r}if(!r){const l=Object.entries(o).map(([d,p])=>`adapter ${d} `+(p===!1?"is not supported by the environment":"is not available in the build"));let h=t?l.length>1?`since :
`+l.map(xb).join(`
`):" "+xb(l[0]):"as no adapter specified";throw new Ie("There is no suitable adapter to dispatch the request "+h,"ERR_NOT_SUPPORT")}return r}const zS={getAdapter:Yk,adapters:Wv};function Zm(a){if(a.cancelToken&&a.cancelToken.throwIfRequested(),a.signal&&a.signal.aborted)throw new Pc(null,a)}function Cb(a){return Zm(a),a.headers=jn.from(a.headers),a.data=Jm.call(a,a.transformRequest),["post","put","patch"].indexOf(a.method)!==-1&&a.headers.setContentType("application/x-www-form-urlencoded",!1),zS.getAdapter(a.adapter||cd.adapter,a)(a).then(function(n){return Zm(a),n.data=Jm.call(a,a.transformResponse,n),n.headers=jn.from(n.headers),n},function(n){return DS(n)||(Zm(a),n&&n.response&&(n.response.data=Jm.call(a,a.transformResponse,n.response),n.response.headers=jn.from(n.response.headers))),Promise.reject(n)})}const HS="1.13.2",$p={};["object","boolean","number","function","string","symbol"].forEach((a,e)=>{$p[a]=function(n){return typeof n===a||"a"+(e<1?"n ":" ")+a}});const Tb={};$p.transitional=function(e,t,n){function r(o,l){return"[Axios v"+HS+"] Transitional option '"+o+"'"+l+(n?". "+n:"")}return(o,l,h)=>{if(e===!1)throw new Ie(r(l," has been removed"+(t?" in "+t:"")),Ie.ERR_DEPRECATED);return t&&!Tb[l]&&(Tb[l]=!0,console.warn(r(l," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(o,l,h):!0}};$p.spelling=function(e){return(t,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};function Qk(a,e,t){if(typeof a!="object")throw new Ie("options must be an object",Ie.ERR_BAD_OPTION_VALUE);const n=Object.keys(a);let r=n.length;for(;r-- >0;){const o=n[r],l=e[o];if(l){const h=a[o],d=h===void 0||l(h,o,a);if(d!==!0)throw new Ie("option "+o+" must be "+d,Ie.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new Ie("Unknown option "+o,Ie.ERR_BAD_OPTION)}}const Of={assertOptions:Qk,validators:$p},Ki=Of.validators;let Ma=class{constructor(e){this.defaults=e||{},this.interceptors={request:new gb,response:new gb}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let r={};Error.captureStackTrace?Error.captureStackTrace(r):r=new Error;const o=r.stack?r.stack.replace(/^.+\n/,""):"";try{n.stack?o&&!String(n.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+o):n.stack=o}catch{}}throw n}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=Ia(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:o}=t;n!==void 0&&Of.assertOptions(n,{silentJSONParsing:Ki.transitional(Ki.boolean),forcedJSONParsing:Ki.transitional(Ki.boolean),clarifyTimeoutError:Ki.transitional(Ki.boolean)},!1),r!=null&&(W.isFunction(r)?t.paramsSerializer={serialize:r}:Of.assertOptions(r,{encode:Ki.function,serialize:Ki.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Of.assertOptions(t,{baseUrl:Ki.spelling("baseURL"),withXsrfToken:Ki.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let l=o&&W.merge(o.common,o[t.method]);o&&W.forEach(["delete","get","head","post","put","patch","common"],A=>{delete o[A]}),t.headers=jn.concat(l,o);const h=[];let d=!0;this.interceptors.request.forEach(function(E){typeof E.runWhen=="function"&&E.runWhen(t)===!1||(d=d&&E.synchronous,h.unshift(E.fulfilled,E.rejected))});const p=[];this.interceptors.response.forEach(function(E){p.push(E.fulfilled,E.rejected)});let g,y=0,v;if(!d){const A=[Cb.bind(this),void 0];for(A.unshift(...h),A.push(...p),v=A.length,g=Promise.resolve(t);y<v;)g=g.then(A[y++],A[y++]);return g}v=h.length;let b=t;for(;y<v;){const A=h[y++],E=h[y++];try{b=A(b)}catch(C){E.call(this,C);break}}try{g=Cb.call(this,b)}catch(A){return Promise.reject(A)}for(y=0,v=p.length;y<v;)g=g.then(p[y++],p[y++]);return g}getUri(e){e=Ia(this.defaults,e);const t=NS(e.baseURL,e.url,e.allowAbsoluteUrls);return MS(t,e.params,e.paramsSerializer)}};W.forEach(["delete","get","head","options"],function(e){Ma.prototype[e]=function(t,n){return this.request(Ia(n||{},{method:e,url:t,data:(n||{}).data}))}});W.forEach(["post","put","patch"],function(e){function t(n){return function(o,l,h){return this.request(Ia(h||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:o,data:l}))}}Ma.prototype[e]=t(),Ma.prototype[e+"Form"]=t(!0)});let Jk=class US{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(o){t=o});const n=this;this.promise.then(r=>{if(!n._listeners)return;let o=n._listeners.length;for(;o-- >0;)n._listeners[o](r);n._listeners=null}),this.promise.then=r=>{let o;const l=new Promise(h=>{n.subscribe(h),o=h}).then(r);return l.cancel=function(){n.unsubscribe(o)},l},e(function(o,l,h){n.reason||(n.reason=new Pc(o,l,h),t(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=n=>{e.abort(n)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new US(function(r){e=r}),cancel:e}}};function Zk(a){return function(t){return a.apply(null,t)}}function eR(a){return W.isObject(a)&&a.isAxiosError===!0}const fy={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(fy).forEach(([a,e])=>{fy[e]=a});function $S(a){const e=new Ma(a),t=AS(Ma.prototype.request,e);return W.extend(t,Ma.prototype,e,{allOwnKeys:!0}),W.extend(t,e,null,{allOwnKeys:!0}),t.create=function(r){return $S(Ia(a,r))},t}const Et=$S(cd);Et.Axios=Ma;Et.CanceledError=Pc;Et.CancelToken=Jk;Et.isCancel=DS;Et.VERSION=HS;Et.toFormData=Up;Et.AxiosError=Ie;Et.Cancel=Et.CanceledError;Et.all=function(e){return Promise.all(e)};Et.spread=Zk;Et.isAxiosError=eR;Et.mergeConfig=Ia;Et.AxiosHeaders=jn;Et.formToJSON=a=>FS(W.isHTMLForm(a)?new FormData(a):a);Et.getAdapter=zS.getAdapter;Et.HttpStatusCode=fy;Et.default=Et;const{Axios:tI,AxiosError:nI,CanceledError:iI,isCancel:sI,CancelToken:rI,VERSION:oI,all:aI,Cancel:lI,isAxiosError:cI,spread:uI,toFormData:hI,AxiosHeaders:dI,HttpStatusCode:fI,formToJSON:pI,getAdapter:gI,mergeConfig:mI}=Et,tR="http://localhost:5263",gs=Et.create({baseURL:tR,headers:{"Content-Type":"application/json"}});gs.interceptors.request.use(a=>{const e=localStorage.getItem("authToken");return e&&(a.headers.Authorization=`Bearer ${e}`),a});gs.interceptors.response.use(a=>a,a=>{var e;return((e=a.response)==null?void 0:e.status)===401&&(localStorage.removeItem("authToken"),localStorage.removeItem("user"),window.location.href="/login"),Promise.reject(a)});async function nR(a){return(await gs.post("/auth/register",a)).data}async function iR(a){return(await gs.post("/auth/login",a)).data}function WS(){localStorage.removeItem("authToken"),localStorage.removeItem("user"),window.location.href="/login"}function sR(){return!!localStorage.getItem("authToken")}function VS(){const a=localStorage.getItem("user");return a?JSON.parse(a):null}function rR(){const[a,e]=j.useState(""),[t,n]=j.useState(""),[r,o]=j.useState(!1),[l,h]=j.useState(null),[d,p]=j.useState(null),g=rd(),y=async v=>{var b,A;v.preventDefault(),h(null),p(null),o(!0);try{console.log("Attempting login with:",{email:a});const E=await iR({email:a,password:t});console.log("Login response:",E),localStorage.setItem("authToken",E.token),localStorage.setItem("user",JSON.stringify(E)),console.log("Token stored, redirecting to templates"),p("Login successful! Redirecting..."),setTimeout(()=>{g("/templates")},1e3)}catch(E){console.error("Login error:",E),console.error("Error response:",E.response);const C=((A=(b=E.response)==null?void 0:b.data)==null?void 0:A.error)||E.message||"Login failed. Please check your credentials.";console.error("Showing error:",C),h(C)}finally{o(!1)}};return P.jsxs("div",{style:{maxWidth:"400px",margin:"4rem auto",padding:"2rem"},children:[P.jsx("h1",{children:"Login"}),P.jsxs("form",{onSubmit:y,style:{marginTop:"2rem"},children:[d&&P.jsx("div",{style:{padding:"1rem",marginBottom:"1rem",backgroundColor:"#d4edda",border:"1px solid #c3e6cb",borderRadius:"4px",color:"#155724"},children:d}),l&&P.jsx("div",{style:{padding:"1rem",marginBottom:"1rem",backgroundColor:"#fee",border:"1px solid #fcc",borderRadius:"4px",color:"#c00"},children:l}),P.jsx("div",{style:{marginBottom:"1rem"},children:P.jsxs("label",{style:{display:"block",marginBottom:"0.5rem"},children:["Email:",P.jsx("input",{type:"email",value:a,onChange:v=>e(v.target.value),required:!0,disabled:r,style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem",fontSize:"1rem"}})]})}),P.jsx("div",{style:{marginBottom:"1.5rem"},children:P.jsxs("label",{style:{display:"block",marginBottom:"0.5rem"},children:["Password:",P.jsx("input",{type:"password",value:t,onChange:v=>n(v.target.value),required:!0,disabled:r,style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem",fontSize:"1rem"}})]})}),P.jsx("button",{type:"submit",disabled:r,style:{width:"100%",padding:"0.75rem",fontSize:"1rem",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"4px",cursor:r?"not-allowed":"pointer"},children:r?"Logging in...":"Login"})]}),P.jsxs("p",{style:{marginTop:"1.5rem",textAlign:"center"},children:["Don't have an account? ",P.jsx(pp,{to:"/register",children:"Register here"})]})]})}function oR(){const[a,e]=j.useState(""),[t,n]=j.useState(""),[r,o]=j.useState(""),[l,h]=j.useState(!1),[d,p]=j.useState(null),[g,y]=j.useState(null),v=rd(),b=async A=>{var E,C;A.preventDefault(),p(null),y(null),h(!0);try{console.log("Attempting registration with:",{email:a,fullName:r});const k=await nR({email:a,password:t,fullName:r});console.log("Registration response:",k),localStorage.setItem("authToken",k.token),localStorage.setItem("user",JSON.stringify(k)),console.log("Token stored, redirecting to templates"),y("Registration successful! Redirecting..."),setTimeout(()=>{v("/templates")},1e3)}catch(k){console.error("Registration error:",k),console.error("Error response:",k.response);const L=((C=(E=k.response)==null?void 0:E.data)==null?void 0:C.error)||k.message||"Registration failed. Please try again.";console.error("Showing error:",L),p(L)}finally{h(!1)}};return P.jsxs("div",{style:{maxWidth:"400px",margin:"4rem auto",padding:"2rem"},children:[P.jsx("h1",{children:"Register"}),P.jsxs("form",{onSubmit:b,style:{marginTop:"2rem"},children:[g&&P.jsx("div",{style:{padding:"1rem",marginBottom:"1rem",backgroundColor:"#d4edda",border:"1px solid #c3e6cb",borderRadius:"4px",color:"#155724"},children:g}),d&&P.jsx("div",{style:{padding:"1rem",marginBottom:"1rem",backgroundColor:"#fee",border:"1px solid #fcc",borderRadius:"4px",color:"#c00"},children:d}),P.jsx("div",{style:{marginBottom:"1rem"},children:P.jsxs("label",{style:{display:"block",marginBottom:"0.5rem"},children:["Full Name:",P.jsx("input",{type:"text",value:r,onChange:A=>o(A.target.value),required:!0,disabled:l,style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem",fontSize:"1rem"}})]})}),P.jsx("div",{style:{marginBottom:"1rem"},children:P.jsxs("label",{style:{display:"block",marginBottom:"0.5rem"},children:["Email:",P.jsx("input",{type:"email",value:a,onChange:A=>e(A.target.value),required:!0,disabled:l,style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem",fontSize:"1rem"}})]})}),P.jsx("div",{style:{marginBottom:"1.5rem"},children:P.jsxs("label",{style:{display:"block",marginBottom:"0.5rem"},children:["Password (min 6 characters):",P.jsx("input",{type:"password",value:t,onChange:A=>n(A.target.value),required:!0,minLength:6,disabled:l,style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem",fontSize:"1rem"}})]})}),P.jsx("button",{type:"submit",disabled:l,style:{width:"100%",padding:"0.75rem",fontSize:"1rem",backgroundColor:"#28a745",color:"white",border:"none",borderRadius:"4px",cursor:l?"not-allowed":"pointer"},children:l?"Creating account...":"Register"})]}),P.jsxs("p",{style:{marginTop:"1.5rem",textAlign:"center"},children:["Already have an account? ",P.jsx(pp,{to:"/login",children:"Login here"})]})]})}async function GS(){return(await gs.get("/api/templates")).data}async function aR(a,e,t){const n=new FormData;return n.append("file",a),n.append("title",e),n.append("collegeName",t),(await gs.post("/api/templates",n,{headers:{"Content-Type":"multipart/form-data"}})).data}function lR(a){return`http://localhost:5263/api/templates/${a}/file`}function cR({onUploaded:a}){const[e,t]=j.useState(null),[n,r]=j.useState(""),[o,l]=j.useState(""),[h,d]=j.useState(!1),[p,g]=j.useState(null),y=async v=>{if(v.preventDefault(),!e||!n){g("File and title are required");return}d(!0),g(null);try{await aR(e,n,o),t(null),r(""),l(""),a()}catch(b){g(b instanceof Error?b.message:"Upload failed")}finally{d(!1)}};return P.jsxs("form",{onSubmit:y,style:{marginBottom:"2rem",padding:"1rem",border:"1px solid #ccc"},children:[P.jsx("h3",{children:"Upload Template"}),p&&P.jsx("p",{style:{color:"red"},children:p}),P.jsx("div",{style:{marginBottom:"1rem"},children:P.jsxs("label",{children:["Title: ",P.jsx("input",{type:"text",value:n,onChange:v=>r(v.target.value),placeholder:"e.g., Lab Report",disabled:h})]})}),P.jsx("div",{style:{marginBottom:"1rem"},children:P.jsxs("label",{children:["College Name: ",P.jsx("input",{type:"text",value:o,onChange:v=>l(v.target.value),placeholder:"e.g., Engineering",disabled:h})]})}),P.jsx("div",{style:{marginBottom:"1rem"},children:P.jsxs("label",{children:["PDF File: ",P.jsx("input",{type:"file",accept:".pdf,application/pdf",onChange:v=>{var b;return t(((b=v.target.files)==null?void 0:b[0])||null)},disabled:h})]})}),P.jsx("button",{type:"submit",disabled:h,children:h?"Uploading...":"Upload Template"})]})}function uR(){const[a,e]=j.useState([]),[t,n]=j.useState(!0),[r,o]=j.useState(null),l=rd(),h=VS(),d=async()=>{n(!0),o(null);try{const g=await GS();e(g)}catch(g){o(g instanceof Error?g.message:"Failed to fetch templates")}finally{n(!1)}};j.useEffect(()=>{d()},[]);const p=()=>{WS()};return P.jsxs("div",{style:{padding:"2rem",maxWidth:"1200px",margin:"0 auto"},children:[P.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[P.jsxs("div",{children:[P.jsx("h1",{children:"PDF Templates"}),h&&P.jsxs("p",{style:{color:"#666"},children:["Welcome, ",h.fullName,"!"]})]}),P.jsx("button",{onClick:p,style:{padding:"0.5rem 1rem",backgroundColor:"#dc3545",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Logout"})]}),P.jsx(cR,{onUploaded:d}),t&&P.jsx("p",{children:"Loading templates..."}),r&&P.jsxs("p",{style:{color:"red"},children:["Error: ",r]}),!t&&a.length===0&&P.jsx("p",{children:"No templates found. Upload one to get started."}),!t&&a.length>0&&P.jsxs("div",{children:[P.jsx("h2",{children:"Available Templates"}),P.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"1.5rem"},children:a.map(g=>P.jsxs("div",{style:{padding:"1.5rem",border:"1px solid #ddd",borderRadius:"8px",backgroundColor:"#f9f9f9",cursor:"pointer",transition:"transform 0.2s, box-shadow 0.2s"},onMouseEnter:y=>{y.currentTarget.style.transform="translateY(-4px)",y.currentTarget.style.boxShadow="0 4px 12px rgba(0,0,0,0.1)"},onMouseLeave:y=>{y.currentTarget.style.transform="translateY(0)",y.currentTarget.style.boxShadow="none"},onClick:()=>l(`/editor/${g.id}`),children:[P.jsx("h3",{style:{marginTop:0,color:"#007bff"},children:g.title}),g.collegeName&&P.jsxs("p",{style:{color:"#666"},children:[" ",g.collegeName]}),P.jsxs("p",{style:{fontSize:"0.9em",color:"#999"},children:["Created: ",new Date(g.createdAtUtc).toLocaleDateString()]}),P.jsx("button",{style:{width:"100%",padding:"0.5rem",marginTop:"0.5rem",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Fill Form "})]},g.id))})]})]})}async function kb(a){return(await gs.post("/api/drafts",a)).data}async function hR(a){return(await gs.get(`/api/drafts?templateId=${a}`)).data}async function dR(a){return(await gs.get(`/api/drafts/${a}`)).data}async function fR(a){return(await gs.post(`/api/drafts/${a}/export`)).data}function pR(a){return`http://localhost:5263/api/drafts/${a}/export/file`}const gR="modulepreload",mR=function(a){return"/"+a},Rb={},kf=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){let l=function(p){return Promise.all(p.map(g=>Promise.resolve(g).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),d=(h==null?void 0:h.nonce)||(h==null?void 0:h.getAttribute("nonce"));r=l(t.map(p=>{if(p=mR(p),p in Rb)return;Rb[p]=!0;const g=p.endsWith(".css"),y=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${y}`))return;const v=document.createElement("link");if(v.rel=g?"stylesheet":gR,g||(v.as="script"),v.crossOrigin="",v.href=p,d&&v.setAttribute("nonce",d),document.head.appendChild(v),g)return new Promise((b,A)=>{v.addEventListener("load",b),v.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${p}`)))})}))}function o(l){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=l,window.dispatchEvent(h),!h.defaultPrevented)throw l}return r.then(l=>{for(const h of l||[])h.status==="rejected"&&o(h.reason);return e().catch(o)})};var Nu={};Nu.d=(a,e)=>{for(var t in e)Nu.o(e,t)&&!Nu.o(a,t)&&Object.defineProperty(a,t,{enumerable:!0,get:e[t]})};Nu.o=(a,e)=>Object.prototype.hasOwnProperty.call(a,e);var Me=globalThis.pdfjsLib={};Nu.d(Me,{AbortException:()=>Ha,AnnotationEditorLayer:()=>xv,AnnotationEditorParamsType:()=>Le,AnnotationEditorType:()=>De,AnnotationEditorUIManager:()=>Da,AnnotationLayer:()=>pL,AnnotationMode:()=>Pr,ColorPicker:()=>wp,DOMSVGFactory:()=>n0,DrawLayer:()=>Rv,FeatureTest:()=>bn,GlobalWorkerOptions:()=>tr,ImageKind:()=>Nf,InvalidPDFException:()=>XS,MissingPDFException:()=>za,OPS:()=>Ti,OutputScale:()=>vy,PDFDataRangeTransport:()=>WE,PDFDateString:()=>Kv,PDFWorker:()=>_l,PasswordResponses:()=>AR,PermissionFlag:()=>wR,PixelsPerInch:()=>oo,RenderingCancelledException:()=>qv,TextLayer:()=>Gy,UnexpectedResponseException:()=>qp,Util:()=>Ae,VerbosityLevel:()=>Wp,XfaLayer:()=>GE,build:()=>XP,createValidAbsoluteUrl:()=>_R,fetchData:()=>Kp,getDocument:()=>BP,getFilenameFromUrl:()=>IR,getPdfFilenameFromUrl:()=>FR,getXfaPageViewport:()=>DR,isDataScheme:()=>Yp,isPdfFile:()=>Xv,noContextMenu:()=>yi,normalizeUnicode:()=>PR,setLayerDimensions:()=>Fa,shadow:()=>Ue,version:()=>qP});const pn=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),qS=[1,0,0,1,0,0],py=[.001,0,0,.001,0,0],yR=1e7,ey=1.35,Jn={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Pr={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},vR="pdfjs_internal_editor_",De={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},Le={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},wR={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},on={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Nf={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Mt={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,WIDGET:20},vu={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Wp={ERRORS:0,WARNINGS:1,INFOS:5},Ti={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},AR={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Vp=Wp.WARNINGS;function bR(a){Number.isInteger(a)&&(Vp=a)}function SR(){return Vp}function Gp(a){Vp>=Wp.INFOS&&console.log(`Info: ${a}`)}function Ne(a){Vp>=Wp.WARNINGS&&console.log(`Warning: ${a}`)}function rt(a){throw new Error(a)}function Ot(a,e){a||rt(e)}function ER(a){switch(a==null?void 0:a.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function _R(a,e=null,t=null){if(!a)return null;try{if(t&&typeof a=="string"){if(t.addDefaultProtocol&&a.startsWith("www.")){const r=a.match(/\./g);(r==null?void 0:r.length)>=2&&(a=`http://${a}`)}if(t.tryConvertEncoding)try{a=RR(a)}catch{}}const n=e?new URL(a,e):new URL(a);if(ER(n))return n}catch{}return null}function Ue(a,e,t,n=!1){return Object.defineProperty(a,e,{value:t,enumerable:!n,configurable:!0,writable:!1}),t}const ho=(function(){function e(t,n){this.message=t,this.name=n}return e.prototype=new Error,e.constructor=e,e})();class gy extends ho{constructor(e,t){super(e,"PasswordException"),this.code=t}}class my extends ho{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class XS extends ho{constructor(e){super(e,"InvalidPDFException")}}class za extends ho{constructor(e){super(e,"MissingPDFException")}}class qp extends ho{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}}class xR extends ho{constructor(e){super(e,"FormatError")}}class Ha extends ho{constructor(e){super(e,"AbortException")}}function KS(a){(typeof a!="object"||(a==null?void 0:a.length)===void 0)&&rt("Invalid argument for bytesToString");const e=a.length,t=8192;if(e<t)return String.fromCharCode.apply(null,a);const n=[];for(let r=0;r<e;r+=t){const o=Math.min(r+t,e),l=a.subarray(r,o);n.push(String.fromCharCode.apply(null,l))}return n.join("")}function Xp(a){typeof a!="string"&&rt("Invalid argument for stringToBytes");const e=a.length,t=new Uint8Array(e);for(let n=0;n<e;++n)t[n]=a.charCodeAt(n)&255;return t}function CR(a){return String.fromCharCode(a>>24&255,a>>16&255,a>>8&255,a&255)}function Vv(a){const e=Object.create(null);for(const[t,n]of a)e[t]=n;return e}function TR(){const a=new Uint8Array(4);return a[0]=1,new Uint32Array(a.buffer,0,1)[0]===1}function kR(){try{return new Function(""),!0}catch{return!1}}class bn{static get isLittleEndian(){return Ue(this,"isLittleEndian",TR())}static get isEvalSupported(){return Ue(this,"isEvalSupported",kR())}static get isOffscreenCanvasSupported(){return Ue(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?Ue(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof(navigator==null?void 0:navigator.userAgent)=="string"&&navigator.userAgent.includes("Firefox")}):Ue(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){var e,t;return Ue(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const ty=Array.from(Array(256).keys(),a=>a.toString(16).padStart(2,"0"));var ir,jf,yy;class Ae{static makeHexColor(e,t,n){return`#${ty[e]}${ty[t]}${ty[n]}`}static scaleMinMax(e,t){let n;e[0]?(e[0]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[3],t[3]*=e[3]):(n=t[0],t[0]=t[1],t[1]=n,n=t[2],t[2]=t[3],t[3]=n,e[1]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){const n=e[0]*t[0]+e[1]*t[2]+t[4],r=e[0]*t[1]+e[1]*t[3]+t[5];return[n,r]}static applyInverseTransform(e,t){const n=t[0]*t[3]-t[1]*t[2],r=(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/n,o=(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/n;return[r,o]}static getAxialAlignedBoundingBox(e,t){const n=this.applyTransform(e,t),r=this.applyTransform(e.slice(2,4),t),o=this.applyTransform([e[0],e[3]],t),l=this.applyTransform([e[2],e[1]],t);return[Math.min(n[0],r[0],o[0],l[0]),Math.min(n[1],r[1],o[1],l[1]),Math.max(n[0],r[0],o[0],l[0]),Math.max(n[1],r[1],o[1],l[1])]}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){const t=[e[0],e[2],e[1],e[3]],n=e[0]*t[0]+e[1]*t[2],r=e[0]*t[1]+e[1]*t[3],o=e[2]*t[0]+e[3]*t[2],l=e[2]*t[1]+e[3]*t[3],h=(n+l)/2,d=Math.sqrt((n+l)**2-4*(n*l-o*r))/2,p=h+d||1,g=h-d||1;return[Math.sqrt(p),Math.sqrt(g)]}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const n=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),r=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(n>r)return null;const o=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),l=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return o>l?null:[n,o,r,l]}static bezierBoundingBox(e,t,n,r,o,l,h,d,p){return p?(p[0]=Math.min(p[0],e,h),p[1]=Math.min(p[1],t,d),p[2]=Math.max(p[2],e,h),p[3]=Math.max(p[3],t,d)):p=[Math.min(e,h),Math.min(t,d),Math.max(e,h),Math.max(t,d)],x(this,ir,yy).call(this,e,n,o,h,t,r,l,d,3*(-e+3*(n-o)+h),6*(e-2*n+o),3*(n-e),p),x(this,ir,yy).call(this,e,n,o,h,t,r,l,d,3*(-t+3*(r-l)+d),6*(t-2*r+l),3*(r-t),p),p}}ir=new WeakSet,jf=function(e,t,n,r,o,l,h,d,p,g){if(p<=0||p>=1)return;const y=1-p,v=p*p,b=v*p,A=y*(y*(y*e+3*p*t)+3*v*n)+b*r,E=y*(y*(y*o+3*p*l)+3*v*h)+b*d;g[0]=Math.min(g[0],A),g[1]=Math.min(g[1],E),g[2]=Math.max(g[2],A),g[3]=Math.max(g[3],E)},yy=function(e,t,n,r,o,l,h,d,p,g,y,v){if(Math.abs(p)<1e-12){Math.abs(g)>=1e-12&&x(this,ir,jf).call(this,e,t,n,r,o,l,h,d,-y/g,v);return}const b=g**2-4*y*p;if(b<0)return;const A=Math.sqrt(b),E=2*p;x(this,ir,jf).call(this,e,t,n,r,o,l,h,d,(-g+A)/E,v),x(this,ir,jf).call(this,e,t,n,r,o,l,h,d,(-g-A)/E,v)},T(Ae,ir);function RR(a){return decodeURIComponent(escape(a))}let ny=null,Pb=null;function PR(a){return ny||(ny=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Pb=new Map([["","t"]])),a.replaceAll(ny,(e,t,n)=>t?t.normalize("NFKC"):Pb.get(n))}function LR(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const a=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(a);else for(let e=0;e<32;e++)a[e]=Math.floor(Math.random()*255);return KS(a)}const Gv="pdfjs_internal_id_",Cs={BEZIER_CURVE_TO:0,MOVE_TO:1,LINE_TO:2,QUADRATIC_CURVE_TO:3,RESTORE:4,SAVE:5,SCALE:6,TRANSFORM:7,TRANSLATE:8};function MR(a){return Uint8Array.prototype.toBase64?a.toBase64():btoa(KS(a))}const ks="http://www.w3.org/2000/svg",Io=class Io{};Pe(Io,"CSS",96),Pe(Io,"PDF",72),Pe(Io,"PDF_TO_CSS_UNITS",Io.CSS/Io.PDF);let oo=Io;async function Kp(a,e="text"){if(bu(a,document.baseURI)){const t=await fetch(a);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,n)=>{const r=new XMLHttpRequest;r.open("GET",a,!0),r.responseType=e,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(r.response);return}t(r.responseText);return}n(new Error(r.statusText))}},r.send(null)})}class ud{constructor({viewBox:e,scale:t,rotation:n,offsetX:r=0,offsetY:o=0,dontFlip:l=!1}){this.viewBox=e,this.scale=t,this.rotation=n,this.offsetX=r,this.offsetY=o;const h=(e[2]+e[0])/2,d=(e[3]+e[1])/2;let p,g,y,v;switch(n%=360,n<0&&(n+=360),n){case 180:p=-1,g=0,y=0,v=1;break;case 90:p=0,g=1,y=1,v=0;break;case 270:p=0,g=-1,y=-1,v=0;break;case 0:p=1,g=0,y=0,v=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}l&&(y=-y,v=-v);let b,A,E,C;p===0?(b=Math.abs(d-e[1])*t+r,A=Math.abs(h-e[0])*t+o,E=(e[3]-e[1])*t,C=(e[2]-e[0])*t):(b=Math.abs(h-e[0])*t+r,A=Math.abs(d-e[1])*t+o,E=(e[2]-e[0])*t,C=(e[3]-e[1])*t),this.transform=[p*t,g*t,y*t,v*t,b-p*t*h-y*t*d,A-g*t*h-v*t*d],this.width=E,this.height=C}get rawDims(){const{viewBox:e}=this;return Ue(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:n=this.offsetX,offsetY:r=this.offsetY,dontFlip:o=!1}={}){return new ud({viewBox:this.viewBox.slice(),scale:e,rotation:t,offsetX:n,offsetY:r,dontFlip:o})}convertToViewportPoint(e,t){return Ae.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){const t=Ae.applyTransform([e[0],e[1]],this.transform),n=Ae.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],n[0],n[1]]}convertToPdfPoint(e,t){return Ae.applyInverseTransform([e,t],this.transform)}}class qv extends ho{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function Yp(a){const e=a.length;let t=0;for(;t<e&&a[t].trim()==="";)t++;return a.substring(t,t+5).toLowerCase()==="data:"}function Xv(a){return typeof a=="string"&&/\.pdf$/i.test(a)}function IR(a){return[a]=a.split(/[#?]/,1),a.substring(a.lastIndexOf("/")+1)}function FR(a,e="document.pdf"){if(typeof a!="string")return e;if(Yp(a))return Ne('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const t=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,n=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,r=t.exec(a);let o=n.exec(r[1])||n.exec(r[2])||n.exec(r[3]);if(o&&(o=o[0],o.includes("%")))try{o=n.exec(decodeURIComponent(o))[0]}catch{}return o||e}class Lb{constructor(){Pe(this,"started",Object.create(null));Pe(this,"times",[])}time(e){e in this.started&&Ne(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||Ne(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:n}of this.times)t=Math.max(n.length,t);for(const{name:n,start:r,end:o}of this.times)e.push(`${n.padEnd(t)} ${o-r}ms
`);return e.join("")}}function bu(a,e){try{const{protocol:t}=e?new URL(a,e):new URL(a);return t==="http:"||t==="https:"}catch{return!1}}function yi(a){a.preventDefault()}function Mb(a){console.log("Deprecated API usage: "+a)}var $u;class Kv{static toDateObject(e){if(!e||typeof e!="string")return null;u(this,$u)||S(this,$u,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=u(this,$u).exec(e);if(!t)return null;const n=parseInt(t[1],10);let r=parseInt(t[2],10);r=r>=1&&r<=12?r-1:0;let o=parseInt(t[3],10);o=o>=1&&o<=31?o:1;let l=parseInt(t[4],10);l=l>=0&&l<=23?l:0;let h=parseInt(t[5],10);h=h>=0&&h<=59?h:0;let d=parseInt(t[6],10);d=d>=0&&d<=59?d:0;const p=t[7]||"Z";let g=parseInt(t[8],10);g=g>=0&&g<=23?g:0;let y=parseInt(t[9],10)||0;return y=y>=0&&y<=59?y:0,p==="-"?(l+=g,h+=y):p==="+"&&(l-=g,h-=y),new Date(Date.UTC(n,r,o,l,h,d))}}$u=new WeakMap,T(Kv,$u);function DR(a,{scale:e=1,rotation:t=0}){const{width:n,height:r}=a.attributes.style,o=[0,0,parseInt(n),parseInt(r)];return new ud({viewBox:o,scale:e,rotation:t})}function Yv(a){if(a.startsWith("#")){const e=parseInt(a.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return a.startsWith("rgb(")?a.slice(4,-1).split(",").map(e=>parseInt(e)):a.startsWith("rgba(")?a.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(Ne(`Not a valid color format: "${a}"`),[0,0,0])}function OR(a){const e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(const t of a.keys()){e.style.color=t;const n=window.getComputedStyle(e).color;a.set(t,Yv(n))}e.remove()}function pt(a){const{a:e,b:t,c:n,d:r,e:o,f:l}=a.getTransform();return[e,t,n,r,o,l]}function Ts(a){const{a:e,b:t,c:n,d:r,e:o,f:l}=a.getTransform().invertSelf();return[e,t,n,r,o,l]}function Fa(a,e,t=!1,n=!0){if(e instanceof ud){const{pageWidth:r,pageHeight:o}=e.rawDims,{style:l}=a,h=bn.isCSSRoundSupported,d=`var(--scale-factor) * ${r}px`,p=`var(--scale-factor) * ${o}px`,g=h?`round(down, ${d}, var(--scale-round-x, 1px))`:`calc(${d})`,y=h?`round(down, ${p}, var(--scale-round-y, 1px))`:`calc(${p})`;!t||e.rotation%180===0?(l.width=g,l.height=y):(l.width=y,l.height=g)}n&&a.setAttribute("data-main-rotation",e.rotation)}class vy{constructor(){const e=window.devicePixelRatio||1;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}}var Lr,Oo,ki,No,Wu,Vu,bp,YS,Sn,QS,JS,Bf,ZS,Ay;const Rs=class Rs{constructor(e){T(this,Sn);T(this,Lr,null);T(this,Oo,null);T(this,ki);T(this,No,null);T(this,Wu,null);S(this,ki,e),u(Rs,Vu)||S(Rs,Vu,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"}))}render(){const e=S(this,Lr,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=u(this,ki)._uiManager._signal;e.addEventListener("contextmenu",yi,{signal:t}),e.addEventListener("pointerdown",x(Rs,bp,YS),{signal:t});const n=S(this,No,document.createElement("div"));n.className="buttons",e.append(n);const r=u(this,ki).toolbarPosition;if(r){const{style:o}=e,l=u(this,ki)._uiManager.direction==="ltr"?1-r[0]:r[0];o.insetInlineEnd=`${100*l}%`,o.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return x(this,Sn,ZS).call(this),e}get div(){return u(this,Lr)}hide(){var e;u(this,Lr).classList.add("hidden"),(e=u(this,Oo))==null||e.hideDropdown()}show(){var e;u(this,Lr).classList.remove("hidden"),(e=u(this,Wu))==null||e.shown()}async addAltText(e){const t=await e.render();x(this,Sn,Bf).call(this,t),u(this,No).prepend(t,u(this,Sn,Ay)),S(this,Wu,e)}addColorPicker(e){S(this,Oo,e);const t=e.renderButton();x(this,Sn,Bf).call(this,t),u(this,No).prepend(t,u(this,Sn,Ay))}remove(){var e;u(this,Lr).remove(),(e=u(this,Oo))==null||e.destroy(),S(this,Oo,null)}};Lr=new WeakMap,Oo=new WeakMap,ki=new WeakMap,No=new WeakMap,Wu=new WeakMap,Vu=new WeakMap,bp=new WeakSet,YS=function(e){e.stopPropagation()},Sn=new WeakSet,QS=function(e){u(this,ki)._focusEventsAllowed=!1,e.preventDefault(),e.stopPropagation()},JS=function(e){u(this,ki)._focusEventsAllowed=!0,e.preventDefault(),e.stopPropagation()},Bf=function(e){const t=u(this,ki)._uiManager._signal;e.addEventListener("focusin",x(this,Sn,QS).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",x(this,Sn,JS).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",yi,{signal:t})},ZS=function(){const{editorType:e,_uiManager:t}=u(this,ki),n=document.createElement("button");n.className="delete",n.tabIndex=0,n.setAttribute("data-l10n-id",u(Rs,Vu)[e]),x(this,Sn,Bf).call(this,n),n.addEventListener("click",r=>{t.delete()},{signal:t._signal}),u(this,No).append(n)},Ay=function(){const e=document.createElement("div");return e.className="divider",e},T(Rs,bp),T(Rs,Vu,null);let wy=Rs;var Gu,jo,Bo,lo,eE,tE,nE;class NR{constructor(e){T(this,lo);T(this,Gu,null);T(this,jo,null);T(this,Bo);S(this,Bo,e)}show(e,t,n){const[r,o]=x(this,lo,tE).call(this,t,n),{style:l}=u(this,jo)||S(this,jo,x(this,lo,eE).call(this));e.append(u(this,jo)),l.insetInlineEnd=`${100*r}%`,l.top=`calc(${100*o}% + var(--editor-toolbar-vert-offset))`}hide(){u(this,jo).remove()}}Gu=new WeakMap,jo=new WeakMap,Bo=new WeakMap,lo=new WeakSet,eE=function(){const e=S(this,jo,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",yi,{signal:u(this,Bo)._signal});const t=S(this,Gu,document.createElement("div"));return t.className="buttons",e.append(t),x(this,lo,nE).call(this),e},tE=function(e,t){let n=0,r=0;for(const o of e){const l=o.y+o.height;if(l<n)continue;const h=o.x+(t?o.width:0);if(l>n){r=h,n=l;continue}t?h>r&&(r=h):h<r&&(r=h)}return[t?1-r:r,n]},nE=function(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const n=u(this,Bo)._signal;e.addEventListener("contextmenu",yi,{signal:n}),e.addEventListener("click",()=>{u(this,Bo).highlightSelection("floating_button")},{signal:n}),u(this,Gu).append(e)};function mp(a,e,t){for(const n of t)e.addEventListener(n,a[n].bind(a))}function jR(a){return Math.round(Math.min(255,Math.max(1,255*a))).toString(16).padStart(2,"0")}var Sp;class BR{constructor(){T(this,Sp,0)}get id(){return`${vR}${yn(this,Sp)._++}`}}Sp=new WeakMap;var Tl,qu,ln,kl,zf;const r0=class r0{constructor(){T(this,kl);T(this,Tl,LR());T(this,qu,0);T(this,ln,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=e;const o=r.decode().then(()=>(n.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return Ue(this,"_isSVGFittingCanvas",o)}async getFromFile(e){const{lastModified:t,name:n,size:r,type:o}=e;return x(this,kl,zf).call(this,`${t}_${n}_${r}_${o}`,e)}async getFromUrl(e){return x(this,kl,zf).call(this,e,e)}async getFromBlob(e,t){const n=await t;return x(this,kl,zf).call(this,e,n)}async getFromId(e){u(this,ln)||S(this,ln,new Map);const t=u(this,ln).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:n}=t;return delete t.blobPromise,this.getFromBlob(t.id,n)}return this.getFromUrl(t.url)}getFromCanvas(e,t){u(this,ln)||S(this,ln,new Map);let n=u(this,ln).get(e);if(n!=null&&n.bitmap)return n.refCounter+=1,n;const r=new OffscreenCanvas(t.width,t.height);return r.getContext("2d").drawImage(t,0,0),n={bitmap:r.transferToImageBitmap(),id:`image_${u(this,Tl)}_${yn(this,qu)._++}`,refCounter:1,isSvg:!1},u(this,ln).set(e,n),u(this,ln).set(n.id,n),n}getSvgUrl(e){const t=u(this,ln).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var r;u(this,ln)||S(this,ln,new Map);const t=u(this,ln).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:n}=t;if(!t.url&&!t.file){const o=new OffscreenCanvas(n.width,n.height);o.getContext("bitmaprenderer").transferFromImageBitmap(n),t.blobPromise=o.convertToBlob()}(r=n.close)==null||r.call(n),t.bitmap=null}isValidId(e){return e.startsWith(`image_${u(this,Tl)}_`)}};Tl=new WeakMap,qu=new WeakMap,ln=new WeakMap,kl=new WeakSet,zf=async function(e,t){u(this,ln)||S(this,ln,new Map);let n=u(this,ln).get(e);if(n===null)return null;if(n!=null&&n.bitmap)return n.refCounter+=1,n;try{n||(n={bitmap:null,id:`image_${u(this,Tl)}_${yn(this,qu)._++}`,refCounter:0,isSvg:!1});let r;if(typeof t=="string"?(n.url=t,r=await Kp(t,"blob")):t instanceof File?r=n.file=t:t instanceof Blob&&(r=t),r.type==="image/svg+xml"){const o=r0._isSVGFittingCanvas,l=new FileReader,h=new Image,d=new Promise((p,g)=>{h.onload=()=>{n.bitmap=h,n.isSvg=!0,p()},l.onload=async()=>{const y=n.svgUrl=l.result;h.src=await o?`${y}#svgView(preserveAspectRatio(none))`:y},h.onerror=l.onerror=g});l.readAsDataURL(r),await d}else n.bitmap=await createImageBitmap(r);n.refCounter=1}catch(r){console.error(r),n=null}return u(this,ln).set(e,n),n&&u(this,ln).set(n.id,n),n};let by=r0;var Ut,Mr,Xu,$t;class zR{constructor(e=128){T(this,Ut,[]);T(this,Mr,!1);T(this,Xu);T(this,$t,-1);S(this,Xu,e)}add({cmd:e,undo:t,post:n,mustExec:r,type:o=NaN,overwriteIfSameType:l=!1,keepUndo:h=!1}){if(r&&e(),u(this,Mr))return;const d={cmd:e,undo:t,post:n,type:o};if(u(this,$t)===-1){u(this,Ut).length>0&&(u(this,Ut).length=0),S(this,$t,0),u(this,Ut).push(d);return}if(l&&u(this,Ut)[u(this,$t)].type===o){h&&(d.undo=u(this,Ut)[u(this,$t)].undo),u(this,Ut)[u(this,$t)]=d;return}const p=u(this,$t)+1;p===u(this,Xu)?u(this,Ut).splice(0,1):(S(this,$t,p),p<u(this,Ut).length&&u(this,Ut).splice(p)),u(this,Ut).push(d)}undo(){if(u(this,$t)===-1)return;S(this,Mr,!0);const{undo:e,post:t}=u(this,Ut)[u(this,$t)];e(),t==null||t(),S(this,Mr,!1),S(this,$t,u(this,$t)-1)}redo(){if(u(this,$t)<u(this,Ut).length-1){S(this,$t,u(this,$t)+1),S(this,Mr,!0);const{cmd:e,post:t}=u(this,Ut)[u(this,$t)];e(),t==null||t(),S(this,Mr,!1)}}hasSomethingToUndo(){return u(this,$t)!==-1}hasSomethingToRedo(){return u(this,$t)<u(this,Ut).length-1}destroy(){S(this,Ut,null)}}Ut=new WeakMap,Mr=new WeakMap,Xu=new WeakMap,$t=new WeakMap;var Ep,iE;class hd{constructor(e){T(this,Ep);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=bn.platform;for(const[n,r,o={}]of e)for(const l of n){const h=l.startsWith("mac+");t&&h?(this.callbacks.set(l.slice(4),{callback:r,options:o}),this.allKeys.add(l.split("+").at(-1))):!t&&!h&&(this.callbacks.set(l,{callback:r,options:o}),this.allKeys.add(l.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const n=this.callbacks.get(x(this,Ep,iE).call(this,t));if(!n)return;const{callback:r,options:{bubbles:o=!1,args:l=[],checker:h=null}}=n;h&&!h(e,t)||(r.bind(e,...l,t)(),o||(t.stopPropagation(),t.preventDefault()))}}Ep=new WeakSet,iE=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const _p=class _p{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return OR(e),Ue(this,"_colors",e)}convert(e){const t=Yv(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[n,r]of this._colors)if(r.every((o,l)=>o===t[l]))return _p._colorsMapping.get(n);return t}getHexCode(e){const t=this._colors.get(e);return t?Ae.makeHexColor(...t):e}};Pe(_p,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let Sy=_p;var Rl,Wn,It,Yt,Pl,Ls,Ll,Ri,Ir,Ml,zo,Qi,Pi,Ho,Ku,Yu,Il,Qu,Ji,Fr,Fl,Dr,Zi,xp,Or,Ju,Nr,Uo,Zu,eh,Wt,Xe,Ms,$o,th,nh,jr,es,Is,ih,ci,re,Hf,Ey,sE,rE,Uf,oE,aE,lE,_y,cE,xy,Cy,uE,vn,kr,hE,dE,Ty,fE,Su,ky;const Sl=class Sl{constructor(e,t,n,r,o,l,h,d,p,g,y){T(this,re);T(this,Rl,new AbortController);T(this,Wn,null);T(this,It,new Map);T(this,Yt,new Map);T(this,Pl,null);T(this,Ls,null);T(this,Ll,null);T(this,Ri,new zR);T(this,Ir,null);T(this,Ml,0);T(this,zo,new Set);T(this,Qi,null);T(this,Pi,null);T(this,Ho,new Set);T(this,Ku,!1);T(this,Yu,!1);T(this,Il,!1);T(this,Qu,null);T(this,Ji,null);T(this,Fr,null);T(this,Fl,null);T(this,Dr,!1);T(this,Zi,null);T(this,xp,new BR);T(this,Or,!1);T(this,Ju,!1);T(this,Nr,null);T(this,Uo,null);T(this,Zu,null);T(this,eh,null);T(this,Wt,De.NONE);T(this,Xe,new Set);T(this,Ms,null);T(this,$o,null);T(this,th,null);T(this,nh,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});T(this,jr,[0,0]);T(this,es,null);T(this,Is,null);T(this,ih,null);T(this,ci,null);const v=this._signal=u(this,Rl).signal;S(this,Is,e),S(this,ih,t),S(this,Pl,n),this._eventBus=r,r._on("editingaction",this.onEditingAction.bind(this),{signal:v}),r._on("pagechanging",this.onPageChanging.bind(this),{signal:v}),r._on("scalechanging",this.onScaleChanging.bind(this),{signal:v}),r._on("rotationchanging",this.onRotationChanging.bind(this),{signal:v}),r._on("setpreference",this.onSetPreference.bind(this),{signal:v}),r._on("switchannotationeditorparams",b=>this.updateParams(b.type,b.value),{signal:v}),x(this,re,oE).call(this),x(this,re,uE).call(this),x(this,re,_y).call(this),S(this,Ls,o.annotationStorage),S(this,Qu,o.filterFactory),S(this,$o,l),S(this,Fl,h||null),S(this,Ku,d),S(this,Yu,p),S(this,Il,g),S(this,eh,y||null),this.viewParameters={realScale:oo.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}static get _keyboardManager(){const e=Sl.prototype,t=l=>u(l,Is).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&l.hasSomethingToControl(),n=(l,{target:h})=>{if(h instanceof HTMLInputElement){const{type:d}=h;return d!=="text"&&d!=="number"}return!0},r=this.TRANSLATE_SMALL,o=this.TRANSLATE_BIG;return Ue(this,"_keyboardManager",new hd([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],e.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:n}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(l,{target:h})=>!(h instanceof HTMLButtonElement)&&u(l,Is).contains(h)&&!l.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(l,{target:h})=>!(h instanceof HTMLButtonElement)&&u(l,Is).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-o,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[o,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-o],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,o],checker:t}]]))}destroy(){var e,t,n,r;(e=u(this,ci))==null||e.resolve(),S(this,ci,null),(t=u(this,Rl))==null||t.abort(),S(this,Rl,null),this._signal=null;for(const o of u(this,Yt).values())o.destroy();u(this,Yt).clear(),u(this,It).clear(),u(this,Ho).clear(),S(this,Wn,null),u(this,Xe).clear(),u(this,Ri).destroy(),(n=u(this,Pl))==null||n.destroy(),(r=u(this,Zi))==null||r.hide(),S(this,Zi,null),u(this,Ji)&&(clearTimeout(u(this,Ji)),S(this,Ji,null)),u(this,es)&&(clearTimeout(u(this,es)),S(this,es,null))}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return u(this,eh)}get useNewAltTextFlow(){return u(this,Yu)}get useNewAltTextWhenAddingImage(){return u(this,Il)}get hcmFilter(){return Ue(this,"hcmFilter",u(this,$o)?u(this,Qu).addHCMFilter(u(this,$o).foreground,u(this,$o).background):"none")}get direction(){return Ue(this,"direction",getComputedStyle(u(this,Is)).direction)}get highlightColors(){return Ue(this,"highlightColors",u(this,Fl)?new Map(u(this,Fl).split(",").map(e=>e.split("=").map(t=>t.trim()))):null)}get highlightColorNames(){return Ue(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setMainHighlightColorPicker(e){S(this,Zu,e)}editAltText(e,t=!1){var n;(n=u(this,Pl))==null||n.editAltText(this,e,t)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":S(this,Il,t);break}}onPageChanging({pageNumber:e}){S(this,Ml,e-1)}focusMainContainer(){u(this,Is).focus()}findParent(e,t){for(const n of u(this,Yt).values()){const{x:r,y:o,width:l,height:h}=n.div.getBoundingClientRect();if(e>=r&&e<=r+l&&t>=o&&t<=o+h)return n}return null}disableUserSelect(e=!1){u(this,ih).classList.toggle("noUserSelect",e)}addShouldRescale(e){u(this,Ho).add(e)}removeShouldRescale(e){u(this,Ho).delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*oo.PDF_TO_CSS_UNITS;for(const t of u(this,Ho))t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e=""){const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:n,anchorOffset:r,focusNode:o,focusOffset:l}=t,h=t.toString(),p=x(this,re,Hf).call(this,t).closest(".textLayer"),g=this.getSelectionBoxes(p);if(!g)return;t.empty();const y=x(this,re,Ey).call(this,p),v=u(this,Wt)===De.NONE,b=()=>{y==null||y.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:g,anchorNode:n,anchorOffset:r,focusNode:o,focusOffset:l,text:h}),v&&this.showAllEditors("highlight",!0,!0)};if(v){this.switchToMode(De.HIGHLIGHT,b);return}b()}addToAnnotationStorage(e){!e.isEmpty()&&u(this,Ls)&&!u(this,Ls).has(e.id)&&u(this,Ls).setValue(e.id,e)}blur(){if(this.isShiftKeyDown=!1,u(this,Dr)&&(S(this,Dr,!1),x(this,re,Uf).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of u(this,Xe))if(t.div.contains(e)){S(this,Uo,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!u(this,Uo))return;const[e,t]=u(this,Uo);S(this,Uo,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){x(this,re,_y).call(this),x(this,re,xy).call(this)}removeEditListeners(){x(this,re,cE).call(this),x(this,re,Cy).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const n of u(this,Pi))if(n.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const n of u(this,Pi))if(n.isHandlingMimeForPasting(t.type)){n.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var n;if(e.preventDefault(),(n=u(this,Wn))==null||n.commitOrRemove(),!this.hasSelection)return;const t=[];for(const r of u(this,Xe)){const o=r.serialize(!0);o&&t.push(o)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const o of t.items)for(const l of u(this,Pi))if(l.isHandlingMimeForPasting(o.type)){l.paste(o,this.currentLayer);return}let n=t.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(o){Ne(`paste: "${o.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const r=this.currentLayer;try{const o=[];for(const d of n){const p=await r.deserialize(d);if(!p)return;o.push(p)}const l=()=>{for(const d of o)x(this,re,Ty).call(this,d);x(this,re,ky).call(this,o)},h=()=>{for(const d of o)d.remove()};this.addCommands({cmd:l,undo:h,mustExec:!0})}catch(o){Ne(`paste: "${o.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),u(this,Wt)!==De.NONE&&!this.isEditorHandlingKeyboard&&Sl._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,u(this,Dr)&&(S(this,Dr,!1),x(this,re,Uf).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(e){e?(x(this,re,aE).call(this),x(this,re,xy).call(this),x(this,re,vn).call(this,{isEditing:u(this,Wt)!==De.NONE,isEmpty:x(this,re,Su).call(this),hasSomethingToUndo:u(this,Ri).hasSomethingToUndo(),hasSomethingToRedo:u(this,Ri).hasSomethingToRedo(),hasSelectedEditor:!1})):(x(this,re,lE).call(this),x(this,re,Cy).call(this),x(this,re,vn).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!u(this,Pi)){S(this,Pi,e);for(const t of u(this,Pi))x(this,re,kr).call(this,t.defaultPropertiesToUpdate)}}getId(){return u(this,xp).id}get currentLayer(){return u(this,Yt).get(u(this,Ml))}getLayer(e){return u(this,Yt).get(e)}get currentPageIndex(){return u(this,Ml)}addLayer(e){u(this,Yt).set(e.pageIndex,e),u(this,Or)?e.enable():e.disable()}removeLayer(e){u(this,Yt).delete(e.pageIndex)}async updateMode(e,t=null,n=!1){if(u(this,Wt)!==e&&!(u(this,ci)&&(await u(this,ci).promise,!u(this,ci)))){if(S(this,ci,Promise.withResolvers()),S(this,Wt,e),e===De.NONE){this.setEditingState(!1),x(this,re,dE).call(this),u(this,ci).resolve();return}this.setEditingState(!0),await x(this,re,hE).call(this),this.unselectAll();for(const r of u(this,Yt).values())r.updateMode(e);if(!t){n&&this.addNewEditorFromKeyboard(),u(this,ci).resolve();return}for(const r of u(this,It).values())r.annotationElementId===t?(this.setSelected(r),r.enterInEditMode()):r.unselect();u(this,ci).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e!==u(this,Wt)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,t){var n;if(u(this,Pi)){switch(e){case Le.CREATE:this.currentLayer.addNewEditor();return;case Le.HIGHLIGHT_DEFAULT_COLOR:(n=u(this,Zu))==null||n.updateColor(t);break;case Le.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(u(this,th)||S(this,th,new Map)).set(e,t),this.showAllEditors("highlight",t);break}for(const r of u(this,Xe))r.updateParams(e,t);for(const r of u(this,Pi))r.updateDefaultParams(e,t)}}showAllEditors(e,t,n=!1){var o;for(const l of u(this,It).values())l.editorType===e&&l.show(t);(((o=u(this,th))==null?void 0:o.get(Le.HIGHLIGHT_SHOW_ALL))??!0)!==t&&x(this,re,kr).call(this,[[Le.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(u(this,Ju)!==e){S(this,Ju,e);for(const t of u(this,Yt).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const n of u(this,It).values())n.pageIndex===e&&t.push(n);return t}getEditor(e){return u(this,It).get(e)}addEditor(e){u(this,It).set(e.id,e)}removeEditor(e){var t;e.div.contains(document.activeElement)&&(u(this,Ji)&&clearTimeout(u(this,Ji)),S(this,Ji,setTimeout(()=>{this.focusMainContainer(),S(this,Ji,null)},0))),u(this,It).delete(e.id),this.unselect(e),(!e.annotationElementId||!u(this,zo).has(e.annotationElementId))&&((t=u(this,Ls))==null||t.remove(e.id))}addDeletedAnnotationElement(e){u(this,zo).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return u(this,zo).has(e)}removeDeletedAnnotationElement(e){u(this,zo).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){u(this,Wn)!==e&&(S(this,Wn,e),e&&x(this,re,kr).call(this,e.propertiesToUpdate))}updateUI(e){u(this,re,fE)===e&&x(this,re,kr).call(this,e.propertiesToUpdate)}toggleSelected(e){if(u(this,Xe).has(e)){u(this,Xe).delete(e),e.unselect(),x(this,re,vn).call(this,{hasSelectedEditor:this.hasSelection});return}u(this,Xe).add(e),e.select(),x(this,re,kr).call(this,e.propertiesToUpdate),x(this,re,vn).call(this,{hasSelectedEditor:!0})}setSelected(e){for(const t of u(this,Xe))t!==e&&t.unselect();u(this,Xe).clear(),u(this,Xe).add(e),e.select(),x(this,re,kr).call(this,e.propertiesToUpdate),x(this,re,vn).call(this,{hasSelectedEditor:!0})}isSelected(e){return u(this,Xe).has(e)}get firstSelectedEditor(){return u(this,Xe).values().next().value}unselect(e){e.unselect(),u(this,Xe).delete(e),x(this,re,vn).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return u(this,Xe).size!==0}get isEnterHandled(){return u(this,Xe).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){u(this,Ri).undo(),x(this,re,vn).call(this,{hasSomethingToUndo:u(this,Ri).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:x(this,re,Su).call(this)})}redo(){u(this,Ri).redo(),x(this,re,vn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:u(this,Ri).hasSomethingToRedo(),isEmpty:x(this,re,Su).call(this)})}addCommands(e){u(this,Ri).add(e),x(this,re,vn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:x(this,re,Su).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const e=[...u(this,Xe)],t=()=>{for(const r of e)r.remove()},n=()=>{for(const r of e)x(this,re,Ty).call(this,r)};this.addCommands({cmd:t,undo:n,mustExec:!0})}commitOrRemove(){var e;(e=u(this,Wn))==null||e.commitOrRemove()}hasSomethingToControl(){return u(this,Wn)||this.hasSelection}selectAll(){for(const e of u(this,Xe))e.commit();x(this,re,ky).call(this,u(this,It).values())}unselectAll(){if(!(u(this,Wn)&&(u(this,Wn).commitOrRemove(),u(this,Wt)!==De.NONE))&&this.hasSelection){for(const e of u(this,Xe))e.unselect();u(this,Xe).clear(),x(this,re,vn).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;u(this,jr)[0]+=e,u(this,jr)[1]+=t;const[r,o]=u(this,jr),l=[...u(this,Xe)],h=1e3;u(this,es)&&clearTimeout(u(this,es)),S(this,es,setTimeout(()=>{S(this,es,null),u(this,jr)[0]=u(this,jr)[1]=0,this.addCommands({cmd:()=>{for(const d of l)u(this,It).has(d.id)&&d.translateInPage(r,o)},undo:()=>{for(const d of l)u(this,It).has(d.id)&&d.translateInPage(-r,-o)},mustExec:!1})},h));for(const d of l)d.translateInPage(e,t)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),S(this,Qi,new Map);for(const e of u(this,Xe))u(this,Qi).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!u(this,Qi))return!1;this.disableUserSelect(!1);const e=u(this,Qi);S(this,Qi,null);let t=!1;for(const[{x:r,y:o,pageIndex:l},h]of e)h.newX=r,h.newY=o,h.newPageIndex=l,t||(t=r!==h.savedX||o!==h.savedY||l!==h.savedPageIndex);if(!t)return!1;const n=(r,o,l,h)=>{if(u(this,It).has(r.id)){const d=u(this,Yt).get(h);d?r._setParentAndPosition(d,o,l):(r.pageIndex=h,r.x=o,r.y=l)}};return this.addCommands({cmd:()=>{for(const[r,{newX:o,newY:l,newPageIndex:h}]of e)n(r,o,l,h)},undo:()=>{for(const[r,{savedX:o,savedY:l,savedPageIndex:h}]of e)n(r,o,l,h)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(u(this,Qi))for(const n of u(this,Qi).keys())n.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||u(this,Xe).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return u(this,Wn)===e}getActive(){return u(this,Wn)}getMode(){return u(this,Wt)}get imageManager(){return Ue(this,"imageManager",new by)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let p=0,g=t.rangeCount;p<g;p++)if(!e.contains(t.getRangeAt(p).commonAncestorContainer))return null;const{x:n,y:r,width:o,height:l}=e.getBoundingClientRect();let h;switch(e.getAttribute("data-main-rotation")){case"90":h=(p,g,y,v)=>({x:(g-r)/l,y:1-(p+y-n)/o,width:v/l,height:y/o});break;case"180":h=(p,g,y,v)=>({x:1-(p+y-n)/o,y:1-(g+v-r)/l,width:y/o,height:v/l});break;case"270":h=(p,g,y,v)=>({x:1-(g+v-r)/l,y:(p-n)/o,width:v/l,height:y/o});break;default:h=(p,g,y,v)=>({x:(p-n)/o,y:(g-r)/l,width:y/o,height:v/l});break}const d=[];for(let p=0,g=t.rangeCount;p<g;p++){const y=t.getRangeAt(p);if(!y.collapsed)for(const{x:v,y:b,width:A,height:E}of y.getClientRects())A===0||E===0||d.push(h(v,b,A,E))}return d.length===0?null:d}addChangedExistingAnnotation({annotationElementId:e,id:t}){(u(this,Ll)||S(this,Ll,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=u(this,Ll))==null||t.delete(e)}renderAnnotationElement(e){var r;const t=(r=u(this,Ll))==null?void 0:r.get(e.data.id);if(!t)return;const n=u(this,Ls).getRawValue(t);n&&(u(this,Wt)===De.NONE&&!n.hasBeenModified||n.renderAnnotationElement(e))}};Rl=new WeakMap,Wn=new WeakMap,It=new WeakMap,Yt=new WeakMap,Pl=new WeakMap,Ls=new WeakMap,Ll=new WeakMap,Ri=new WeakMap,Ir=new WeakMap,Ml=new WeakMap,zo=new WeakMap,Qi=new WeakMap,Pi=new WeakMap,Ho=new WeakMap,Ku=new WeakMap,Yu=new WeakMap,Il=new WeakMap,Qu=new WeakMap,Ji=new WeakMap,Fr=new WeakMap,Fl=new WeakMap,Dr=new WeakMap,Zi=new WeakMap,xp=new WeakMap,Or=new WeakMap,Ju=new WeakMap,Nr=new WeakMap,Uo=new WeakMap,Zu=new WeakMap,eh=new WeakMap,Wt=new WeakMap,Xe=new WeakMap,Ms=new WeakMap,$o=new WeakMap,th=new WeakMap,nh=new WeakMap,jr=new WeakMap,es=new WeakMap,Is=new WeakMap,ih=new WeakMap,ci=new WeakMap,re=new WeakSet,Hf=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},Ey=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const n of u(this,Yt).values())if(n.hasTextLayer(e))return n;return null},sE=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const n=x(this,re,Hf).call(this,e).closest(".textLayer"),r=this.getSelectionBoxes(n);r&&(u(this,Zi)||S(this,Zi,new NR(this)),u(this,Zi).show(n,r,this.direction==="ltr"))},rE=function(){var o,l,h;const e=document.getSelection();if(!e||e.isCollapsed){u(this,Ms)&&((o=u(this,Zi))==null||o.hide(),S(this,Ms,null),x(this,re,vn).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===u(this,Ms))return;const r=x(this,re,Hf).call(this,e).closest(".textLayer");if(!r){u(this,Ms)&&((l=u(this,Zi))==null||l.hide(),S(this,Ms,null),x(this,re,vn).call(this,{hasSelectedText:!1}));return}if((h=u(this,Zi))==null||h.hide(),S(this,Ms,t),x(this,re,vn).call(this,{hasSelectedText:!0}),!(u(this,Wt)!==De.HIGHLIGHT&&u(this,Wt)!==De.NONE)&&(u(this,Wt)===De.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),S(this,Dr,this.isShiftKeyDown),!this.isShiftKeyDown)){const d=u(this,Wt)===De.HIGHLIGHT?x(this,re,Ey).call(this,r):null;d==null||d.toggleDrawing();const p=new AbortController,g=this.combinedSignal(p),y=v=>{v.type==="pointerup"&&v.button!==0||(p.abort(),d==null||d.toggleDrawing(!0),v.type==="pointerup"&&x(this,re,Uf).call(this,"main_toolbar"))};window.addEventListener("pointerup",y,{signal:g}),window.addEventListener("blur",y,{signal:g})}},Uf=function(e=""){u(this,Wt)===De.HIGHLIGHT?this.highlightSelection(e):u(this,Ku)&&x(this,re,sE).call(this)},oE=function(){document.addEventListener("selectionchange",x(this,re,rE).bind(this),{signal:this._signal})},aE=function(){if(u(this,Fr))return;S(this,Fr,new AbortController);const e=this.combinedSignal(u(this,Fr));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},lE=function(){var e;(e=u(this,Fr))==null||e.abort(),S(this,Fr,null)},_y=function(){if(u(this,Nr))return;S(this,Nr,new AbortController);const e=this.combinedSignal(u(this,Nr));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},cE=function(){var e;(e=u(this,Nr))==null||e.abort(),S(this,Nr,null)},xy=function(){if(u(this,Ir))return;S(this,Ir,new AbortController);const e=this.combinedSignal(u(this,Ir));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},Cy=function(){var e;(e=u(this,Ir))==null||e.abort(),S(this,Ir,null)},uE=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},vn=function(e){Object.entries(e).some(([n,r])=>u(this,nh)[n]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(u(this,nh),e)}),u(this,Wt)===De.HIGHLIGHT&&e.hasSelectedEditor===!1&&x(this,re,kr).call(this,[[Le.HIGHLIGHT_FREE,!0]]))},kr=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},hE=async function(){if(!u(this,Or)){S(this,Or,!0);const e=[];for(const t of u(this,Yt).values())e.push(t.enable());await Promise.all(e);for(const t of u(this,It).values())t.enable()}},dE=function(){if(this.unselectAll(),u(this,Or)){S(this,Or,!1);for(const e of u(this,Yt).values())e.disable();for(const e of u(this,It).values())e.disable()}},Ty=function(e){const t=u(this,Yt).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},fE=function(){let e=null;for(e of u(this,Xe));return e},Su=function(){if(u(this,It).size===0)return!0;if(u(this,It).size===1)for(const e of u(this,It).values())return e.isEmpty();return!1},ky=function(e){for(const t of u(this,Xe))t.unselect();u(this,Xe).clear();for(const t of e)t.isEmpty()||(u(this,Xe).add(t),t.select());x(this,re,vn).call(this,{hasSelectedEditor:this.hasSelection})},Pe(Sl,"TRANSLATE_SMALL",1),Pe(Sl,"TRANSLATE_BIG",10);let Da=Sl;var Vt,ts,Li,Dl,ns,Vn,Ol,is,Mn,Fs,Wo,ss,Br,Hi,Eu,$f;const wn=class wn{constructor(e){T(this,Hi);T(this,Vt,null);T(this,ts,!1);T(this,Li,null);T(this,Dl,null);T(this,ns,null);T(this,Vn,null);T(this,Ol,!1);T(this,is,null);T(this,Mn,null);T(this,Fs,null);T(this,Wo,null);T(this,ss,!1);S(this,Mn,e),S(this,ss,e._uiManager.useNewAltTextFlow),u(wn,Br)||S(wn,Br,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){wn._l10n??(wn._l10n=e)}async render(){const e=S(this,Li,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=S(this,Dl,document.createElement("span"));e.append(t),u(this,ss)?(e.classList.add("new"),e.setAttribute("data-l10n-id",u(wn,Br).missing),t.setAttribute("data-l10n-id",u(wn,Br)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=u(this,Mn)._uiManager._signal;e.addEventListener("contextmenu",yi,{signal:n}),e.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:n});const r=o=>{o.preventDefault(),u(this,Mn)._uiManager.editAltText(u(this,Mn)),u(this,ss)&&u(this,Mn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:u(this,Hi,Eu)}})};return e.addEventListener("click",r,{capture:!0,signal:n}),e.addEventListener("keydown",o=>{o.target===e&&o.key==="Enter"&&(S(this,Ol,!0),r(o))},{signal:n}),await x(this,Hi,$f).call(this),e}finish(){u(this,Li)&&(u(this,Li).focus({focusVisible:u(this,Ol)}),S(this,Ol,!1))}isEmpty(){return u(this,ss)?u(this,Vt)===null:!u(this,Vt)&&!u(this,ts)}hasData(){return u(this,ss)?u(this,Vt)!==null||!!u(this,Fs):this.isEmpty()}get guessedText(){return u(this,Fs)}async setGuessedText(e){u(this,Vt)===null&&(S(this,Fs,e),S(this,Wo,await wn._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),x(this,Hi,$f).call(this))}toggleAltTextBadge(e=!1){var t;if(!u(this,ss)||u(this,Vt)){(t=u(this,is))==null||t.remove(),S(this,is,null);return}if(!u(this,is)){const n=S(this,is,document.createElement("div"));n.className="noAltTextBadge",u(this,Mn).div.append(n)}u(this,is).classList.toggle("hidden",!e)}serialize(e){let t=u(this,Vt);return!e&&u(this,Fs)===t&&(t=u(this,Wo)),{altText:t,decorative:u(this,ts),guessedText:u(this,Fs),textWithDisclaimer:u(this,Wo)}}get data(){return{altText:u(this,Vt),decorative:u(this,ts)}}set data({altText:e,decorative:t,guessedText:n,textWithDisclaimer:r,cancel:o=!1}){n&&(S(this,Fs,n),S(this,Wo,r)),!(u(this,Vt)===e&&u(this,ts)===t)&&(o||(S(this,Vt,e),S(this,ts,t)),x(this,Hi,$f).call(this))}toggle(e=!1){u(this,Li)&&(!e&&u(this,Vn)&&(clearTimeout(u(this,Vn)),S(this,Vn,null)),u(this,Li).disabled=!e)}shown(){u(this,Mn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:u(this,Hi,Eu)}})}destroy(){var e,t;(e=u(this,Li))==null||e.remove(),S(this,Li,null),S(this,Dl,null),S(this,ns,null),(t=u(this,is))==null||t.remove(),S(this,is,null)}};Vt=new WeakMap,ts=new WeakMap,Li=new WeakMap,Dl=new WeakMap,ns=new WeakMap,Vn=new WeakMap,Ol=new WeakMap,is=new WeakMap,Mn=new WeakMap,Fs=new WeakMap,Wo=new WeakMap,ss=new WeakMap,Br=new WeakMap,Hi=new WeakSet,Eu=function(){return u(this,Vt)&&"added"||u(this,Vt)===null&&this.guessedText&&"review"||"missing"},$f=async function(){var r,o,l;const e=u(this,Li);if(!e)return;if(u(this,ss)){if(e.classList.toggle("done",!!u(this,Vt)),e.setAttribute("data-l10n-id",u(wn,Br)[u(this,Hi,Eu)]),(r=u(this,Dl))==null||r.setAttribute("data-l10n-id",u(wn,Br)[`${u(this,Hi,Eu)}-label`]),!u(this,Vt)){(o=u(this,ns))==null||o.remove();return}}else{if(!u(this,Vt)&&!u(this,ts)){e.classList.remove("done"),(l=u(this,ns))==null||l.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=u(this,ns);if(!t){S(this,ns,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${u(this,Mn).id}`;const h=100,d=u(this,Mn)._uiManager._signal;d.addEventListener("abort",()=>{clearTimeout(u(this,Vn)),S(this,Vn,null)},{once:!0}),e.addEventListener("mouseenter",()=>{S(this,Vn,setTimeout(()=>{S(this,Vn,null),u(this,ns).classList.add("show"),u(this,Mn)._reportTelemetry({action:"alt_text_tooltip"})},h))},{signal:d}),e.addEventListener("mouseleave",()=>{var p;u(this,Vn)&&(clearTimeout(u(this,Vn)),S(this,Vn,null)),(p=u(this,ns))==null||p.classList.remove("show")},{signal:d})}u(this,ts)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=u(this,Vt)),t.parentNode||e.append(t);const n=u(this,Mn).getImageForAltText();n==null||n.setAttribute("aria-describedby",t.id)},T(wn,Br,null),Pe(wn,"_l10n",null);let yp=wn;var Vo,Mi,dt,Nl,Go,Qt,qo,zr,sh,Xo,Hr,rh,Ko,Ds,rs,jl,Bl,ui,oh,Cp,Oe,Ry,ah,Py,Ly,pE,gE,My,Iy,Fy,mE,Dy,yE,vE,wE,Oy,_u;const Ge=class Ge{constructor(e){T(this,Oe);T(this,Vo,null);T(this,Mi,null);T(this,dt,null);T(this,Nl,!1);T(this,Go,!1);T(this,Qt,null);T(this,qo,null);T(this,zr,null);T(this,sh,"");T(this,Xo,!1);T(this,Hr,null);T(this,rh,!1);T(this,Ko,!1);T(this,Ds,!1);T(this,rs,null);T(this,jl,0);T(this,Bl,0);T(this,ui,null);Pe(this,"_editToolbar",null);Pe(this,"_initialOptions",Object.create(null));Pe(this,"_initialData",null);Pe(this,"_isVisible",!0);Pe(this,"_uiManager",null);Pe(this,"_focusEventsAllowed",!0);T(this,oh,!1);T(this,Cp,Ge._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:n,pageHeight:r,pageX:o,pageY:l}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,r],this.pageTranslation=[o,l];const[h,d]=this.parentDimensions;this.x=e.x/h,this.y=e.y/d,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=Ge.prototype._resizeWithKeyboard,t=Da.TRANSLATE_SMALL,n=Da.TRANSLATE_BIG;return Ue(this,"_resizerKeyboardManager",new hd([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,n]}],[["Escape","mac+Escape"],Ge.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return Ue(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new HR({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(Ge._l10n??(Ge._l10n=e),Ge._l10nResizer||(Ge._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),Ge._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);Ge._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){rt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return u(this,oh)}set _isDraggable(e){var t;S(this,oh,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=u(this,Cp)}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):x(this,Oe,_u).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(u(this,Xo)?S(this,Xo,!1):this.parent.setSelected(this))}focusout(e){var n;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(n=this.parent)!=null&&n.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,n,r){const[o,l]=this.parentDimensions;[n,r]=this.screenToPageTranslation(n,r),this.x=(e+n)/o,this.y=(t+r)/l,this.fixAndSetPosition()}translate(e,t){x(this,Oe,Ry).call(this,this.parentDimensions,e,t)}translateInPage(e,t){u(this,Hr)||S(this,Hr,[this.x,this.y]),x(this,Oe,Ry).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}drag(e,t){u(this,Hr)||S(this,Hr,[this.x,this.y]);const[n,r]=this.parentDimensions;if(this.x+=e/n,this.y+=t/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:p,y:g}=this.div.getBoundingClientRect();this.parent.findNewParent(this,p,g)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:l}=this;const[h,d]=this.getBaseTranslation();o+=h,l+=d,this.div.style.left=`${(100*o).toFixed(2)}%`,this.div.style.top=`${(100*l).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!u(this,Hr)&&(u(this,Hr)[0]!==this.x||u(this,Hr)[1]!==this.y)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:n}=Ge,r=n/e,o=n/t;switch(this.rotation){case 90:return[-r,o];case 180:return[r,o];case 270:return[r,-o];default:return[-r,-o]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const[t,n]=this.pageDimensions;let{x:r,y:o,width:l,height:h}=this;if(l*=t,h*=n,r*=t,o*=n,this._mustFixPosition)switch(e){case 0:r=Math.max(0,Math.min(t-l,r)),o=Math.max(0,Math.min(n-h,o));break;case 90:r=Math.max(0,Math.min(t-h,r)),o=Math.min(n,Math.max(l,o));break;case 180:r=Math.min(t,Math.max(l,r)),o=Math.min(n,Math.max(h,o));break;case 270:r=Math.min(t,Math.max(h,r)),o=Math.max(0,Math.min(n-l,o));break}this.x=r/=t,this.y=o/=n;const[d,p]=this.getBaseTranslation();r+=d,o+=p;const{style:g}=this.div;g.left=`${(100*r).toFixed(2)}%`,g.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var n;return x(n=Ge,ah,Py).call(n,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var n;return x(n=Ge,ah,Py).call(n,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,n]}=this;return[t*e,n*e]}setDims(e,t){const[n,r]=this.parentDimensions;this.div.style.width=`${(100*e/n).toFixed(2)}%`,u(this,Go)||(this.div.style.height=`${(100*t/r).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:n}=e,r=n.endsWith("%"),o=!u(this,Go)&&t.endsWith("%");if(r&&o)return;const[l,h]=this.parentDimensions;r||(e.width=`${(100*parseFloat(n)/l).toFixed(2)}%`),!u(this,Go)&&!o&&(e.height=`${(100*parseFloat(t)/h).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}altTextFinish(){var e;(e=u(this,dt))==null||e.finish()}async addEditToolbar(){return this._editToolbar||u(this,Ko)?this._editToolbar:(this._editToolbar=new wy(this),this.div.append(this._editToolbar.render()),u(this,dt)&&await this._editToolbar.addAltText(u(this,dt)),this._editToolbar)}removeEditToolbar(){var e;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(e=u(this,dt))==null||e.destroy())}addContainer(e){var n;const t=(n=this._editToolbar)==null?void 0:n.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){u(this,dt)||(yp.initialize(Ge._l10n),S(this,dt,new yp(this)),u(this,Vo)&&(u(this,dt).data=u(this,Vo),S(this,Vo,null)),await this.addEditToolbar())}get altTextData(){var e;return(e=u(this,dt))==null?void 0:e.data}set altTextData(e){u(this,dt)&&(u(this,dt).data=e)}get guessedAltText(){var e;return(e=u(this,dt))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=u(this,dt))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=u(this,dt))==null?void 0:t.serialize(e)}hasAltText(){return!!u(this,dt)&&!u(this,dt).isEmpty()}hasAltTextData(){var e;return((e=u(this,dt))==null?void 0:e.hasData())??!1}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=u(this,Nl)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),x(this,Oe,Dy).call(this);const[e,t]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*t/e).toFixed(2)}%`,this.div.style.maxHeight=`${(100*e/t).toFixed(2)}%`);const[n,r]=this.getInitialTranslation();return this.translate(n,r),mp(this,this.div,["pointerdown"]),this.div}pointerdown(e){const{isMac:t}=bn.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(S(this,Xo,!0),this._isDraggable){x(this,Oe,mE).call(this,e);return}x(this,Oe,Fy).call(this,e)}get isSelected(){return this._uiManager.isSelected(this)}moveInDOM(){u(this,rs)&&clearTimeout(u(this,rs)),S(this,rs,setTimeout(()=>{var e;S(this,rs,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,n){e.changeParent(this),this.x=t,this.y=n,this.fixAndSetPosition()}getRect(e,t,n=this.rotation){const r=this.parentScale,[o,l]=this.pageDimensions,[h,d]=this.pageTranslation,p=e/r,g=t/r,y=this.x*o,v=this.y*l,b=this.width*o,A=this.height*l;switch(n){case 0:return[y+p+h,l-v-g-A+d,y+p+b+h,l-v-g+d];case 90:return[y+g+h,l-v+p+d,y+g+A+h,l-v+p+b+d];case 180:return[y-p-b+h,l-v+g+d,y-p+h,l-v+g+A+d];case 270:return[y-g-A+h,l-v-p-b+d,y-g+h,l-v-p+d];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[n,r,o,l]=e,h=o-n,d=l-r;switch(this.rotation){case 0:return[n,t-l,h,d];case 90:return[n,t-r,d,h];case 180:return[o,t-r,h,d];case 270:return[o,t-l,d,h];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){S(this,Ko,!0)}disableEditMode(){S(this,Ko,!1)}isInEditMode(){return u(this,Ko)}shouldGetKeyboardEvents(){return u(this,Ds)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){x(this,Oe,Dy).call(this)}rotate(e){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){rt("An editor must be serializable")}static async deserialize(e,t,n){const r=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:n});r.rotation=e.rotation,S(r,Vo,e.accessibilityData);const[o,l]=r.pageDimensions,[h,d,p,g]=r.getRectInCurrentCoords(e.rect,l);return r.x=h/o,r.y=d/l,r.width=p/o,r.height=g/l,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e;if((e=u(this,zr))==null||e.abort(),S(this,zr,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),u(this,rs)&&(clearTimeout(u(this,rs)),S(this,rs,null)),x(this,Oe,_u).call(this),this.removeEditToolbar(),u(this,ui)){for(const t of u(this,ui).values())clearTimeout(t);S(this,ui,null)}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(x(this,Oe,pE).call(this),u(this,Qt).classList.remove("hidden"),mp(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),S(this,qo,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=u(this,Qt).children;if(!u(this,Mi)){S(this,Mi,Array.from(t));const l=x(this,Oe,yE).bind(this),h=x(this,Oe,vE).bind(this),d=this._uiManager._signal;for(const p of u(this,Mi)){const g=p.getAttribute("data-resizer-name");p.setAttribute("role","spinbutton"),p.addEventListener("keydown",l,{signal:d}),p.addEventListener("blur",h,{signal:d}),p.addEventListener("focus",x(this,Oe,wE).bind(this,g),{signal:d}),p.setAttribute("data-l10n-id",Ge._l10nResizer[g])}}const n=u(this,Mi)[0];let r=0;for(const l of t){if(l===n)break;r++}const o=(360-this.rotation+this.parentRotation)%360/90*(u(this,Mi).length/4);if(o!==r){if(o<r)for(let h=0;h<r-o;h++)u(this,Qt).append(u(this,Qt).firstChild);else if(o>r)for(let h=0;h<o-r;h++)u(this,Qt).firstChild.before(u(this,Qt).lastChild);let l=0;for(const h of t){const p=u(this,Mi)[l++].getAttribute("data-resizer-name");h.setAttribute("data-l10n-id",Ge._l10nResizer[p])}}x(this,Oe,Oy).call(this,0),S(this,Ds,!0),u(this,Qt).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){u(this,Ds)&&x(this,Oe,Iy).call(this,u(this,sh),{movementX:e,movementY:t})}_stopResizingWithKeyboard(){x(this,Oe,_u).call(this),this.div.focus()}select(){var e,t,n;if(this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var r,o;(r=this.div)!=null&&r.classList.contains("selectedEditor")&&((o=this._editToolbar)==null||o.show())});return}(t=this._editToolbar)==null||t.show(),(n=u(this,dt))==null||n.toggleAltTextBadge(!1)}unselect(){var e,t,n,r,o;(e=u(this,Qt))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(n=this.div)!=null&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(r=this._editToolbar)==null||r.hide(),(o=u(this,dt))==null||o.toggleAltTextBadge(!0)}updateParams(e,t){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return u(this,rh)}set isEditing(e){S(this,rh,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){S(this,Go,!0);const n=e/t,{style:r}=this.div;r.aspectRatio=n,r.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){u(this,ui)||S(this,ui,new Map);const{action:n}=e;let r=u(this,ui).get(n);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(e),u(this,ui).delete(n),u(this,ui).size===0&&S(this,ui,null)},Ge._telemetryTimeout),u(this,ui).set(n,r);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),S(this,Nl,!1)}disable(){this.div&&(this.div.tabIndex=-1),S(this,Nl,!0)}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const n=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),n.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};Vo=new WeakMap,Mi=new WeakMap,dt=new WeakMap,Nl=new WeakMap,Go=new WeakMap,Qt=new WeakMap,qo=new WeakMap,zr=new WeakMap,sh=new WeakMap,Xo=new WeakMap,Hr=new WeakMap,rh=new WeakMap,Ko=new WeakMap,Ds=new WeakMap,rs=new WeakMap,jl=new WeakMap,Bl=new WeakMap,ui=new WeakMap,oh=new WeakMap,Cp=new WeakMap,Oe=new WeakSet,Ry=function([e,t],n,r){[n,r]=this.screenToPageTranslation(n,r),this.x+=n/e,this.y+=r/t,this.fixAndSetPosition()},ah=new WeakSet,Py=function(e,t,n){switch(n){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},Ly=function(e){switch(e){case 90:{const[t,n]=this.pageDimensions;return[0,-t/n,n/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,n]=this.pageDimensions;return[0,t/n,-n/t,0]}default:return[1,0,0,1]}},pE=function(){if(u(this,Qt))return;S(this,Qt,document.createElement("div")),u(this,Qt).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const n of e){const r=document.createElement("div");u(this,Qt).append(r),r.classList.add("resizer",n),r.setAttribute("data-resizer-name",n),r.addEventListener("pointerdown",x(this,Oe,gE).bind(this,n),{signal:t}),r.addEventListener("contextmenu",yi,{signal:t}),r.tabIndex=-1}this.div.prepend(u(this,Qt))},gE=function(e,t){var A;t.preventDefault();const{isMac:n}=bn.platform;if(t.button!==0||t.ctrlKey&&n)return;(A=u(this,dt))==null||A.toggle(!1);const r=this._isDraggable;this._isDraggable=!1;const o=new AbortController,l=this._uiManager.combinedSignal(o);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",x(this,Oe,Iy).bind(this,e),{passive:!0,capture:!0,signal:l}),window.addEventListener("contextmenu",yi,{signal:l});const h=this.x,d=this.y,p=this.width,g=this.height,y=this.parent.div.style.cursor,v=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const b=()=>{var E;o.abort(),this.parent.togglePointerEvents(!0),(E=u(this,dt))==null||E.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=y,this.div.style.cursor=v,x(this,Oe,My).call(this,h,d,p,g)};window.addEventListener("pointerup",b,{signal:l}),window.addEventListener("blur",b,{signal:l})},My=function(e,t,n,r){const o=this.x,l=this.y,h=this.width,d=this.height;o===e&&l===t&&h===n&&d===r||this.addCommands({cmd:()=>{this.width=h,this.height=d,this.x=o,this.y=l;const[p,g]=this.parentDimensions;this.setDims(p*h,g*d),this.fixAndSetPosition()},undo:()=>{this.width=n,this.height=r,this.x=e,this.y=t;const[p,g]=this.parentDimensions;this.setDims(p*n,g*r),this.fixAndSetPosition()},mustExec:!0})},Iy=function(e,t){const[n,r]=this.parentDimensions,o=this.x,l=this.y,h=this.width,d=this.height,p=Ge.MIN_SIZE/n,g=Ge.MIN_SIZE/r,y=Z=>Math.round(Z*1e4)/1e4,v=x(this,Oe,Ly).call(this,this.rotation),b=(Z,V)=>[v[0]*Z+v[2]*V,v[1]*Z+v[3]*V],A=x(this,Oe,Ly).call(this,360-this.rotation),E=(Z,V)=>[A[0]*Z+A[2]*V,A[1]*Z+A[3]*V];let C,k,L=!1,M=!1;switch(e){case"topLeft":L=!0,C=(Z,V)=>[0,0],k=(Z,V)=>[Z,V];break;case"topMiddle":C=(Z,V)=>[Z/2,0],k=(Z,V)=>[Z/2,V];break;case"topRight":L=!0,C=(Z,V)=>[Z,0],k=(Z,V)=>[0,V];break;case"middleRight":M=!0,C=(Z,V)=>[Z,V/2],k=(Z,V)=>[0,V/2];break;case"bottomRight":L=!0,C=(Z,V)=>[Z,V],k=(Z,V)=>[0,0];break;case"bottomMiddle":C=(Z,V)=>[Z/2,V],k=(Z,V)=>[Z/2,0];break;case"bottomLeft":L=!0,C=(Z,V)=>[0,V],k=(Z,V)=>[Z,0];break;case"middleLeft":M=!0,C=(Z,V)=>[0,V/2],k=(Z,V)=>[Z,V/2];break}const F=C(h,d),z=k(h,d);let U=b(...z);const N=y(o+U[0]),q=y(l+U[1]);let J=1,se=1,[ne,be]=this.screenToPageTranslation(t.movementX,t.movementY);if([ne,be]=E(ne/n,be/r),L){const Z=Math.hypot(h,d);J=se=Math.max(Math.min(Math.hypot(z[0]-F[0]-ne,z[1]-F[1]-be)/Z,1/h,1/d),p/h,g/d)}else M?J=Math.max(p,Math.min(1,Math.abs(z[0]-F[0]-ne)))/h:se=Math.max(g,Math.min(1,Math.abs(z[1]-F[1]-be)))/d;const de=y(h*J),ce=y(d*se);U=b(...k(de,ce));const me=N-U[0],le=q-U[1];this.width=de,this.height=ce,this.x=me,this.y=le,this.setDims(n*de,r*ce),this.fixAndSetPosition()},Fy=function(e){const{isMac:t}=bn.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},mE=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();const n=new AbortController,r=this._uiManager.combinedSignal(n);if(t){this.div.classList.add("moving"),S(this,jl,e.clientX),S(this,Bl,e.clientY);const l=h=>{const{clientX:d,clientY:p}=h,[g,y]=this.screenToPageTranslation(d-u(this,jl),p-u(this,Bl));S(this,jl,d),S(this,Bl,p),this._uiManager.dragSelectedEditors(g,y)};window.addEventListener("pointermove",l,{passive:!0,capture:!0,signal:r})}const o=()=>{n.abort(),t&&this.div.classList.remove("moving"),S(this,Xo,!1),this._uiManager.endDragSession()||x(this,Oe,Fy).call(this,e)};window.addEventListener("pointerup",o,{signal:r}),window.addEventListener("blur",o,{signal:r})},Dy=function(){if(u(this,zr)||!this.div)return;S(this,zr,new AbortController);const e=this._uiManager.combinedSignal(u(this,zr));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},yE=function(e){Ge._resizerKeyboardManager.exec(this,e)},vE=function(e){var t;u(this,Ds)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==u(this,Qt)&&x(this,Oe,_u).call(this)},wE=function(e){S(this,sh,u(this,Ds)?e:"")},Oy=function(e){if(u(this,Mi))for(const t of u(this,Mi))t.tabIndex=e},_u=function(){if(S(this,Ds,!1),x(this,Oe,Oy).call(this,-1),u(this,qo)){const{savedX:e,savedY:t,savedWidth:n,savedHeight:r}=u(this,qo);x(this,Oe,My).call(this,e,t,n,r),S(this,qo,null)}},T(Ge,ah),Pe(Ge,"_l10n",null),Pe(Ge,"_l10nResizer",null),Pe(Ge,"_borderLineWidth",-1),Pe(Ge,"_colorManager",new Sy),Pe(Ge,"_zIndex",1),Pe(Ge,"_telemetryTimeout",1e3);let Ye=Ge;class HR extends Ye{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const Ib=3285377520,li=4294901760,Yi=65535;class AE{constructor(e){this.h1=e?e&4294967295:Ib,this.h2=e?e&4294967295:Ib}update(e){let t,n;if(typeof e=="string"){t=new Uint8Array(e.length*2),n=0;for(let E=0,C=e.length;E<C;E++){const k=e.charCodeAt(E);k<=255?t[n++]=k:(t[n++]=k>>>8,t[n++]=k&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),n=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=n>>2,o=n-r*4,l=new Uint32Array(t.buffer,0,r);let h=0,d=0,p=this.h1,g=this.h2;const y=3432918353,v=461845907,b=y&Yi,A=v&Yi;for(let E=0;E<r;E++)E&1?(h=l[E],h=h*y&li|h*b&Yi,h=h<<15|h>>>17,h=h*v&li|h*A&Yi,p^=h,p=p<<13|p>>>19,p=p*5+3864292196):(d=l[E],d=d*y&li|d*b&Yi,d=d<<15|d>>>17,d=d*v&li|d*A&Yi,g^=d,g=g<<13|g>>>19,g=g*5+3864292196);switch(h=0,o){case 3:h^=t[r*4+2]<<16;case 2:h^=t[r*4+1]<<8;case 1:h^=t[r*4],h=h*y&li|h*b&Yi,h=h<<15|h>>>17,h=h*v&li|h*A&Yi,r&1?p^=h:g^=h}this.h1=p,this.h2=g}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&li|e*36045&Yi,t=t*4283543511&li|((t<<16|e>>>16)*2950163797&li)>>>16,e^=t>>>1,e=e*444984403&li|e*60499&Yi,t=t*3301882366&li|((t<<16|e>>>16)*3120437893&li)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const Ny=Object.freeze({map:null,hash:"",transfer:void 0});var Yo,Qo,Gt,Tp,bE;class Qv{constructor(){T(this,Tp);T(this,Yo,!1);T(this,Qo,null);T(this,Gt,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const n=u(this,Gt).get(e);return n===void 0?t:Object.assign(t,n)}getRawValue(e){return u(this,Gt).get(e)}remove(e){if(u(this,Gt).delete(e),u(this,Gt).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of u(this,Gt).values())if(t instanceof Ye)return;this.onAnnotationEditor(null)}}setValue(e,t){const n=u(this,Gt).get(e);let r=!1;if(n!==void 0)for(const[o,l]of Object.entries(t))n[o]!==l&&(r=!0,n[o]=l);else r=!0,u(this,Gt).set(e,t);r&&x(this,Tp,bE).call(this),t instanceof Ye&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return u(this,Gt).has(e)}getAll(){return u(this,Gt).size>0?Vv(u(this,Gt)):null}setAll(e){for(const[t,n]of Object.entries(e))this.setValue(t,n)}get size(){return u(this,Gt).size}resetModified(){u(this,Yo)&&(S(this,Yo,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new SE(this)}get serializable(){if(u(this,Gt).size===0)return Ny;const e=new Map,t=new AE,n=[],r=Object.create(null);let o=!1;for(const[l,h]of u(this,Gt)){const d=h instanceof Ye?h.serialize(!1,r):h;d&&(e.set(l,d),t.update(`${l}:${JSON.stringify(d)}`),o||(o=!!d.bitmap))}if(o)for(const l of e.values())l.bitmap&&n.push(l.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:n}:Ny}get editorStats(){let e=null;const t=new Map;for(const n of u(this,Gt).values()){if(!(n instanceof Ye))continue;const r=n.telemetryFinalData;if(!r)continue;const{type:o}=r;t.has(o)||t.set(o,Object.getPrototypeOf(n).constructor),e||(e=Object.create(null));const l=e[o]||(e[o]=new Map);for(const[h,d]of Object.entries(r)){if(h==="type")continue;let p=l.get(h);p||(p=new Map,l.set(h,p));const g=p.get(d)??0;p.set(d,g+1)}}for(const[n,r]of t)e[n]=r.computeTelemetryFinalData(e[n]);return e}resetModifiedIds(){S(this,Qo,null)}get modifiedIds(){if(u(this,Qo))return u(this,Qo);const e=[];for(const t of u(this,Gt).values())!(t instanceof Ye)||!t.annotationElementId||!t.serialize()||e.push(t.annotationElementId);return S(this,Qo,{ids:new Set(e),hash:e.join(",")})}}Yo=new WeakMap,Qo=new WeakMap,Gt=new WeakMap,Tp=new WeakSet,bE=function(){u(this,Yo)||(S(this,Yo,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var lh;class SE extends Qv{constructor(t){super();T(this,lh);const{map:n,hash:r,transfer:o}=t.serializable,l=structuredClone(n,o?{transfer:o}:null);S(this,lh,{map:l,hash:r,transfer:o})}get print(){rt("Should not call PrintAnnotationStorage.print")}get serializable(){return u(this,lh)}get modifiedIds(){return Ue(this,"modifiedIds",{ids:new Set,hash:""})}}lh=new WeakMap;var zl;class UR{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){T(this,zl,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),u(this,zl).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,_inspectFont:t}){if(!(!e||u(this,zl).has(e.loadedName))){if(Ot(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:n,src:r,style:o}=e,l=new FontFace(n,r,o);this.addNativeFontFace(l);try{await l.load(),u(this,zl).add(n),t==null||t(e)}catch{Ne(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(l)}return}rt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const n=e.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(r){throw Ne(`Failed to load font '${n.family}': '${r}'.`),e.disableFontFace=!0,r}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const r=this._queueLoadingCallback(n);this._prepareFontLoadEvent(e,r)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return Ue(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){let e=!1;return(pn||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),Ue(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){function t(){for(Ot(!r.done,"completeRequest() cannot be called twice."),r.done=!0;n.length>0&&n[0].done;){const o=n.shift();setTimeout(o.callback,0)}}const{loadingRequests:n}=this,r={done:!1,complete:t,callback:e};return n.push(r),r}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Ue(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function n(F,z){return F.charCodeAt(z)<<24|F.charCodeAt(z+1)<<16|F.charCodeAt(z+2)<<8|F.charCodeAt(z+3)&255}function r(F,z,U,N){const q=F.substring(0,z),J=F.substring(z+U);return q+N+J}let o,l;const h=this._document.createElement("canvas");h.width=1,h.height=1;const d=h.getContext("2d");let p=0;function g(F,z){if(++p>30){Ne("Load test font never loaded."),z();return}if(d.font="30px "+F,d.fillText(".",0,20),d.getImageData(0,0,1,1).data[3]>0){z();return}setTimeout(g.bind(null,F,z))}const y=`lt${Date.now()}${this.loadTestFontId++}`;let v=this._loadTestFont;v=r(v,976,y.length,y);const A=16,E=1482184792;let C=n(v,A);for(o=0,l=y.length-3;o<l;o+=4)C=C-E+n(y,o)|0;o<y.length&&(C=C-E+n(y+"XXX",o)|0),v=r(v,A,4,CR(C));const k=`url(data:font/opentype;base64,${btoa(v)});`,L=`@font-face {font-family:"${y}";src:${k}}`;this.insertRule(L);const M=this._document.createElement("div");M.style.visibility="hidden",M.style.width=M.style.height="10px",M.style.position="absolute",M.style.top=M.style.left="0px";for(const F of[e.loadedName,y]){const z=this._document.createElement("span");z.textContent="Hi",z.style.fontFamily=F,M.append(z)}this._document.body.append(M),g(y,()=>{M.remove(),t.complete()})}}zl=new WeakMap;class $R{constructor(e,{disableFontFace:t=!1,inspectFont:n=null}){this.compiledGlyphs=Object.create(null);for(const r in e)this[r]=e[r];this.disableFontFace=t===!0,this._inspectFont=n}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var n;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${MR(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${e}}`}return(n=this._inspectFont)==null||n.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];let n;try{n=e.get(this.loadedName+"_path_"+t)}catch(o){Ne(`getPathGenerator - ignoring character: "${o}".`)}if(!Array.isArray(n)||n.length===0)return this.compiledGlyphs[t]=function(o,l){};const r=[];for(let o=0,l=n.length;o<l;)switch(n[o++]){case Cs.BEZIER_CURVE_TO:{const[h,d,p,g,y,v]=n.slice(o,o+6);r.push(b=>b.bezierCurveTo(h,d,p,g,y,v)),o+=6}break;case Cs.MOVE_TO:{const[h,d]=n.slice(o,o+2);r.push(p=>p.moveTo(h,d)),o+=2}break;case Cs.LINE_TO:{const[h,d]=n.slice(o,o+2);r.push(p=>p.lineTo(h,d)),o+=2}break;case Cs.QUADRATIC_CURVE_TO:{const[h,d,p,g]=n.slice(o,o+4);r.push(y=>y.quadraticCurveTo(h,d,p,g)),o+=4}break;case Cs.RESTORE:r.push(h=>h.restore());break;case Cs.SAVE:r.push(h=>h.save());break;case Cs.SCALE:Ot(r.length===2,"Scale command is only valid at the third position.");break;case Cs.TRANSFORM:{const[h,d,p,g,y,v]=n.slice(o,o+6);r.push(b=>b.transform(h,d,p,g,y,v)),o+=6}break;case Cs.TRANSLATE:{const[h,d]=n.slice(o,o+2);r.push(p=>p.translate(h,d)),o+=2}break}return this.compiledGlyphs[t]=function(l,h){r[0](l),r[1](l),l.scale(h,-h);for(let d=2,p=r.length;d<p;d++)r[d](l)}}}var ch;class EE{constructor({enableHWA:e=!1}){T(this,ch,!1);S(this,ch,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(e,t);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!u(this,ch)})}}reset(e,t,n){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||n<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=n}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){rt("Abstract method `_createCanvas` called.")}}ch=new WeakMap;class WR extends EE{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const n=this._document.createElement("canvas");return n.width=e,n.height=t,n}}class _E{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){rt("Abstract method `_fetch` called.")}}class xE extends _E{async _fetch(e){const t=await Kp(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):Xp(t)}}class CE{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,n,r,o){return"none"}destroy(e=!1){}}var Jo,Zo,os,Os,cn,kp,ea,he,an,pl,gl,Wf,ml,TE,jy,yl,xu,Cu,By,Tu;class VR extends CE{constructor({docId:t,ownerDocument:n=globalThis.document}){super();T(this,he);T(this,Jo);T(this,Zo);T(this,os);T(this,Os);T(this,cn);T(this,kp);T(this,ea,0);S(this,Os,t),S(this,cn,n)}addFilter(t){if(!t)return"none";let n=u(this,he,an).get(t);if(n)return n;const[r,o,l]=x(this,he,Wf).call(this,t),h=t.length===1?r:`${r}${o}${l}`;if(n=u(this,he,an).get(h),n)return u(this,he,an).set(t,n),n;const d=`g_${u(this,Os)}_transfer_map_${yn(this,ea)._++}`,p=x(this,he,ml).call(this,d);u(this,he,an).set(t,p),u(this,he,an).set(h,p);const g=x(this,he,yl).call(this,d);return x(this,he,Cu).call(this,r,o,l,g),p}addHCMFilter(t,n){var A;const r=`${t}-${n}`,o="base";let l=u(this,he,pl).get(o);if((l==null?void 0:l.key)===r||(l?((A=l.filter)==null||A.remove(),l.key=r,l.url="none",l.filter=null):(l={key:r,url:"none",filter:null},u(this,he,pl).set(o,l)),!t||!n))return l.url;const h=x(this,he,Tu).call(this,t);t=Ae.makeHexColor(...h);const d=x(this,he,Tu).call(this,n);if(n=Ae.makeHexColor(...d),u(this,he,gl).style.color="",t==="#000000"&&n==="#ffffff"||t===n)return l.url;const p=new Array(256);for(let E=0;E<=255;E++){const C=E/255;p[E]=C<=.03928?C/12.92:((C+.055)/1.055)**2.4}const g=p.join(","),y=`g_${u(this,Os)}_hcm_filter`,v=l.filter=x(this,he,yl).call(this,y);x(this,he,Cu).call(this,g,g,g,v),x(this,he,jy).call(this,v);const b=(E,C)=>{const k=h[E]/255,L=d[E]/255,M=new Array(C+1);for(let F=0;F<=C;F++)M[F]=k+F/C*(L-k);return M.join(",")};return x(this,he,Cu).call(this,b(0,5),b(1,5),b(2,5),v),l.url=x(this,he,ml).call(this,y),l.url}addAlphaFilter(t){let n=u(this,he,an).get(t);if(n)return n;const[r]=x(this,he,Wf).call(this,[t]),o=`alpha_${r}`;if(n=u(this,he,an).get(o),n)return u(this,he,an).set(t,n),n;const l=`g_${u(this,Os)}_alpha_map_${yn(this,ea)._++}`,h=x(this,he,ml).call(this,l);u(this,he,an).set(t,h),u(this,he,an).set(o,h);const d=x(this,he,yl).call(this,l);return x(this,he,By).call(this,r,d),h}addLuminosityFilter(t){let n=u(this,he,an).get(t||"luminosity");if(n)return n;let r,o;if(t?([r]=x(this,he,Wf).call(this,[t]),o=`luminosity_${r}`):o="luminosity",n=u(this,he,an).get(o),n)return u(this,he,an).set(t,n),n;const l=`g_${u(this,Os)}_luminosity_map_${yn(this,ea)._++}`,h=x(this,he,ml).call(this,l);u(this,he,an).set(t,h),u(this,he,an).set(o,h);const d=x(this,he,yl).call(this,l);return x(this,he,TE).call(this,d),t&&x(this,he,By).call(this,r,d),h}addHighlightHCMFilter(t,n,r,o,l){var L;const h=`${n}-${r}-${o}-${l}`;let d=u(this,he,pl).get(t);if((d==null?void 0:d.key)===h||(d?((L=d.filter)==null||L.remove(),d.key=h,d.url="none",d.filter=null):(d={key:h,url:"none",filter:null},u(this,he,pl).set(t,d)),!n||!r))return d.url;const[p,g]=[n,r].map(x(this,he,Tu).bind(this));let y=Math.round(.2126*p[0]+.7152*p[1]+.0722*p[2]),v=Math.round(.2126*g[0]+.7152*g[1]+.0722*g[2]),[b,A]=[o,l].map(x(this,he,Tu).bind(this));v<y&&([y,v,b,A]=[v,y,A,b]),u(this,he,gl).style.color="";const E=(M,F,z)=>{const U=new Array(256),N=(v-y)/z,q=M/255,J=(F-M)/(255*z);let se=0;for(let ne=0;ne<=z;ne++){const be=Math.round(y+ne*N),de=q+ne*J;for(let ce=se;ce<=be;ce++)U[ce]=de;se=be+1}for(let ne=se;ne<256;ne++)U[ne]=U[se-1];return U.join(",")},C=`g_${u(this,Os)}_hcm_${t}_filter`,k=d.filter=x(this,he,yl).call(this,C);return x(this,he,jy).call(this,k),x(this,he,Cu).call(this,E(b[0],A[0],5),E(b[1],A[1],5),E(b[2],A[2],5),k),d.url=x(this,he,ml).call(this,C),d.url}destroy(t=!1){t&&u(this,he,pl).size!==0||(u(this,os)&&(u(this,os).parentNode.parentNode.remove(),S(this,os,null)),u(this,Zo)&&(u(this,Zo).clear(),S(this,Zo,null)),S(this,ea,0))}}Jo=new WeakMap,Zo=new WeakMap,os=new WeakMap,Os=new WeakMap,cn=new WeakMap,kp=new WeakMap,ea=new WeakMap,he=new WeakSet,an=function(){return u(this,Zo)||S(this,Zo,new Map)},pl=function(){return u(this,kp)||S(this,kp,new Map)},gl=function(){if(!u(this,os)){const t=u(this,cn).createElement("div"),{style:n}=t;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const r=u(this,cn).createElementNS(ks,"svg");r.setAttribute("width",0),r.setAttribute("height",0),S(this,os,u(this,cn).createElementNS(ks,"defs")),t.append(r),r.append(u(this,os)),u(this,cn).body.append(t)}return u(this,os)},Wf=function(t){if(t.length===1){const p=t[0],g=new Array(256);for(let v=0;v<256;v++)g[v]=p[v]/255;const y=g.join(",");return[y,y,y]}const[n,r,o]=t,l=new Array(256),h=new Array(256),d=new Array(256);for(let p=0;p<256;p++)l[p]=n[p]/255,h[p]=r[p]/255,d[p]=o[p]/255;return[l.join(","),h.join(","),d.join(",")]},ml=function(t){if(u(this,Jo)===void 0){S(this,Jo,"");const n=u(this,cn).URL;n!==u(this,cn).baseURI&&(Yp(n)?Ne('#createUrl: ignore "data:"-URL for performance reasons.'):S(this,Jo,n.split("#",1)[0]))}return`url(${u(this,Jo)}#${t})`},TE=function(t){const n=u(this,cn).createElementNS(ks,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(n)},jy=function(t){const n=u(this,cn).createElementNS(ks,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(n)},yl=function(t){const n=u(this,cn).createElementNS(ks,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",t),u(this,he,gl).append(n),n},xu=function(t,n,r){const o=u(this,cn).createElementNS(ks,n);o.setAttribute("type","discrete"),o.setAttribute("tableValues",r),t.append(o)},Cu=function(t,n,r,o){const l=u(this,cn).createElementNS(ks,"feComponentTransfer");o.append(l),x(this,he,xu).call(this,l,"feFuncR",t),x(this,he,xu).call(this,l,"feFuncG",n),x(this,he,xu).call(this,l,"feFuncB",r)},By=function(t,n){const r=u(this,cn).createElementNS(ks,"feComponentTransfer");n.append(r),x(this,he,xu).call(this,r,"feFuncA",t)},Tu=function(t){return u(this,he,gl).style.color=t,Yv(getComputedStyle(u(this,he,gl)).getPropertyValue("color"))};class kE{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(n=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){rt("Abstract method `_fetch` called.")}}class RE extends kE{async _fetch(e){const t=await Kp(e,"arraybuffer");return new Uint8Array(t)}}if(pn){var zy=Promise.withResolvers(),ju=null;(async()=>{const e=await kf(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),t=await kf(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),n=await kf(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),r=await kf(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]);let o,l;return new Map(Object.entries({fs:e,http:t,https:n,url:r,canvas:o,path2d:l}))})().then(e=>{ju=e,zy.resolve()},e=>{Ne(`loadPackages: ${e}`),ju=new Map,zy.resolve()})}class ao{static get promise(){return zy.promise}static get(e){return ju==null?void 0:ju.get(e)}}async function PE(a){const t=await ao.get("fs").promises.readFile(a);return new Uint8Array(t)}class GR extends CE{}class qR extends EE{_createCanvas(e,t){return ao.get("canvas").createCanvas(e,t)}}class XR extends _E{async _fetch(e){return PE(e)}}class KR extends kE{async _fetch(e){return PE(e)}}const An={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Hy(a,e){if(!e)return;const t=e[2]-e[0],n=e[3]-e[1],r=new Path2D;r.rect(e[0],e[1],t,n),a.clip(r)}class Jv{getPattern(){rt("Abstract method `getPattern` called.")}}class YR extends Jv{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)t.addColorStop(n[0],n[1]);return t}getPattern(e,t,n,r){let o;if(r===An.STROKE||r===An.FILL){const l=t.current.getClippedPathBoundingBox(r,pt(e))||[0,0,0,0],h=Math.ceil(l[2]-l[0])||1,d=Math.ceil(l[3]-l[1])||1,p=t.cachedCanvases.getCanvas("pattern",h,d),g=p.context;g.clearRect(0,0,g.canvas.width,g.canvas.height),g.beginPath(),g.rect(0,0,g.canvas.width,g.canvas.height),g.translate(-l[0],-l[1]),n=Ae.transform(n,[1,0,0,1,l[0],l[1]]),g.transform(...t.baseTransform),this.matrix&&g.transform(...this.matrix),Hy(g,this._bbox),g.fillStyle=this._createGradient(g),g.fill(),o=e.createPattern(p.canvas,"no-repeat");const y=new DOMMatrix(n);o.setTransform(y)}else Hy(e,this._bbox),o=this._createGradient(e);return o}}function iy(a,e,t,n,r,o,l,h){const d=e.coords,p=e.colors,g=a.data,y=a.width*4;let v;d[t+1]>d[n+1]&&(v=t,t=n,n=v,v=o,o=l,l=v),d[n+1]>d[r+1]&&(v=n,n=r,r=v,v=l,l=h,h=v),d[t+1]>d[n+1]&&(v=t,t=n,n=v,v=o,o=l,l=v);const b=(d[t]+e.offsetX)*e.scaleX,A=(d[t+1]+e.offsetY)*e.scaleY,E=(d[n]+e.offsetX)*e.scaleX,C=(d[n+1]+e.offsetY)*e.scaleY,k=(d[r]+e.offsetX)*e.scaleX,L=(d[r+1]+e.offsetY)*e.scaleY;if(A>=L)return;const M=p[o],F=p[o+1],z=p[o+2],U=p[l],N=p[l+1],q=p[l+2],J=p[h],se=p[h+1],ne=p[h+2],be=Math.round(A),de=Math.round(L);let ce,me,le,Z,V,ae,te,D;for(let G=be;G<=de;G++){if(G<C){const Y=G<A?0:(A-G)/(A-C);ce=b-(b-E)*Y,me=M-(M-U)*Y,le=F-(F-N)*Y,Z=z-(z-q)*Y}else{let Y;G>L?Y=1:C===L?Y=0:Y=(C-G)/(C-L),ce=E-(E-k)*Y,me=U-(U-J)*Y,le=N-(N-se)*Y,Z=q-(q-ne)*Y}let oe;G<A?oe=0:G>L?oe=1:oe=(A-G)/(A-L),V=b-(b-k)*oe,ae=M-(M-J)*oe,te=F-(F-se)*oe,D=z-(z-ne)*oe;const we=Math.round(Math.min(ce,V)),Te=Math.round(Math.max(ce,V));let ye=y*G+we*4;for(let Y=we;Y<=Te;Y++)oe=(ce-Y)/(ce-V),oe<0?oe=0:oe>1&&(oe=1),g[ye++]=me-(me-ae)*oe|0,g[ye++]=le-(le-te)*oe|0,g[ye++]=Z-(Z-D)*oe|0,g[ye++]=255}}function QR(a,e,t){const n=e.coords,r=e.colors;let o,l;switch(e.type){case"lattice":const h=e.verticesPerRow,d=Math.floor(n.length/h)-1,p=h-1;for(o=0;o<d;o++){let g=o*h;for(let y=0;y<p;y++,g++)iy(a,t,n[g],n[g+1],n[g+h],r[g],r[g+1],r[g+h]),iy(a,t,n[g+h+1],n[g+1],n[g+h],r[g+h+1],r[g+1],r[g+h])}break;case"triangles":for(o=0,l=n.length;o<l;o+=3)iy(a,t,n[o],n[o+1],n[o+2],r[o],r[o+1],r[o+2]);break;default:throw new Error("illegal figure")}}class JR extends Jv{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,t,n){const h=Math.floor(this._bounds[0]),d=Math.floor(this._bounds[1]),p=Math.ceil(this._bounds[2])-h,g=Math.ceil(this._bounds[3])-d,y=Math.min(Math.ceil(Math.abs(p*e[0]*1.1)),3e3),v=Math.min(Math.ceil(Math.abs(g*e[1]*1.1)),3e3),b=p/y,A=g/v,E={coords:this._coords,colors:this._colors,offsetX:-h,offsetY:-d,scaleX:1/b,scaleY:1/A},C=y+4,k=v+4,L=n.getCanvas("mesh",C,k),M=L.context,F=M.createImageData(y,v);if(t){const U=F.data;for(let N=0,q=U.length;N<q;N+=4)U[N]=t[0],U[N+1]=t[1],U[N+2]=t[2],U[N+3]=255}for(const U of this._figures)QR(F,U,E);return M.putImageData(F,2,2),{canvas:L.canvas,offsetX:h-2*b,offsetY:d-2*A,scaleX:b,scaleY:A}}getPattern(e,t,n,r){Hy(e,this._bbox);let o;if(r===An.SHADING)o=Ae.singularValueDecompose2dScale(pt(e));else if(o=Ae.singularValueDecompose2dScale(t.baseTransform),this.matrix){const h=Ae.singularValueDecompose2dScale(this.matrix);o=[o[0]*h[0],o[1]*h[1]]}const l=this._createMeshCanvas(o,r===An.SHADING?null:this._background,t.cachedCanvases);return r!==An.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(l.offsetX,l.offsetY),e.scale(l.scaleX,l.scaleY),e.createPattern(l.canvas,"no-repeat")}}class ZR extends Jv{getPattern(){return"hotpink"}}function eP(a){switch(a[0]){case"RadialAxial":return new YR(a);case"Mesh":return new JR(a);case"Dummy":return new ZR}throw new Error(`Unknown IR type: ${a[0]}`)}const Fb={COLORED:1,UNCOLORED:2},Rp=class Rp{constructor(e,t,n,r,o){this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=t,this.ctx=n,this.canvasGraphicsFactory=r,this.baseTransform=o}createPatternCanvas(e){const{bbox:t,operatorList:n,paintType:r,tilingType:o,color:l,canvasGraphicsFactory:h}=this;let{xstep:d,ystep:p}=this;d=Math.abs(d),p=Math.abs(p),Gp("TilingType: "+o);const g=t[0],y=t[1],v=t[2],b=t[3],A=v-g,E=b-y,C=Ae.singularValueDecompose2dScale(this.matrix),k=Ae.singularValueDecompose2dScale(this.baseTransform),L=C[0]*k[0],M=C[1]*k[1];let F=A,z=E,U=!1,N=!1;const q=Math.ceil(d*L),J=Math.ceil(p*M),se=Math.ceil(A*L),ne=Math.ceil(E*M);q>=se?F=d:U=!0,J>=ne?z=p:N=!0;const be=this.getSizeAndScale(F,this.ctx.canvas.width,L),de=this.getSizeAndScale(z,this.ctx.canvas.height,M),ce=e.cachedCanvases.getCanvas("pattern",be.size,de.size),me=ce.context,le=h.createCanvasGraphics(me);if(le.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(le,r,l),me.translate(-be.scale*g,-de.scale*y),le.transform(be.scale,0,0,de.scale,0,0),me.save(),this.clipBbox(le,g,y,v,b),le.baseTransform=pt(le.ctx),le.executeOperatorList(n),le.endDrawing(),me.restore(),U||N){const Z=ce.canvas;U&&(F=d),N&&(z=p);const V=this.getSizeAndScale(F,this.ctx.canvas.width,L),ae=this.getSizeAndScale(z,this.ctx.canvas.height,M),te=V.size,D=ae.size,G=e.cachedCanvases.getCanvas("pattern-workaround",te,D),oe=G.context,we=U?Math.floor(A/d):0,Te=N?Math.floor(E/p):0;for(let ye=0;ye<=we;ye++)for(let Y=0;Y<=Te;Y++)oe.drawImage(Z,te*ye,D*Y,te,D,0,0,te,D);return{canvas:G.canvas,scaleX:V.scale,scaleY:ae.scale,offsetX:g,offsetY:y}}return{canvas:ce.canvas,scaleX:be.scale,scaleY:de.scale,offsetX:g,offsetY:y}}getSizeAndScale(e,t,n){const r=Math.max(Rp.MAX_PATTERN_SIZE,t);let o=Math.ceil(e*n);return o>=r?o=r:n=o/e,{scale:n,size:o}}clipBbox(e,t,n,r,o){const l=r-t,h=o-n;e.ctx.rect(t,n,l,h),e.current.updateRectMinMax(pt(e.ctx),[t,n,r,o]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,n){const r=e.ctx,o=e.current;switch(t){case Fb.COLORED:const l=this.ctx;r.fillStyle=l.fillStyle,r.strokeStyle=l.strokeStyle,o.fillColor=l.fillStyle,o.strokeColor=l.strokeStyle;break;case Fb.UNCOLORED:const h=Ae.makeHexColor(n[0],n[1],n[2]);r.fillStyle=h,r.strokeStyle=h,o.fillColor=h,o.strokeColor=h;break;default:throw new xR(`Unsupported paint type: ${t}`)}}getPattern(e,t,n,r){let o=n;r!==An.SHADING&&(o=Ae.transform(o,t.baseTransform),this.matrix&&(o=Ae.transform(o,this.matrix)));const l=this.createPatternCanvas(t);let h=new DOMMatrix(o);h=h.translate(l.offsetX,l.offsetY),h=h.scale(1/l.scaleX,1/l.scaleY);const d=e.createPattern(l.canvas,"repeat");return d.setTransform(h),d}};Pe(Rp,"MAX_PATTERN_SIZE",3e3);let Uy=Rp;function tP({src:a,srcPos:e=0,dest:t,width:n,height:r,nonBlackColor:o=4294967295,inverseDecode:l=!1}){const h=bn.isLittleEndian?4278190080:255,[d,p]=l?[o,h]:[h,o],g=n>>3,y=n&7,v=a.length;t=new Uint32Array(t.buffer);let b=0;for(let A=0;A<r;A++){for(const C=e+g;e<C;e++){const k=e<v?a[e]:255;t[b++]=k&128?p:d,t[b++]=k&64?p:d,t[b++]=k&32?p:d,t[b++]=k&16?p:d,t[b++]=k&8?p:d,t[b++]=k&4?p:d,t[b++]=k&2?p:d,t[b++]=k&1?p:d}if(y===0)continue;const E=e<v?a[e++]:255;for(let C=0;C<y;C++)t[b++]=E&1<<7-C?p:d}return{srcPos:e,destPos:b}}const Db=16,Ob=100,nP=15,Nb=10,jb=1e3,Dn=16;function iP(a,e){if(a._removeMirroring)throw new Error("Context is already forwarding operations.");a.__originalSave=a.save,a.__originalRestore=a.restore,a.__originalRotate=a.rotate,a.__originalScale=a.scale,a.__originalTranslate=a.translate,a.__originalTransform=a.transform,a.__originalSetTransform=a.setTransform,a.__originalResetTransform=a.resetTransform,a.__originalClip=a.clip,a.__originalMoveTo=a.moveTo,a.__originalLineTo=a.lineTo,a.__originalBezierCurveTo=a.bezierCurveTo,a.__originalRect=a.rect,a.__originalClosePath=a.closePath,a.__originalBeginPath=a.beginPath,a._removeMirroring=()=>{a.save=a.__originalSave,a.restore=a.__originalRestore,a.rotate=a.__originalRotate,a.scale=a.__originalScale,a.translate=a.__originalTranslate,a.transform=a.__originalTransform,a.setTransform=a.__originalSetTransform,a.resetTransform=a.__originalResetTransform,a.clip=a.__originalClip,a.moveTo=a.__originalMoveTo,a.lineTo=a.__originalLineTo,a.bezierCurveTo=a.__originalBezierCurveTo,a.rect=a.__originalRect,a.closePath=a.__originalClosePath,a.beginPath=a.__originalBeginPath,delete a._removeMirroring},a.save=function(){e.save(),this.__originalSave()},a.restore=function(){e.restore(),this.__originalRestore()},a.translate=function(n,r){e.translate(n,r),this.__originalTranslate(n,r)},a.scale=function(n,r){e.scale(n,r),this.__originalScale(n,r)},a.transform=function(n,r,o,l,h,d){e.transform(n,r,o,l,h,d),this.__originalTransform(n,r,o,l,h,d)},a.setTransform=function(n,r,o,l,h,d){e.setTransform(n,r,o,l,h,d),this.__originalSetTransform(n,r,o,l,h,d)},a.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},a.rotate=function(n){e.rotate(n),this.__originalRotate(n)},a.clip=function(n){e.clip(n),this.__originalClip(n)},a.moveTo=function(t,n){e.moveTo(t,n),this.__originalMoveTo(t,n)},a.lineTo=function(t,n){e.lineTo(t,n),this.__originalLineTo(t,n)},a.bezierCurveTo=function(t,n,r,o,l,h){e.bezierCurveTo(t,n,r,o,l,h),this.__originalBezierCurveTo(t,n,r,o,l,h)},a.rect=function(t,n,r,o){e.rect(t,n,r,o),this.__originalRect(t,n,r,o)},a.closePath=function(){e.closePath(),this.__originalClosePath()},a.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class sP{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,n){let r;return this.cache[e]!==void 0?(r=this.cache[e],this.canvasFactory.reset(r,t,n)):(r=this.canvasFactory.create(t,n),this.cache[e]=r),r}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function Rf(a,e,t,n,r,o,l,h,d,p){const[g,y,v,b,A,E]=pt(a);if(y===0&&v===0){const L=l*g+A,M=Math.round(L),F=h*b+E,z=Math.round(F),U=(l+d)*g+A,N=Math.abs(Math.round(U)-M)||1,q=(h+p)*b+E,J=Math.abs(Math.round(q)-z)||1;return a.setTransform(Math.sign(g),0,0,Math.sign(b),M,z),a.drawImage(e,t,n,r,o,0,0,N,J),a.setTransform(g,y,v,b,A,E),[N,J]}if(g===0&&b===0){const L=h*v+A,M=Math.round(L),F=l*y+E,z=Math.round(F),U=(h+p)*v+A,N=Math.abs(Math.round(U)-M)||1,q=(l+d)*y+E,J=Math.abs(Math.round(q)-z)||1;return a.setTransform(0,Math.sign(y),Math.sign(v),0,M,z),a.drawImage(e,t,n,r,o,0,0,J,N),a.setTransform(g,y,v,b,A,E),[J,N]}a.drawImage(e,t,n,r,o,l,h,d,p);const C=Math.hypot(g,y),k=Math.hypot(v,b);return[C*d,k*p]}function rP(a){const{width:e,height:t}=a;if(e>jb||t>jb)return null;const n=1e3,r=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),o=e+1;let l=new Uint8Array(o*(t+1)),h,d,p;const g=e+7&-8;let y=new Uint8Array(g*t),v=0;for(const k of a.data){let L=128;for(;L>0;)y[v++]=k&L?0:255,L>>=1}let b=0;for(v=0,y[v]!==0&&(l[0]=1,++b),d=1;d<e;d++)y[v]!==y[v+1]&&(l[d]=y[v]?2:1,++b),v++;for(y[v]!==0&&(l[d]=2,++b),h=1;h<t;h++){v=h*g,p=h*o,y[v-g]!==y[v]&&(l[p]=y[v]?1:8,++b);let k=(y[v]?4:0)+(y[v-g]?8:0);for(d=1;d<e;d++)k=(k>>2)+(y[v+1]?4:0)+(y[v-g+1]?8:0),r[k]&&(l[p+d]=r[k],++b),v++;if(y[v-g]!==y[v]&&(l[p+d]=y[v]?2:4,++b),b>n)return null}for(v=g*(t-1),p=h*o,y[v]!==0&&(l[p]=8,++b),d=1;d<e;d++)y[v]!==y[v+1]&&(l[p+d]=y[v]?4:8,++b),v++;if(y[v]!==0&&(l[p+d]=4,++b),b>n)return null;const A=new Int32Array([0,o,-1,0,-o,0,0,0,1]),E=new Path2D;for(h=0;b&&h<=t;h++){let k=h*o;const L=k+e;for(;k<L&&!l[k];)k++;if(k===L)continue;E.moveTo(k%o,h);const M=k;let F=l[k];do{const z=A[F];do k+=z;while(!l[k]);const U=l[k];U!==5&&U!==10?(F=U,l[k]=0):(F=U&51*F>>4,l[k]&=F>>2|F<<2),E.lineTo(k%o,k/o|0),l[k]||--b}while(M!==k);--h}return y=null,l=null,function(k){k.save(),k.scale(1/e,-1/t),k.translate(0,-t),k.fill(E),k.beginPath(),k.restore()}}class Bb{constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=qS,this.textMatrixScale=1,this.fontMatrix=py,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=on.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,n){[t,n]=Ae.applyTransform([t,n],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,n),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,n)}updateRectMinMax(e,t){const n=Ae.applyTransform(t,e),r=Ae.applyTransform(t.slice(2),e),o=Ae.applyTransform([t[0],t[3]],e),l=Ae.applyTransform([t[2],t[1]],e);this.minX=Math.min(this.minX,n[0],r[0],o[0],l[0]),this.minY=Math.min(this.minY,n[1],r[1],o[1],l[1]),this.maxX=Math.max(this.maxX,n[0],r[0],o[0],l[0]),this.maxY=Math.max(this.maxY,n[1],r[1],o[1],l[1])}updateScalingPathMinMax(e,t){Ae.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.minY=Math.min(this.minY,t[1]),this.maxX=Math.max(this.maxX,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,n,r,o,l,h,d,p,g){const y=Ae.bezierBoundingBox(t,n,r,o,l,h,d,p,g);g||this.updateRectMinMax(e,y)}getPathBoundingBox(e=An.FILL,t=null){const n=[this.minX,this.minY,this.maxX,this.maxY];if(e===An.STROKE){t||rt("Stroke bounding box must include transform.");const r=Ae.singularValueDecompose2dScale(t),o=r[0]*this.lineWidth/2,l=r[1]*this.lineWidth/2;n[0]-=o,n[1]-=l,n[2]+=o,n[3]+=l}return n}updateClipFromPath(){const e=Ae.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(e=An.FILL,t=null){return Ae.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function zb(a,e){if(typeof ImageData<"u"&&e instanceof ImageData){a.putImageData(e,0,0);return}const t=e.height,n=e.width,r=t%Dn,o=(t-r)/Dn,l=r===0?o:o+1,h=a.createImageData(n,Dn);let d=0,p;const g=e.data,y=h.data;let v,b,A,E;if(e.kind===Nf.GRAYSCALE_1BPP){const C=g.byteLength,k=new Uint32Array(y.buffer,0,y.byteLength>>2),L=k.length,M=n+7>>3,F=4294967295,z=bn.isLittleEndian?4278190080:255;for(v=0;v<l;v++){for(A=v<o?Dn:r,p=0,b=0;b<A;b++){const U=C-d;let N=0;const q=U>M?n:U*8-7,J=q&-8;let se=0,ne=0;for(;N<J;N+=8)ne=g[d++],k[p++]=ne&128?F:z,k[p++]=ne&64?F:z,k[p++]=ne&32?F:z,k[p++]=ne&16?F:z,k[p++]=ne&8?F:z,k[p++]=ne&4?F:z,k[p++]=ne&2?F:z,k[p++]=ne&1?F:z;for(;N<q;N++)se===0&&(ne=g[d++],se=128),k[p++]=ne&se?F:z,se>>=1}for(;p<L;)k[p++]=0;a.putImageData(h,0,v*Dn)}}else if(e.kind===Nf.RGBA_32BPP){for(b=0,E=n*Dn*4,v=0;v<o;v++)y.set(g.subarray(d,d+E)),d+=E,a.putImageData(h,0,b),b+=Dn;v<l&&(E=n*r*4,y.set(g.subarray(d,d+E)),a.putImageData(h,0,b))}else if(e.kind===Nf.RGB_24BPP)for(A=Dn,E=n*A,v=0;v<l;v++){for(v>=o&&(A=r,E=n*A),p=0,b=E;b--;)y[p++]=g[d++],y[p++]=g[d++],y[p++]=g[d++],y[p++]=255;a.putImageData(h,0,v*Dn)}else throw new Error(`bad image kind: ${e.kind}`)}function Hb(a,e){if(e.bitmap){a.drawImage(e.bitmap,0,0);return}const t=e.height,n=e.width,r=t%Dn,o=(t-r)/Dn,l=r===0?o:o+1,h=a.createImageData(n,Dn);let d=0;const p=e.data,g=h.data;for(let y=0;y<l;y++){const v=y<o?Dn:r;({srcPos:d}=tP({src:p,srcPos:d,dest:g,width:n,height:v,nonBlackColor:0})),a.putImageData(h,0,y*Dn)}}function wu(a,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of t)a[n]!==void 0&&(e[n]=a[n]);a.setLineDash!==void 0&&(e.setLineDash(a.getLineDash()),e.lineDashOffset=a.lineDashOffset)}function Pf(a){if(a.strokeStyle=a.fillStyle="#000000",a.fillRule="nonzero",a.globalAlpha=1,a.lineWidth=1,a.lineCap="butt",a.lineJoin="miter",a.miterLimit=10,a.globalCompositeOperation="source-over",a.font="10px sans-serif",a.setLineDash!==void 0&&(a.setLineDash([]),a.lineDashOffset=0),!pn){const{filter:e}=a;e!=="none"&&e!==""&&(a.filter="none")}}function Ub(a,e){if(e)return!0;const t=Ae.singularValueDecompose2dScale(a);t[0]=Math.fround(t[0]),t[1]=Math.fround(t[1]);const n=Math.fround((globalThis.devicePixelRatio||1)*oo.PDF_TO_CSS_UNITS);return t[0]<=n&&t[1]<=n}const oP=["butt","round","square"],aP=["miter","round","bevel"],lP={},$b={};var co,$y,Wy;const o0=class o0{constructor(e,t,n,r,o,{optionalContentConfig:l,markedContentStack:h=null},d,p){T(this,co);this.ctx=e,this.current=new Bb(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=n,this.canvasFactory=r,this.filterFactory=o,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=h||[],this.optionalContentConfig=l,this.cachedCanvases=new sP(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=d,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=p,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:n=!1,background:r=null}){const o=this.ctx.canvas.width,l=this.ctx.canvas.height,h=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,o,l),this.ctx.fillStyle=h,n){const d=this.cachedCanvases.getCanvas("transparent",o,l);this.compositeCtx=this.ctx,this.transparentCanvas=d.canvas,this.ctx=d.context,this.ctx.save(),this.ctx.transform(...pt(this.compositeCtx))}this.ctx.save(),Pf(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=pt(this.ctx)}executeOperatorList(e,t,n,r){const o=e.argsArray,l=e.fnArray;let h=t||0;const d=o.length;if(d===h)return h;const p=d-h>Nb&&typeof n=="function",g=p?Date.now()+nP:0;let y=0;const v=this.commonObjs,b=this.objs;let A;for(;;){if(r!==void 0&&h===r.nextBreakPoint)return r.breakIt(h,n),h;if(A=l[h],A!==Ti.dependency)this[A].apply(this,o[h]);else for(const E of o[h]){const C=E.startsWith("g_")?v:b;if(!C.has(E))return C.get(E,n),h}if(h++,h===d)return h;if(p&&++y>Nb){if(Date.now()>g)return n(),h;y=0}}}endDrawing(){x(this,co,$y).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),x(this,co,Wy).call(this)}_scaleImage(e,t){const n=e.width??e.displayWidth,r=e.height??e.displayHeight;let o=Math.max(Math.hypot(t[0],t[1]),1),l=Math.max(Math.hypot(t[2],t[3]),1),h=n,d=r,p="prescale1",g,y;for(;o>2&&h>1||l>2&&d>1;){let v=h,b=d;o>2&&h>1&&(v=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h/2),o/=h/v),l>2&&d>1&&(b=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d)/2,l/=d/b),g=this.cachedCanvases.getCanvas(p,v,b),y=g.context,y.clearRect(0,0,v,b),y.drawImage(e,0,0,h,d,0,0,v,b),e=g.canvas,h=v,d=b,p=p==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:h,paintHeight:d}}_createMaskCanvas(e){const t=this.ctx,{width:n,height:r}=e,o=this.current.fillColor,l=this.current.patternFill,h=pt(t);let d,p,g,y;if((e.bitmap||e.data)&&e.count>1){const q=e.bitmap||e.data.buffer;p=JSON.stringify(l?h:[h.slice(0,4),o]),d=this._cachedBitmapsMap.get(q),d||(d=new Map,this._cachedBitmapsMap.set(q,d));const J=d.get(p);if(J&&!l){const se=Math.round(Math.min(h[0],h[2])+h[4]),ne=Math.round(Math.min(h[1],h[3])+h[5]);return{canvas:J,offsetX:se,offsetY:ne}}g=J}g||(y=this.cachedCanvases.getCanvas("maskCanvas",n,r),Hb(y.context,e));let v=Ae.transform(h,[1/n,0,0,-1/r,0,0]);v=Ae.transform(v,[1,0,0,1,0,-r]);const[b,A,E,C]=Ae.getAxialAlignedBoundingBox([0,0,n,r],v),k=Math.round(E-b)||1,L=Math.round(C-A)||1,M=this.cachedCanvases.getCanvas("fillCanvas",k,L),F=M.context,z=b,U=A;F.translate(-z,-U),F.transform(...v),g||(g=this._scaleImage(y.canvas,Ts(F)),g=g.img,d&&l&&d.set(p,g)),F.imageSmoothingEnabled=Ub(pt(F),e.interpolate),Rf(F,g,0,0,g.width,g.height,0,0,n,r),F.globalCompositeOperation="source-in";const N=Ae.transform(Ts(F),[1,0,0,1,-z,-U]);return F.fillStyle=l?o.getPattern(t,this,N,An.FILL):o,F.fillRect(0,0,n,r),d&&!l&&(this.cachedCanvases.delete("fillCanvas"),d.set(p,M.canvas)),{canvas:M.canvas,offsetX:Math.round(z),offsetY:Math.round(U)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=oP[e]}setLineJoin(e){this.ctx.lineJoin=aP[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const n=this.ctx;n.setLineDash!==void 0&&(n.setLineDash(e),n.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,n]of e)switch(t){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=n;break;case"ca":this.current.fillAlpha=n,this.ctx.globalAlpha=n;break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(n,e,t);this.suspendedCtx=this.ctx,this.ctx=r.context;const o=this.ctx;o.setTransform(...pt(this.suspendedCtx)),wu(this.suspendedCtx,o),iP(o,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),wu(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,n,r){const o=r[0],l=r[1],h=r[2]-o,d=r[3]-l;h===0||d===0||(this.genericComposeSMask(t.context,n,h,d,t.subtype,t.backdrop,t.transferMap,o,l,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(n.canvas,0,0),e.restore())}genericComposeSMask(e,t,n,r,o,l,h,d,p,g,y){let v=e.canvas,b=d-g,A=p-y;if(l){const C=Ae.makeHexColor(...l);if(b<0||A<0||b+n>v.width||A+r>v.height){const k=this.cachedCanvases.getCanvas("maskExtension",n,r),L=k.context;L.drawImage(v,-b,-A),L.globalCompositeOperation="destination-atop",L.fillStyle=C,L.fillRect(0,0,n,r),L.globalCompositeOperation="source-over",v=k.canvas,b=A=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const k=new Path2D;k.rect(b,A,n,r),e.clip(k),e.globalCompositeOperation="destination-atop",e.fillStyle=C,e.fillRect(b,A,n,r),e.restore()}}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),o==="Alpha"&&h?t.filter=this.filterFactory.addAlphaFilter(h):o==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(h));const E=new Path2D;E.rect(d,p,n,r),t.clip(E),t.globalCompositeOperation="destination-in",t.drawImage(v,b,A,n,r,d,p,n,r),t.restore()}save(){this.inSMaskMode?(wu(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),wu(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,n,r,o,l){this.ctx.transform(e,t,n,r,o,l),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,n){const r=this.ctx,o=this.current;let l=o.x,h=o.y,d,p;const g=pt(r),y=g[0]===0&&g[3]===0||g[1]===0&&g[2]===0,v=y?n.slice(0):null;for(let b=0,A=0,E=e.length;b<E;b++)switch(e[b]|0){case Ti.rectangle:l=t[A++],h=t[A++];const C=t[A++],k=t[A++],L=l+C,M=h+k;r.moveTo(l,h),C===0||k===0?r.lineTo(L,M):(r.lineTo(L,h),r.lineTo(L,M),r.lineTo(l,M)),y||o.updateRectMinMax(g,[l,h,L,M]),r.closePath();break;case Ti.moveTo:l=t[A++],h=t[A++],r.moveTo(l,h),y||o.updatePathMinMax(g,l,h);break;case Ti.lineTo:l=t[A++],h=t[A++],r.lineTo(l,h),y||o.updatePathMinMax(g,l,h);break;case Ti.curveTo:d=l,p=h,l=t[A+4],h=t[A+5],r.bezierCurveTo(t[A],t[A+1],t[A+2],t[A+3],l,h),o.updateCurvePathMinMax(g,d,p,t[A],t[A+1],t[A+2],t[A+3],l,h,v),A+=6;break;case Ti.curveTo2:d=l,p=h,r.bezierCurveTo(l,h,t[A],t[A+1],t[A+2],t[A+3]),o.updateCurvePathMinMax(g,d,p,l,h,t[A],t[A+1],t[A+2],t[A+3],v),l=t[A+2],h=t[A+3],A+=4;break;case Ti.curveTo3:d=l,p=h,l=t[A+2],h=t[A+3],r.bezierCurveTo(t[A],t[A+1],l,h,l,h),o.updateCurvePathMinMax(g,d,p,t[A],t[A+1],l,h,l,h,v),A+=4;break;case Ti.closePath:r.closePath();break}y&&o.updateScalingPathMinMax(g,v),o.setCurrentPoint(l,h)}closePath(){this.ctx.closePath()}stroke(e=!0){const t=this.ctx,n=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof n=="object"&&(n!=null&&n.getPattern)?(t.save(),t.strokeStyle=n.getPattern(t,this,Ts(t),An.STROKE),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(e=!0){const t=this.ctx,n=this.current.fillColor,r=this.current.patternFill;let o=!1;r&&(t.save(),t.fillStyle=n.getPattern(t,this,Ts(t),An.FILL),o=!0);const l=this.current.getClippedPathBoundingBox();this.contentVisible&&l!==null&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),o&&t.restore(),e&&this.consumePath(l)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=lP}eoClip(){this.pendingClip=$b}beginText(){this.current.textMatrix=qS,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(e===void 0){t.beginPath();return}t.save(),t.beginPath();for(const n of e)t.setTransform(...n.transform),t.translate(n.x,n.y),n.addToPath(t,n.fontSize);t.restore(),t.clip(),t.beginPath(),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var g;const n=this.commonObjs.get(e),r=this.current;if(!n)throw new Error(`Can't find font for ${e}`);if(r.fontMatrix=n.fontMatrix||py,(r.fontMatrix[0]===0||r.fontMatrix[3]===0)&&Ne("Invalid font matrix for font "+e),t<0?(t=-t,r.fontDirection=-1):r.fontDirection=1,this.current.font=n,this.current.fontSize=t,n.isType3Font)return;const o=n.loadedName||"sans-serif",l=((g=n.systemFontInfo)==null?void 0:g.css)||`"${o}", ${n.fallbackName}`;let h="normal";n.black?h="900":n.bold&&(h="bold");const d=n.italic?"italic":"normal";let p=t;t<Db?p=Db:t>Ob&&(p=Ob),this.current.fontSizeScale=t/p,this.ctx.font=`${d} ${h} ${p}px ${l}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,n,r,o,l){this.current.textMatrix=[e,t,n,r,o,l],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,n,r){const o=this.ctx,l=this.current,h=l.font,d=l.textRenderingMode,p=l.fontSize/l.fontSizeScale,g=d&on.FILL_STROKE_MASK,y=!!(d&on.ADD_TO_PATH_FLAG),v=l.patternFill&&!h.missingFile;let b;(h.disableFontFace||y||v)&&(b=h.getPathGenerator(this.commonObjs,e)),h.disableFontFace||v?(o.save(),o.translate(t,n),o.beginPath(),b(o,p),r&&o.setTransform(...r),(g===on.FILL||g===on.FILL_STROKE)&&o.fill(),(g===on.STROKE||g===on.FILL_STROKE)&&o.stroke(),o.restore()):((g===on.FILL||g===on.FILL_STROKE)&&o.fillText(e,t,n),(g===on.STROKE||g===on.FILL_STROKE)&&o.strokeText(e,t,n)),y&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:pt(o),x:t,y:n,fontSize:p,addToPath:b})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let n=!1;for(let r=3;r<t.length;r+=4)if(t[r]>0&&t[r]<255){n=!0;break}return Ue(this,"isFontSubpixelAAEnabled",n)}showText(e){const t=this.current,n=t.font;if(n.isType3Font)return this.showType3Text(e);const r=t.fontSize;if(r===0)return;const o=this.ctx,l=t.fontSizeScale,h=t.charSpacing,d=t.wordSpacing,p=t.fontDirection,g=t.textHScale*p,y=e.length,v=n.vertical,b=v?1:-1,A=n.defaultVMetrics,E=r*t.fontMatrix[0],C=t.textRenderingMode===on.FILL&&!n.disableFontFace&&!t.patternFill;o.save(),o.transform(...t.textMatrix),o.translate(t.x,t.y+t.textRise),p>0?o.scale(g,-1):o.scale(g,1);let k;if(t.patternFill){o.save();const U=t.fillColor.getPattern(o,this,Ts(o),An.FILL);k=pt(o),o.restore(),o.fillStyle=U}let L=t.lineWidth;const M=t.textMatrixScale;if(M===0||L===0){const U=t.textRenderingMode&on.FILL_STROKE_MASK;(U===on.STROKE||U===on.FILL_STROKE)&&(L=this.getSinglePixelWidth())}else L/=M;if(l!==1&&(o.scale(l,l),L/=l),o.lineWidth=L,n.isInvalidPDFjsFont){const U=[];let N=0;for(const q of e)U.push(q.unicode),N+=q.width;o.fillText(U.join(""),0,0),t.x+=N*E*g,o.restore(),this.compose();return}let F=0,z;for(z=0;z<y;++z){const U=e[z];if(typeof U=="number"){F+=b*U*r/1e3;continue}let N=!1;const q=(U.isSpace?d:0)+h,J=U.fontChar,se=U.accent;let ne,be,de=U.width;if(v){const me=U.vmetric||A,le=-(U.vmetric?me[1]:de*.5)*E,Z=me[2]*E;de=me?-me[0]:de,ne=le/l,be=(F+Z)/l}else ne=F/l,be=0;if(n.remeasure&&de>0){const me=o.measureText(J).width*1e3/r*l;if(de<me&&this.isFontSubpixelAAEnabled){const le=de/me;N=!0,o.save(),o.scale(le,1),ne/=le}else de!==me&&(ne+=(de-me)/2e3*r/l)}if(this.contentVisible&&(U.isInFont||n.missingFile)){if(C&&!se)o.fillText(J,ne,be);else if(this.paintChar(J,ne,be,k),se){const me=ne+r*se.offset.x/l,le=be-r*se.offset.y/l;this.paintChar(se.fontChar,me,le,k)}}const ce=v?de*E-q*p:de*E+q*p;F+=ce,N&&o.restore()}v?t.y-=F:t.x+=F*g,o.restore(),this.compose()}showType3Text(e){const t=this.ctx,n=this.current,r=n.font,o=n.fontSize,l=n.fontDirection,h=r.vertical?1:-1,d=n.charSpacing,p=n.wordSpacing,g=n.textHScale*l,y=n.fontMatrix||py,v=e.length,b=n.textRenderingMode===on.INVISIBLE;let A,E,C,k;if(!(b||o===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),t.transform(...n.textMatrix),t.translate(n.x,n.y),t.scale(g,l),A=0;A<v;++A){if(E=e[A],typeof E=="number"){k=h*E*o/1e3,this.ctx.translate(k,0),n.x+=k*g;continue}const L=(E.isSpace?p:0)+d,M=r.charProcOperatorList[E.operatorListId];if(!M){Ne(`Type3 character "${E.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=E,this.save(),t.scale(o,o),t.transform(...y),this.executeOperatorList(M),this.restore()),C=Ae.applyTransform([E.width,0],y)[0]*o+L,t.translate(C,0),n.x+=C*g}t.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,n,r,o,l){this.ctx.rect(n,r,o-n,l-r),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){const n=e[1],r=this.baseTransform||pt(this.ctx),o={createCanvasGraphics:l=>new o0(l,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new Uy(e,n,this.ctx,o,r)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,n){this.ctx.strokeStyle=this.current.strokeColor=Ae.makeHexColor(e,t,n)}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent"}setFillRGBColor(e,t,n){this.ctx.fillStyle=this.current.fillColor=Ae.makeHexColor(e,t,n),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t=null){let n;return this.cachedPatterns.has(e)?n=this.cachedPatterns.get(e):(n=eP(this.getObject(e)),this.cachedPatterns.set(e,n)),t&&(n.matrix=t),n}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const n=this._getPattern(e);t.fillStyle=n.getPattern(t,this,Ts(t),An.SHADING);const r=Ts(t);if(r){const{width:o,height:l}=t.canvas,[h,d,p,g]=Ae.getAxialAlignedBoundingBox([0,0,o,l],r);this.ctx.fillRect(h,d,p-h,g-d)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){rt("Should not call beginInlineImage")}beginImageData(){rt("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=pt(this.ctx),t)){const n=t[2]-t[0],r=t[3]-t[1];this.ctx.rect(t[0],t[1],n,r),this.current.updateRectMinMax(pt(this.ctx),t),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||Gp("TODO: Support non-isolated groups."),e.knockout&&Ne("Knockout groups not supported.");const n=pt(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let r=Ae.getAxialAlignedBoundingBox(e.bbox,pt(t));const o=[0,0,t.canvas.width,t.canvas.height];r=Ae.intersect(r,o)||[0,0,0,0];const l=Math.floor(r[0]),h=Math.floor(r[1]),d=Math.max(Math.ceil(r[2])-l,1),p=Math.max(Math.ceil(r[3])-h,1);this.current.startNewPathAndClipBox([0,0,d,p]);let g="groupAt"+this.groupLevel;e.smask&&(g+="_smask_"+this.smaskCounter++%2);const y=this.cachedCanvases.getCanvas(g,d,p),v=y.context;v.translate(-l,-h),v.transform(...n),e.smask?this.smaskStack.push({canvas:y.canvas,context:v,offsetX:l,offsetY:h,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(l,h),t.save()),wu(t,v),this.ctx=v,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const r=pt(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...r);const o=Ae.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],r);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(o)}}beginAnnotation(e,t,n,r,o){if(x(this,co,$y).call(this),Pf(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const l=t[2]-t[0],h=t[3]-t[1];if(o&&this.annotationCanvasMap){n=n.slice(),n[4]-=t[0],n[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=l,t[3]=h;const[d,p]=Ae.singularValueDecompose2dScale(pt(this.ctx)),{viewportScale:g}=this,y=Math.ceil(l*this.outputScaleX*g),v=Math.ceil(h*this.outputScaleY*g);this.annotationCanvas=this.canvasFactory.create(y,v);const{canvas:b,context:A}=this.annotationCanvas;this.annotationCanvasMap.set(e,b),this.annotationCanvas.savedCtx=this.ctx,this.ctx=A,this.ctx.save(),this.ctx.setTransform(d,0,0,-p,0,h*p),Pf(this.ctx)}else Pf(this.ctx),this.endPath(),this.ctx.rect(t[0],t[1],l,h),this.ctx.clip(),this.ctx.beginPath()}this.current=new Bb(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...n),this.transform(...r)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),x(this,co,Wy).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;e=this.getObject(e.data,e),e.count=t;const n=this.ctx,r=this.processingType3;if(r&&(r.compiled===void 0&&(r.compiled=rP(e)),r.compiled)){r.compiled(n);return}const o=this._createMaskCanvas(e),l=o.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(l,o.offsetX,o.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,n=0,r=0,o,l){if(!this.contentVisible)return;e=this.getObject(e.data,e);const h=this.ctx;h.save();const d=pt(h);h.transform(t,n,r,o,0,0);const p=this._createMaskCanvas(e);h.setTransform(1,0,0,1,p.offsetX-d[4],p.offsetY-d[5]);for(let g=0,y=l.length;g<y;g+=2){const v=Ae.transform(d,[t,n,r,o,l[g],l[g+1]]),[b,A]=Ae.applyTransform([0,0],v);h.drawImage(p.canvas,b,A)}h.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,n=this.current.fillColor,r=this.current.patternFill;for(const o of e){const{data:l,width:h,height:d,transform:p}=o,g=this.cachedCanvases.getCanvas("maskCanvas",h,d),y=g.context;y.save();const v=this.getObject(l,o);Hb(y,v),y.globalCompositeOperation="source-in",y.fillStyle=r?n.getPattern(y,this,Ts(t),An.FILL):n,y.fillRect(0,0,h,d),y.restore(),t.save(),t.transform(...p),t.scale(1,-1),Rf(t,g.canvas,0,0,h,d,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);if(!t){Ne("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,n,r){if(!this.contentVisible)return;const o=this.getObject(e);if(!o){Ne("Dependent image isn't ready yet");return}const l=o.width,h=o.height,d=[];for(let p=0,g=r.length;p<g;p+=2)d.push({transform:[t,0,0,n,r[p],r[p+1]],x:0,y:0,w:l,h});this.paintInlineImageXObjectGroup(o,d)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:n,height:r}=e,o=this.cachedCanvases.getCanvas("inlineImage",n,r),l=o.context;return l.filter=this.current.transferMaps,l.drawImage(t,0,0),l.filter="none",o.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,n=e.height,r=this.ctx;if(this.save(),!pn){const{filter:h}=r;h!=="none"&&h!==""&&(r.filter="none")}r.scale(1/t,-1/n);let o;if(e.bitmap)o=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)o=e;else{const d=this.cachedCanvases.getCanvas("inlineImage",t,n).context;zb(d,e),o=this.applyTransferMapsToCanvas(d)}const l=this._scaleImage(o,Ts(r));r.imageSmoothingEnabled=Ub(pt(r),e.interpolate),Rf(r,l.img,0,0,l.paintWidth,l.paintHeight,0,-n,t,n),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const n=this.ctx;let r;if(e.bitmap)r=e.bitmap;else{const o=e.width,l=e.height,d=this.cachedCanvases.getCanvas("inlineImage",o,l).context;zb(d,e),r=this.applyTransferMapsToCanvas(d)}for(const o of t)n.save(),n.transform(...o.transform),n.scale(1,-1),Rf(n,r,o.x,o.y,o.w,o.h,0,-1,1,1),n.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){const t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const n=this.ctx;this.pendingClip&&(t||(this.pendingClip===$b?n.clip("evenodd"):n.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),n.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=pt(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),n=Math.hypot(e[0],e[2]),r=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(n,r)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:n,c:r,d:o}=this.ctx.getTransform();let l,h;if(n===0&&r===0){const d=Math.abs(t),p=Math.abs(o);if(d===p)if(e===0)l=h=1/d;else{const g=d*e;l=h=g<1?1/g:1}else if(e===0)l=1/d,h=1/p;else{const g=d*e,y=p*e;l=g<1?1/g:1,h=y<1?1/y:1}}else{const d=Math.abs(t*o-n*r),p=Math.hypot(t,n),g=Math.hypot(r,o);if(e===0)l=g/d,h=p/d;else{const y=e*d;l=g>y?g/y:1,h=p>y?p/y:1}}this._cachedScaleForStroking[0]=l,this._cachedScaleForStroking[1]=h}return this._cachedScaleForStroking}rescaleAndStroke(e){const{ctx:t}=this,{lineWidth:n}=this.current,[r,o]=this.getScaleForStroking();if(t.lineWidth=n||1,r===1&&o===1){t.stroke();return}const l=t.getLineDash();if(e&&t.save(),t.scale(r,o),l.length>0){const h=Math.max(r,o);t.setLineDash(l.map(d=>d/h)),t.lineDashOffset/=h}t.stroke(),e&&t.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};co=new WeakSet,$y=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Wy=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}};let El=o0;for(const a in Ti)El.prototype[a]!==void 0&&(El.prototype[Ti[a]]=El.prototype[a]);var uh,hh;class tr{static get workerPort(){return u(this,uh)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");S(this,uh,e)}static get workerSrc(){return u(this,hh)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");S(this,hh,e)}}uh=new WeakMap,hh=new WeakMap,T(tr,uh,null),T(tr,hh,"");const Lf={DATA:1,ERROR:2},Ct={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function $n(a){switch(a instanceof Error||typeof a=="object"&&a!==null||rt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),a.name){case"AbortException":return new Ha(a.message);case"MissingPDFException":return new za(a.message);case"PasswordException":return new gy(a.message,a.code);case"UnexpectedResponseException":return new qp(a.message,a.status);case"UnknownErrorException":return new my(a.message,a.details);default:return new my(a.message,a.toString())}}var Hl,mi,LE,ME,IE,Vf;class ku{constructor(e,t,n){T(this,mi);T(this,Hl,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",x(this,mi,LE).bind(this),{signal:u(this,Hl).signal})}on(e,t){const n=this.actionHandler;if(n[e])throw new Error(`There is already an actionName called "${e}"`);n[e]=t}send(e,t,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},n)}sendWithPromise(e,t,n){const r=this.callbackId++,o=Promise.withResolvers();this.callbackCapabilities[r]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:r,data:t},n)}catch(l){o.reject(l)}return o.promise}sendWithStream(e,t,n,r){const o=this.streamId++,l=this.sourceName,h=this.targetName,d=this.comObj;return new ReadableStream({start:p=>{const g=Promise.withResolvers();return this.streamControllers[o]={controller:p,startCall:g,pullCall:null,cancelCall:null,isClosed:!1},d.postMessage({sourceName:l,targetName:h,action:e,streamId:o,data:t,desiredSize:p.desiredSize},r),g.promise},pull:p=>{const g=Promise.withResolvers();return this.streamControllers[o].pullCall=g,d.postMessage({sourceName:l,targetName:h,stream:Ct.PULL,streamId:o,desiredSize:p.desiredSize}),g.promise},cancel:p=>{Ot(p instanceof Error,"cancel must have a valid reason");const g=Promise.withResolvers();return this.streamControllers[o].cancelCall=g,this.streamControllers[o].isClosed=!0,d.postMessage({sourceName:l,targetName:h,stream:Ct.CANCEL,streamId:o,reason:$n(p)}),g.promise}},n)}destroy(){var e;(e=u(this,Hl))==null||e.abort(),S(this,Hl,null)}}Hl=new WeakMap,mi=new WeakSet,LE=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){x(this,mi,IE).call(this,e);return}if(e.callback){const n=e.callbackId,r=this.callbackCapabilities[n];if(!r)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],e.callback===Lf.DATA)r.resolve(e.data);else if(e.callback===Lf.ERROR)r.reject($n(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const n=this.sourceName,r=e.sourceName,o=this.comObj;new Promise(function(l){l(t(e.data))}).then(function(l){o.postMessage({sourceName:n,targetName:r,callback:Lf.DATA,callbackId:e.callbackId,data:l})},function(l){o.postMessage({sourceName:n,targetName:r,callback:Lf.ERROR,callbackId:e.callbackId,reason:$n(l)})});return}if(e.streamId){x(this,mi,ME).call(this,e);return}t(e.data)},ME=function(e){const t=e.streamId,n=this.sourceName,r=e.sourceName,o=this.comObj,l=this,h=this.actionHandler[e.action],d={enqueue(p,g=1,y){if(this.isCancelled)return;const v=this.desiredSize;this.desiredSize-=g,v>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),o.postMessage({sourceName:n,targetName:r,stream:Ct.ENQUEUE,streamId:t,chunk:p},y)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:n,targetName:r,stream:Ct.CLOSE,streamId:t}),delete l.streamSinks[t])},error(p){Ot(p instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,o.postMessage({sourceName:n,targetName:r,stream:Ct.ERROR,streamId:t,reason:$n(p)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[t]=d,new Promise(function(p){p(h(e.data,d))}).then(function(){o.postMessage({sourceName:n,targetName:r,stream:Ct.START_COMPLETE,streamId:t,success:!0})},function(p){o.postMessage({sourceName:n,targetName:r,stream:Ct.START_COMPLETE,streamId:t,reason:$n(p)})})},IE=function(e){const t=e.streamId,n=this.sourceName,r=e.sourceName,o=this.comObj,l=this.streamControllers[t],h=this.streamSinks[t];switch(e.stream){case Ct.START_COMPLETE:e.success?l.startCall.resolve():l.startCall.reject($n(e.reason));break;case Ct.PULL_COMPLETE:e.success?l.pullCall.resolve():l.pullCall.reject($n(e.reason));break;case Ct.PULL:if(!h){o.postMessage({sourceName:n,targetName:r,stream:Ct.PULL_COMPLETE,streamId:t,success:!0});break}h.desiredSize<=0&&e.desiredSize>0&&h.sinkCapability.resolve(),h.desiredSize=e.desiredSize,new Promise(function(d){var p;d((p=h.onPull)==null?void 0:p.call(h))}).then(function(){o.postMessage({sourceName:n,targetName:r,stream:Ct.PULL_COMPLETE,streamId:t,success:!0})},function(d){o.postMessage({sourceName:n,targetName:r,stream:Ct.PULL_COMPLETE,streamId:t,reason:$n(d)})});break;case Ct.ENQUEUE:if(Ot(l,"enqueue should have stream controller"),l.isClosed)break;l.controller.enqueue(e.chunk);break;case Ct.CLOSE:if(Ot(l,"close should have stream controller"),l.isClosed)break;l.isClosed=!0,l.controller.close(),x(this,mi,Vf).call(this,l,t);break;case Ct.ERROR:Ot(l,"error should have stream controller"),l.controller.error($n(e.reason)),x(this,mi,Vf).call(this,l,t);break;case Ct.CANCEL_COMPLETE:e.success?l.cancelCall.resolve():l.cancelCall.reject($n(e.reason)),x(this,mi,Vf).call(this,l,t);break;case Ct.CANCEL:if(!h)break;new Promise(function(d){var p;d((p=h.onCancel)==null?void 0:p.call(h,$n(e.reason)))}).then(function(){o.postMessage({sourceName:n,targetName:r,stream:Ct.CANCEL_COMPLETE,streamId:t,success:!0})},function(d){o.postMessage({sourceName:n,targetName:r,stream:Ct.CANCEL_COMPLETE,streamId:t,reason:$n(d)})}),h.sinkCapability.reject($n(e.reason)),h.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},Vf=async function(e,t){var n,r,o;await Promise.allSettled([(n=e.startCall)==null?void 0:n.promise,(r=e.pullCall)==null?void 0:r.promise,(o=e.cancelCall)==null?void 0:o.promise]),delete this.streamControllers[t]};var ta,dh;class cP{constructor({parsedData:e,rawData:t}){T(this,ta);T(this,dh);S(this,ta,e),S(this,dh,t)}getRaw(){return u(this,dh)}get(e){return u(this,ta).get(e)??null}getAll(){return Vv(u(this,ta))}has(e){return u(this,ta).has(e)}}ta=new WeakMap,dh=new WeakMap;const vl=Symbol("INTERNAL");var fh,ph,gh,Ul;class uP{constructor(e,{name:t,intent:n,usage:r,rbGroups:o}){T(this,fh,!1);T(this,ph,!1);T(this,gh,!1);T(this,Ul,!0);S(this,fh,!!(e&Jn.DISPLAY)),S(this,ph,!!(e&Jn.PRINT)),this.name=t,this.intent=n,this.usage=r,this.rbGroups=o}get visible(){if(u(this,gh))return u(this,Ul);if(!u(this,Ul))return!1;const{print:e,view:t}=this.usage;return u(this,fh)?(t==null?void 0:t.viewState)!=="OFF":u(this,ph)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,n=!1){e!==vl&&rt("Internal method `_setVisible` called."),S(this,gh,n),S(this,Ul,t)}}fh=new WeakMap,ph=new WeakMap,gh=new WeakMap,Ul=new WeakMap;var Ur,Ke,$l,Wl,mh,Vy;class hP{constructor(e,t=Jn.DISPLAY){T(this,mh);T(this,Ur,null);T(this,Ke,new Map);T(this,$l,null);T(this,Wl,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,S(this,Wl,e.order);for(const n of e.groups)u(this,Ke).set(n.id,new uP(t,n));if(e.baseState==="OFF")for(const n of u(this,Ke).values())n._setVisible(vl,!1);for(const n of e.on)u(this,Ke).get(n)._setVisible(vl,!0);for(const n of e.off)u(this,Ke).get(n)._setVisible(vl,!1);S(this,$l,this.getHash())}}isVisible(e){if(u(this,Ke).size===0)return!0;if(!e)return Gp("Optional content group not defined."),!0;if(e.type==="OCG")return u(this,Ke).has(e.id)?u(this,Ke).get(e.id).visible:(Ne(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return x(this,mh,Vy).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!u(this,Ke).has(t))return Ne(`Optional content group not found: ${t}`),!0;if(u(this,Ke).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!u(this,Ke).has(t))return Ne(`Optional content group not found: ${t}`),!0;if(!u(this,Ke).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!u(this,Ke).has(t))return Ne(`Optional content group not found: ${t}`),!0;if(!u(this,Ke).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!u(this,Ke).has(t))return Ne(`Optional content group not found: ${t}`),!0;if(u(this,Ke).get(t).visible)return!1}return!0}return Ne(`Unknown optional content policy ${e.policy}.`),!0}return Ne(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,n=!0){var o;const r=u(this,Ke).get(e);if(!r){Ne(`Optional content group not found: ${e}`);return}if(n&&t&&r.rbGroups.length)for(const l of r.rbGroups)for(const h of l)h!==e&&((o=u(this,Ke).get(h))==null||o._setVisible(vl,!1,!0));r._setVisible(vl,!!t,!0),S(this,Ur,null)}setOCGState({state:e,preserveRB:t}){let n;for(const r of e){switch(r){case"ON":case"OFF":case"Toggle":n=r;continue}const o=u(this,Ke).get(r);if(o)switch(n){case"ON":this.setVisibility(r,!0,t);break;case"OFF":this.setVisibility(r,!1,t);break;case"Toggle":this.setVisibility(r,!o.visible,t);break}}S(this,Ur,null)}get hasInitialVisibility(){return u(this,$l)===null||this.getHash()===u(this,$l)}getOrder(){return u(this,Ke).size?u(this,Wl)?u(this,Wl).slice():[...u(this,Ke).keys()]:null}getGroups(){return u(this,Ke).size>0?Vv(u(this,Ke)):null}getGroup(e){return u(this,Ke).get(e)||null}getHash(){if(u(this,Ur)!==null)return u(this,Ur);const e=new AE;for(const[t,n]of u(this,Ke))e.update(`${t}:${n.visible}`);return S(this,Ur,e.hexdigest())}}Ur=new WeakMap,Ke=new WeakMap,$l=new WeakMap,Wl=new WeakMap,mh=new WeakSet,Vy=function(e){const t=e.length;if(t<2)return!0;const n=e[0];for(let r=1;r<t;r++){const o=e[r];let l;if(Array.isArray(o))l=x(this,mh,Vy).call(this,o);else if(u(this,Ke).has(o))l=u(this,Ke).get(o).visible;else return Ne(`Optional content group not found: ${o}`),!0;switch(n){case"And":if(!l)return!1;break;case"Or":if(l)return!0;break;case"Not":return!l;default:return!0}}return n==="And"};class dP{constructor(e,{disableRange:t=!1,disableStream:n=!1}){Ot(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:o,progressiveDone:l,contentDispositionFilename:h}=e;if(this._queuedChunks=[],this._progressiveDone=l,this._contentDispositionFilename=h,(o==null?void 0:o.length)>0){const d=o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength?o.buffer:new Uint8Array(o).buffer;this._queuedChunks.push(d)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!n,this._isRangeSupported=!t,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((d,p)=>{this._onReceiveData({begin:d,chunk:p})}),e.addProgressListener((d,p)=>{this._onProgress({loaded:d,total:p})}),e.addProgressiveReadListener(d=>{this._onReceiveData({chunk:d})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const n=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const r=this._rangeReaders.some(function(o){return o._begin!==e?!1:(o._enqueue(n),!0)});Ot(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,n,r,o;e.total===void 0?(n=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||n.call(t,{loaded:e.loaded}):(o=(r=this._fullRequestReader)==null?void 0:r.onProgress)==null||o.call(r,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){Ot(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new fP(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new pP(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeReaders.slice(0))n.cancel(e);this._pdfDataRangeTransport.abort()}}class fP{constructor(e,t,n=!1,r=null){this._stream=e,this._done=n||!1,this._filename=Xv(r)?r:null,this._queuedChunks=t||[],this._loaded=0;for(const o of this._queuedChunks)this._loaded+=o.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class pP{constructor(e,t,n){this._stream=e,this._begin=t,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function gP(a){let e=!0,t=n("filename\\*","i").exec(a);if(t){t=t[1];let g=h(t);return g=unescape(g),g=d(g),g=p(g),o(g)}if(t=l(a),t){const g=p(t);return o(g)}if(t=n("filename","i").exec(a),t){t=t[1];let g=h(t);return g=p(g),o(g)}function n(g,y){return new RegExp("(?:^|;)\\s*"+g+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',y)}function r(g,y){if(g){if(!/^[\x00-\xFF]+$/.test(y))return y;try{const v=new TextDecoder(g,{fatal:!0}),b=Xp(y);y=v.decode(b),e=!1}catch{}}return y}function o(g){return e&&/[\x80-\xff]/.test(g)&&(g=r("utf-8",g),e&&(g=r("iso-8859-1",g))),g}function l(g){const y=[];let v;const b=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(v=b.exec(g))!==null;){let[,E,C,k]=v;if(E=parseInt(E,10),E in y){if(E===0)break;continue}y[E]=[C,k]}const A=[];for(let E=0;E<y.length&&E in y;++E){let[C,k]=y[E];k=h(k),C&&(k=unescape(k),E===0&&(k=d(k))),A.push(k)}return A.join("")}function h(g){if(g.startsWith('"')){const y=g.slice(1).split('\\"');for(let v=0;v<y.length;++v){const b=y[v].indexOf('"');b!==-1&&(y[v]=y[v].slice(0,b),y.length=v+1),y[v]=y[v].replaceAll(/\\(.)/g,"$1")}g=y.join('"')}return g}function d(g){const y=g.indexOf("'");if(y===-1)return g;const v=g.slice(0,y),A=g.slice(y+1).replace(/^[^']*'/,"");return r(v,A)}function p(g){return!g.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(g)?g:g.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(y,v,b,A){if(b==="q"||b==="Q")return A=A.replaceAll("_"," "),A=A.replaceAll(/=([0-9a-fA-F]{2})/g,function(E,C){return String.fromCharCode(parseInt(C,16))}),r(v,A);try{A=atob(A)}catch{}return r(v,A)})}return""}function Zv(a,e){const t=new Headers;if(!a||!e||typeof e!="object")return t;for(const n in e){const r=e[n];r!==void 0&&t.append(n,r)}return t}function e0({responseHeaders:a,isHttp:e,rangeChunkSize:t,disableRange:n}){const r={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(a.get("Content-Length"),10);return!Number.isInteger(o)||(r.suggestedLength=o,o<=2*t)||n||!e||a.get("Accept-Ranges")!=="bytes"||(a.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function t0(a){const e=a.get("Content-Disposition");if(e){let t=gP(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(Xv(t))return t}return null}function Qp(a,e){return a===404||a===0&&e.startsWith("file:")?new za('Missing PDF "'+e+'".'):new qp(`Unexpected server response (${a}) while retrieving PDF "${e}".`,a)}function FE(a){return a===200||a===206}function DE(a,e,t){return{method:"GET",headers:a,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function OE(a){return a instanceof Uint8Array?a.buffer:a instanceof ArrayBuffer?a:(Ne(`getArrayBuffer - unexpected data format: ${a}`),new Uint8Array(a).buffer)}class Wb{constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=Zv(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Ot(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new mP(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new yP(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class mP{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const n=new Headers(e.headers),r=t.url;fetch(r,DE(n,this._withCredentials,this._abortController)).then(o=>{if(!FE(o.status))throw Qp(o.status,r);this._reader=o.body.getReader(),this._headersCapability.resolve();const l=o.headers,{allowRangeRequests:h,suggestedLength:d}=e0({responseHeaders:l,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=h,this._contentLength=d||this._contentLength,this._filename=t0(l),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Ha("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:OE(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class yP{constructor(e,t,n){this._stream=e,this._reader=null,this._loaded=0;const r=e.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;const o=new Headers(e.headers);o.append("Range",`bytes=${t}-${n-1}`);const l=r.url;fetch(l,DE(o,this._withCredentials,this._abortController)).then(h=>{if(!FE(h.status))throw Qp(h.status,l);this._readCapability.resolve(),this._reader=h.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:OE(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const sy=200,ry=206;function vP(a){const e=a.response;return typeof e!="string"?e:Xp(e).buffer}class wP{constructor({url:e,httpHeaders:t,withCredentials:n}){this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=Zv(this.isHttp,t),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(e,t,n){const r={begin:e,end:t};for(const o in n)r[o]=n[o];return this.request(r)}requestFull(e){return this.request(e)}request(e){const t=new XMLHttpRequest,n=this.currXhrId++,r=this.pendingRequests[n]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[o,l]of this.headers)t.setRequestHeader(o,l);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),r.expectedStatus=ry):r.expectedStatus=sy,t.responseType="arraybuffer",e.onError&&(t.onerror=function(o){e.onError(t.status)}),t.onreadystatechange=this.onStateChange.bind(this,n),t.onprogress=this.onProgress.bind(this,n),r.onHeadersReceived=e.onHeadersReceived,r.onDone=e.onDone,r.onError=e.onError,r.onProgress=e.onProgress,t.send(null),n}onProgress(e,t){var r;const n=this.pendingRequests[e];n&&((r=n.onProgress)==null||r.call(n,t))}onStateChange(e,t){var d,p,g;const n=this.pendingRequests[e];if(!n)return;const r=n.xhr;if(r.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),r.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],r.status===0&&this.isHttp){(d=n.onError)==null||d.call(n,r.status);return}const o=r.status||sy;if(!(o===sy&&n.expectedStatus===ry)&&o!==n.expectedStatus){(p=n.onError)==null||p.call(n,r.status);return}const h=vP(r);if(o===ry){const y=r.getResponseHeader("Content-Range"),v=/bytes (\d+)-(\d+)\/(\d+)/.exec(y);n.onDone({begin:parseInt(v[1],10),chunk:h})}else h?n.onDone({begin:0,chunk:h}):(g=n.onError)==null||g.call(n,r.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class AP{constructor(e){this._source=e,this._manager=new wP(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return Ot(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new bP(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const n=new SP(this._manager,e,t);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class bP{constructor(e,t){this._manager=e;const n={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._fullRequestId=e.requestFull(n),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e),n=new Headers(t.getAllResponseHeaders().trim().split(/[\r\n]+/).map(l=>{const[h,...d]=l.split(": ");return[h,d.join(": ")]})),{allowRangeRequests:r,suggestedLength:o}=e0({responseHeaders:n,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=t0(n),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=Qp(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class SP{constructor(e,t,n){this._manager=e;const r={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._requestId=e.requestRange(t,n,r),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError=Qp(e,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const EP=/^[a-z][a-z0-9\-+.]+:/i;function _P(a){if(EP.test(a))return new URL(a);const e=ao.get("url");return new URL(e.pathToFileURL(a))}function NE(a,e,t){return a.protocol==="http:"?ao.get("http").request(a,{headers:e},t):ao.get("https").request(a,{headers:e},t)}class xP{constructor(e){this.source=e,this.url=_P(e.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.headers=Zv(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Ot(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new kP(this):new CP(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=this.isFsUrl?new RP(this,e,t):new TP(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class jE{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Ha("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class BE{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const t=e.source;this._isStreamingSupported=!t.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}class CP extends jE{constructor(e){super(e);const t=Object.fromEntries(e.headers),n=r=>{if(r.statusCode===404){const d=new za(`Missing PDF "${this._url}".`);this._storedError=d,this._headersCapability.reject(d);return}this._headersCapability.resolve(),this._setReadableStream(r);const o=new Headers(this._readableStream.headers),{allowRangeRequests:l,suggestedLength:h}=e0({responseHeaders:o,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=l,this._contentLength=h||this._contentLength,this._filename=t0(o)};this._request=NE(this._url,t,n),this._request.on("error",r=>{this._storedError=r,this._headersCapability.reject(r)}),this._request.end()}}class TP extends BE{constructor(e,t,n){super(e);const r=Object.fromEntries(e.headers);r.Range=`bytes=${t}-${n-1}`;const o=l=>{if(l.statusCode===404){const h=new za(`Missing PDF "${this._url}".`);this._storedError=h;return}this._setReadableStream(l)};this._request=NE(this._url,r,o),this._request.on("error",l=>{this._storedError=l}),this._request.end()}}class kP extends jE{constructor(e){super(e);const t=ao.get("fs");t.promises.lstat(this._url).then(n=>{this._contentLength=n.size,this._setReadableStream(t.createReadStream(this._url)),this._headersCapability.resolve()},n=>{n.code==="ENOENT"&&(n=new za(`Missing PDF "${this._url}".`)),this._storedError=n,this._headersCapability.reject(n)})}}class RP extends BE{constructor(e,t,n){super(e);const r=ao.get("fs");this._setReadableStream(r.createReadStream(this._url,{start:t,end:n-1}))}}const PP=1e5,Pn=30,LP=.8;var oS,$r,In,yh,vh,na,Ns,wh,Ah,ia,Vl,Gl,Wr,ql,bh,Xl,sa,Sh,Eh,yt,ra,oa,_h,Vr,Kl,rr,zE,HE,qy,ei,Gf,Xy,UE,$E;let Gy=(yt=class{constructor({textContentSource:e,container:t,viewport:n}){T(this,rr);T(this,$r,Promise.withResolvers());T(this,In,null);T(this,yh,!1);T(this,vh,!!((oS=globalThis.FontInspector)!=null&&oS.enabled));T(this,na,null);T(this,Ns,null);T(this,wh,0);T(this,Ah,0);T(this,ia,null);T(this,Vl,null);T(this,Gl,0);T(this,Wr,0);T(this,ql,Object.create(null));T(this,bh,[]);T(this,Xl,null);T(this,sa,[]);T(this,Sh,new WeakMap);T(this,Eh,null);var d;if(e instanceof ReadableStream)S(this,Xl,e);else if(typeof e=="object")S(this,Xl,new ReadableStream({start(p){p.enqueue(e),p.close()}}));else throw new Error('No "textContentSource" parameter specified.');S(this,In,S(this,Vl,t)),S(this,Wr,n.scale*(globalThis.devicePixelRatio||1)),S(this,Gl,n.rotation),S(this,Ns,{div:null,properties:null,ctx:null});const{pageWidth:r,pageHeight:o,pageX:l,pageY:h}=n.rawDims;S(this,Eh,[1,0,0,-1,-l,h+o]),S(this,Ah,r),S(this,wh,o),x(d=yt,ei,UE).call(d),Fa(t,n),u(this,$r).promise.finally(()=>{u(yt,Kl).delete(this),S(this,Ns,null),S(this,ql,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=bn.platform;return Ue(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{u(this,ia).read().then(({value:t,done:n})=>{if(n){u(this,$r).resolve();return}u(this,na)??S(this,na,t.lang),Object.assign(u(this,ql),t.styles),x(this,rr,zE).call(this,t.items),e()},u(this,$r).reject)};return S(this,ia,u(this,Xl).getReader()),u(yt,Kl).add(this),e(),u(this,$r).promise}update({viewport:e,onBefore:t=null}){var o;const n=e.scale*(globalThis.devicePixelRatio||1),r=e.rotation;if(r!==u(this,Gl)&&(t==null||t(),S(this,Gl,r),Fa(u(this,Vl),{rotation:r})),n!==u(this,Wr)){t==null||t(),S(this,Wr,n);const l={div:null,properties:null,ctx:x(o=yt,ei,Gf).call(o,u(this,na))};for(const h of u(this,sa))l.properties=u(this,Sh).get(h),l.div=h,x(this,rr,qy).call(this,l)}}cancel(){var t;const e=new Ha("TextLayer task cancelled.");(t=u(this,ia))==null||t.cancel(e).catch(()=>{}),S(this,ia,null),u(this,$r).reject(e)}get textDivs(){return u(this,sa)}get textContentItemsStr(){return u(this,bh)}static cleanup(){if(!(u(this,Kl).size>0)){u(this,ra).clear();for(const{canvas:e}of u(this,oa).values())e.remove();u(this,oa).clear()}}},$r=new WeakMap,In=new WeakMap,yh=new WeakMap,vh=new WeakMap,na=new WeakMap,Ns=new WeakMap,wh=new WeakMap,Ah=new WeakMap,ia=new WeakMap,Vl=new WeakMap,Gl=new WeakMap,Wr=new WeakMap,ql=new WeakMap,bh=new WeakMap,Xl=new WeakMap,sa=new WeakMap,Sh=new WeakMap,Eh=new WeakMap,ra=new WeakMap,oa=new WeakMap,_h=new WeakMap,Vr=new WeakMap,Kl=new WeakMap,rr=new WeakSet,zE=function(e){var r,o;if(u(this,yh))return;(o=u(this,Ns)).ctx??(o.ctx=x(r=yt,ei,Gf).call(r,u(this,na)));const t=u(this,sa),n=u(this,bh);for(const l of e){if(t.length>PP){Ne("Ignoring additional textDivs for performance reasons."),S(this,yh,!0);return}if(l.str===void 0){if(l.type==="beginMarkedContentProps"||l.type==="beginMarkedContent"){const h=u(this,In);S(this,In,document.createElement("span")),u(this,In).classList.add("markedContent"),l.id!==null&&u(this,In).setAttribute("id",`${l.id}`),h.append(u(this,In))}else l.type==="endMarkedContent"&&S(this,In,u(this,In).parentNode);continue}n.push(l.str),x(this,rr,HE).call(this,l)}},HE=function(e){var E;const t=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};u(this,sa).push(t);const r=Ae.transform(u(this,Eh),e.transform);let o=Math.atan2(r[1],r[0]);const l=u(this,ql)[e.fontName];l.vertical&&(o+=Math.PI/2);let h=u(this,vh)&&l.fontSubstitution||l.fontFamily;h=yt.fontFamilyMap.get(h)||h;const d=Math.hypot(r[2],r[3]),p=d*x(E=yt,ei,$E).call(E,h,u(this,na));let g,y;o===0?(g=r[4],y=r[5]-p):(g=r[4]+p*Math.sin(o),y=r[5]-p*Math.cos(o));const v="calc(var(--scale-factor)*",b=t.style;u(this,In)===u(this,Vl)?(b.left=`${(100*g/u(this,Ah)).toFixed(2)}%`,b.top=`${(100*y/u(this,wh)).toFixed(2)}%`):(b.left=`${v}${g.toFixed(2)}px)`,b.top=`${v}${y.toFixed(2)}px)`),b.fontSize=`${v}${(u(yt,Vr)*d).toFixed(2)}px)`,b.fontFamily=h,n.fontSize=d,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,u(this,vh)&&(t.dataset.fontName=l.fontSubstitutionLoadedName||e.fontName),o!==0&&(n.angle=o*(180/Math.PI));let A=!1;if(e.str.length>1)A=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const C=Math.abs(e.transform[0]),k=Math.abs(e.transform[3]);C!==k&&Math.max(C,k)/Math.min(C,k)>1.5&&(A=!0)}if(A&&(n.canvasWidth=l.vertical?e.height:e.width),u(this,Sh).set(t,n),u(this,Ns).div=t,u(this,Ns).properties=n,x(this,rr,qy).call(this,u(this,Ns)),n.hasText&&u(this,In).append(t),n.hasEOL){const C=document.createElement("br");C.setAttribute("role","presentation"),u(this,In).append(C)}},qy=function(e){var h;const{div:t,properties:n,ctx:r}=e,{style:o}=t;let l="";if(u(yt,Vr)>1&&(l=`scale(${1/u(yt,Vr)})`),n.canvasWidth!==0&&n.hasText){const{fontFamily:d}=o,{canvasWidth:p,fontSize:g}=n;x(h=yt,ei,Xy).call(h,r,g*u(this,Wr),d);const{width:y}=r.measureText(t.textContent);y>0&&(l=`scaleX(${p*u(this,Wr)/y}) ${l}`)}n.angle!==0&&(l=`rotate(${n.angle}deg) ${l}`),l.length>0&&(o.transform=l)},ei=new WeakSet,Gf=function(e=null){let t=u(this,oa).get(e||(e=""));if(!t){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=e,document.body.append(n),t=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),u(this,oa).set(e,t),u(this,_h).set(t,{size:0,family:""})}return t},Xy=function(e,t,n){const r=u(this,_h).get(e);t===r.size&&n===r.family||(e.font=`${t}px ${n}`,r.size=t,r.family=n)},UE=function(){if(u(this,Vr)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),S(this,Vr,e.getBoundingClientRect().height),e.remove()},$E=function(e,t){const n=u(this,ra).get(e);if(n)return n;const r=x(this,ei,Gf).call(this,t);r.canvas.width=r.canvas.height=Pn,x(this,ei,Xy).call(this,r,Pn,e);const o=r.measureText("");let l=o.fontBoundingBoxAscent,h=Math.abs(o.fontBoundingBoxDescent);if(l){const g=l/(l+h);return u(this,ra).set(e,g),r.canvas.width=r.canvas.height=0,g}r.strokeStyle="red",r.clearRect(0,0,Pn,Pn),r.strokeText("g",0,0);let d=r.getImageData(0,0,Pn,Pn).data;h=0;for(let g=d.length-1-3;g>=0;g-=4)if(d[g]>0){h=Math.ceil(g/4/Pn);break}r.clearRect(0,0,Pn,Pn),r.strokeText("A",0,Pn),d=r.getImageData(0,0,Pn,Pn).data,l=0;for(let g=0,y=d.length;g<y;g+=4)if(d[g]>0){l=Pn-Math.floor(g/4/Pn);break}r.canvas.width=r.canvas.height=0;const p=l?l/(l+h):LP;return u(this,ra).set(e,p),p},T(yt,ei),T(yt,ra,new Map),T(yt,oa,new Map),T(yt,_h,new WeakMap),T(yt,Vr,null),T(yt,Kl,new Set),yt);class Uu{static textContent(e){const t=[],n={items:t,styles:Object.create(null)};function r(o){var d;if(!o)return;let l=null;const h=o.name;if(h==="#text")l=o.value;else if(Uu.shouldBuildText(h))(d=o==null?void 0:o.attributes)!=null&&d.textContent?l=o.attributes.textContent:o.value&&(l=o.value);else return;if(l!==null&&t.push({str:l}),!!o.children)for(const p of o.children)r(p)}return r(e),n}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const MP=65536,IP=100,FP=5e3,DP=pn?qR:WR,OP=pn?XR:xE,NP=pn?GR:VR,jP=pn?KR:RE;function BP(a={}){typeof a=="string"||a instanceof URL?a={url:a}:(a instanceof ArrayBuffer||ArrayBuffer.isView(a))&&(a={data:a});const e=new Ky,{docId:t}=e,n=a.url?zP(a.url):null,r=a.data?HP(a.data):null,o=a.httpHeaders||null,l=a.withCredentials===!0,h=a.password??null,d=a.range instanceof WE?a.range:null,p=Number.isInteger(a.rangeChunkSize)&&a.rangeChunkSize>0?a.rangeChunkSize:MP;let g=a.worker instanceof _l?a.worker:null;const y=a.verbosity,v=typeof a.docBaseUrl=="string"&&!Yp(a.docBaseUrl)?a.docBaseUrl:null,b=typeof a.cMapUrl=="string"?a.cMapUrl:null,A=a.cMapPacked!==!1,E=a.CMapReaderFactory||OP,C=typeof a.standardFontDataUrl=="string"?a.standardFontDataUrl:null,k=a.StandardFontDataFactory||jP,L=a.stopAtErrors!==!0,M=Number.isInteger(a.maxImageSize)&&a.maxImageSize>-1?a.maxImageSize:-1,F=a.isEvalSupported!==!1,z=typeof a.isOffscreenCanvasSupported=="boolean"?a.isOffscreenCanvasSupported:!pn,U=typeof a.isChrome=="boolean"?a.isChrome:!bn.platform.isFirefox&&typeof window<"u"&&!!(window!=null&&window.chrome),N=Number.isInteger(a.canvasMaxAreaInBytes)?a.canvasMaxAreaInBytes:-1,q=typeof a.disableFontFace=="boolean"?a.disableFontFace:pn,J=a.fontExtraProperties===!0,se=a.enableXfa===!0,ne=a.ownerDocument||globalThis.document,be=a.disableRange===!0,de=a.disableStream===!0,ce=a.disableAutoFetch===!0,me=a.pdfBug===!0,le=a.CanvasFactory||DP,Z=a.FilterFactory||NP,V=a.enableHWA===!0,ae=d?d.length:a.length??NaN,te=typeof a.useSystemFonts=="boolean"?a.useSystemFonts:!pn&&!q,D=typeof a.useWorkerFetch=="boolean"?a.useWorkerFetch:E===xE&&k===RE&&b&&C&&bu(b,document.baseURI)&&bu(C,document.baseURI);a.canvasFactory&&Mb("`canvasFactory`-instance option, please use `CanvasFactory` instead."),a.filterFactory&&Mb("`filterFactory`-instance option, please use `FilterFactory` instead.");const G=null;bR(y);const oe={canvasFactory:new le({ownerDocument:ne,enableHWA:V}),filterFactory:new Z({docId:t,ownerDocument:ne}),cMapReaderFactory:D?null:new E({baseUrl:b,isCompressed:A}),standardFontDataFactory:D?null:new k({baseUrl:C})};if(!g){const ye={verbosity:y,port:tr.workerPort};g=ye.port?_l.fromPort(ye):new _l(ye),e._worker=g}const we={docId:t,apiVersion:"4.8.69",data:r,password:h,disableAutoFetch:ce,rangeChunkSize:p,length:ae,docBaseUrl:v,enableXfa:se,evaluatorOptions:{maxImageSize:M,disableFontFace:q,ignoreErrors:L,isEvalSupported:F,isOffscreenCanvasSupported:z,isChrome:U,canvasMaxAreaInBytes:N,fontExtraProperties:J,useSystemFonts:te,cMapUrl:D?b:null,standardFontDataUrl:D?C:null}},Te={disableFontFace:q,fontExtraProperties:J,ownerDocument:ne,pdfBug:me,styleElement:G,loadingParams:{disableAutoFetch:ce,enableXfa:se}};return g.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(g.destroyed)throw new Error("Worker was destroyed");const ye=g.messageHandler.sendWithPromise("GetDocRequest",we,r?[r.buffer]:null);let Y;if(d)Y=new dP(d,{disableRange:be,disableStream:de});else if(!r){if(!n)throw new Error("getDocument - no `url` parameter provided.");let Se;pn?Se=typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype&&bu(n)?Wb:xP:Se=bu(n)?Wb:AP,Y=new Se({url:n,length:ae,httpHeaders:o,withCredentials:l,rangeChunkSize:p,disableRange:be,disableStream:de})}return ye.then(Se=>{if(e.destroyed)throw new Error("Loading aborted");if(g.destroyed)throw new Error("Worker was destroyed");const ke=new ku(t,Se,g.port),Ce=new VP(ke,e,Y,Te,oe);e._transport=Ce,ke.send("Ready",null)})}).catch(e._capability.reject),e}function zP(a){if(a instanceof URL)return a.href;try{return new URL(a,window.location).href}catch{if(pn&&typeof a=="string")return a}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function HP(a){if(pn&&typeof Buffer<"u"&&a instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(a instanceof Uint8Array&&a.byteLength===a.buffer.byteLength)return a;if(typeof a=="string")return Xp(a);if(a instanceof ArrayBuffer||ArrayBuffer.isView(a)||typeof a=="object"&&!isNaN(a==null?void 0:a.length))return new Uint8Array(a);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Vb(a){return typeof a=="object"&&Number.isInteger(a==null?void 0:a.num)&&a.num>=0&&Number.isInteger(a==null?void 0:a.gen)&&a.gen>=0}var Pp;const Lp=class Lp{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${yn(Lp,Pp)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var e,t,n;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(r){throw(n=this._worker)!=null&&n.port&&delete this._worker._pendingDestroy,r}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};Pp=new WeakMap,T(Lp,Pp,0);let Ky=Lp,WE=class{constructor(e,t,n=!1,r=null){this.length=e,this.initialData=t,this.progressiveDone=n,this.contentDispositionFilename=r,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(const n of this._rangeListeners)n(e,t)}onDataProgress(e,t){this._readyCapability.promise.then(()=>{for(const n of this._progressListeners)n(e,t)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const t of this._progressiveReadListeners)t(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){rt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}};class UP{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Ue(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Gr,js,pi,wl,qf;class $P{constructor(e,t,n,r=!1){T(this,pi);T(this,Gr,null);T(this,js,!1);this._pageIndex=e,this._pageInfo=t,this._transport=n,this._stats=r?new Lb:null,this._pdfBug=r,this.commonObjs=n.commonObjs,this.objs=new VE,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:n=0,offsetY:r=0,dontFlip:o=!1}={}){return new ud({viewBox:this.view,scale:e,rotation:t,offsetX:n,offsetY:r,dontFlip:o})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Ue(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,viewport:t,intent:n="display",annotationMode:r=Pr.ENABLE,transform:o=null,background:l=null,optionalContentConfigPromise:h=null,annotationCanvasMap:d=null,pageColors:p=null,printAnnotationStorage:g=null,isEditing:y=!1}){var F,z;(F=this._stats)==null||F.time("Overall");const v=this._transport.getRenderingIntent(n,r,g,y),{renderingIntent:b,cacheKey:A}=v;S(this,js,!1),x(this,pi,qf).call(this),h||(h=this._transport.getOptionalContentConfig(b));let E=this._intentStates.get(A);E||(E=Object.create(null),this._intentStates.set(A,E)),E.streamReaderCancelTimeout&&(clearTimeout(E.streamReaderCancelTimeout),E.streamReaderCancelTimeout=null);const C=!!(b&Jn.PRINT);E.displayReadyCapability||(E.displayReadyCapability=Promise.withResolvers(),E.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(z=this._stats)==null||z.time("Page Request"),this._pumpOperatorList(v));const k=U=>{var N;E.renderTasks.delete(L),(this._maybeCleanupAfterRender||C)&&S(this,js,!0),x(this,pi,wl).call(this,!C),U?(L.capability.reject(U),this._abortOperatorList({intentState:E,reason:U instanceof Error?U:new Error(U)})):L.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(N=globalThis.Stats)!=null&&N.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},L=new Qy({callback:k,params:{canvasContext:e,viewport:t,transform:o,background:l},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:d,operatorList:E.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!C,pdfBug:this._pdfBug,pageColors:p});(E.renderTasks||(E.renderTasks=new Set)).add(L);const M=L.task;return Promise.all([E.displayReadyCapability.promise,h]).then(([U,N])=>{var q;if(this.destroyed){k();return}if((q=this._stats)==null||q.time("Rendering"),!(N.renderingIntent&b))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");L.initializeGraphics({transparency:U,optionalContentConfig:N}),L.operatorListChanged()}).catch(k),M}getOperatorList({intent:e="display",annotationMode:t=Pr.ENABLE,printAnnotationStorage:n=null,isEditing:r=!1}={}){var p;function o(){h.operatorList.lastChunk&&(h.opListReadCapability.resolve(h.operatorList),h.renderTasks.delete(d))}const l=this._transport.getRenderingIntent(e,t,n,r,!0);let h=this._intentStates.get(l.cacheKey);h||(h=Object.create(null),this._intentStates.set(l.cacheKey,h));let d;return h.opListReadCapability||(d=Object.create(null),d.operatorListChanged=o,h.opListReadCapability=Promise.withResolvers(),(h.renderTasks||(h.renderTasks=new Set)).add(d),h.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(p=this._stats)==null||p.time("Page Request"),this._pumpOperatorList(l)),h.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>Uu.textContent(n));const t=this.streamTextContent(e);return new Promise(function(n,r){function o(){l.read().then(function({value:d,done:p}){if(p){n(h);return}h.lang??(h.lang=d.lang),Object.assign(h.styles,d.styles),h.items.push(...d.items),o()},r)}const l=t.getReader(),h={items:[],styles:Object.create(null),lang:null};o()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const n of t.renderTasks)e.push(n.completed),n.cancel();return this.objs.clear(),S(this,js,!1),x(this,pi,qf).call(this),Promise.all(e)}cleanup(e=!1){S(this,js,!0);const t=x(this,pi,wl).call(this,!1);return e&&t&&this._stats&&(this._stats=new Lb),t}_startRenderPage(e,t){var r,o;const n=this._intentStates.get(t);n&&((r=this._stats)==null||r.timeEnd("Page Request"),(o=n.displayReadyCapability)==null||o.resolve(e))}_renderPageChunk(e,t){for(let n=0,r=e.length;n<r;n++)t.operatorList.fnArray.push(e.fnArray[n]),t.operatorList.argsArray.push(e.argsArray[n]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const n of t.renderTasks)n.operatorListChanged();e.lastChunk&&x(this,pi,wl).call(this,!0)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:n,modifiedIds:r}){const{map:o,transfer:l}=n,d=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:o,modifiedIds:r},l).getReader(),p=this._intentStates.get(t);p.streamReader=d;const g=()=>{d.read().then(({value:y,done:v})=>{if(v){p.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(y,p),g())},y=>{if(p.streamReader=null,!this._transport.destroyed){if(p.operatorList){p.operatorList.lastChunk=!0;for(const v of p.renderTasks)v.operatorListChanged();x(this,pi,wl).call(this,!0)}if(p.displayReadyCapability)p.displayReadyCapability.reject(y);else if(p.opListReadCapability)p.opListReadCapability.reject(y);else throw y}})};g()}_abortOperatorList({intentState:e,reason:t,force:n=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!n){if(e.renderTasks.size>0)return;if(t instanceof qv){let r=IP;t.extraDelay>0&&t.extraDelay<1e3&&(r+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},r);return}}if(e.streamReader.cancel(new Ha(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[r,o]of this._intentStates)if(o===e){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}Gr=new WeakMap,js=new WeakMap,pi=new WeakSet,wl=function(e=!1){if(x(this,pi,qf).call(this),!u(this,js)||this.destroyed)return!1;if(e)return S(this,Gr,setTimeout(()=>{S(this,Gr,null),x(this,pi,wl).call(this,!1)},FP)),!1;for(const{renderTasks:t,operatorList:n}of this._intentStates.values())if(t.size>0||!n.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),S(this,js,!1),!0},qf=function(){u(this,Gr)&&(clearTimeout(u(this,Gr)),S(this,Gr,null))};var Bs,Mp;class WP{constructor(){T(this,Bs,new Map);T(this,Mp,Promise.resolve())}postMessage(e,t){const n={data:structuredClone(e,t?{transfer:t}:null)};u(this,Mp).then(()=>{for(const[r]of u(this,Bs))r.call(this,n)})}addEventListener(e,t,n=null){let r=null;if((n==null?void 0:n.signal)instanceof AbortSignal){const{signal:o}=n;if(o.aborted){Ne("LoopbackPort - cannot use an `aborted` signal.");return}const l=()=>this.removeEventListener(e,t);r=()=>o.removeEventListener("abort",l),o.addEventListener("abort",l)}u(this,Bs).set(t,r)}removeEventListener(e,t){const n=u(this,Bs).get(t);n==null||n(),u(this,Bs).delete(t)}terminate(){for(const[,e]of u(this,Bs))e==null||e();u(this,Bs).clear()}}Bs=new WeakMap,Mp=new WeakMap;var Ip,aa,la,Yl,Xf,Ql,Kf;const lt=class lt{constructor({name:e=null,port:t=null,verbosity:n=SR()}={}){T(this,Yl);var r;if(this.name=e,this.destroyed=!1,this.verbosity=n,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,t){if((r=u(lt,la))!=null&&r.has(t))throw new Error("Cannot use more than one PDFWorker per port.");(u(lt,la)||S(lt,la,new WeakMap)).set(t,this),this._initializeFromPort(t);return}this._initialize()}get promise(){return pn?Promise.all([ao.promise,this._readyCapability.promise]):this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new ku("main","worker",e),this._messageHandler.on("ready",function(){}),x(this,Yl,Xf).call(this)}_initialize(){if(u(lt,aa)||u(lt,Ql,Kf)){this._setupFakeWorker();return}let{workerSrc:e}=lt;try{lt._isSameOrigin(window.location.href,e)||(e=lt._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),n=new ku("main","worker",t),r=()=>{o.abort(),n.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},o=new AbortController;t.addEventListener("error",()=>{this._webWorker||r()},{signal:o.signal}),n.on("test",h=>{if(o.abort(),this.destroyed||!h){r();return}this._messageHandler=n,this._port=t,this._webWorker=t,x(this,Yl,Xf).call(this)}),n.on("ready",h=>{if(o.abort(),this.destroyed){r();return}try{l()}catch{this._setupFakeWorker()}});const l=()=>{const h=new Uint8Array;n.send("test",h,[h.buffer])};l();return}catch{Gp("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){u(lt,aa)||(Ne("Setting up fake worker."),S(lt,aa,!0)),lt._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const t=new WP;this._port=t;const n=`fake${yn(lt,Ip)._++}`,r=new ku(n+"_worker",n,t);e.setup(r,t),this._messageHandler=new ku(n,n+"_worker",t),x(this,Yl,Xf).call(this)}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){var e;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(e=u(lt,la))==null||e.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(e){var n;if(!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const t=(n=u(this,la))==null?void 0:n.get(e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new lt(e)}static get workerSrc(){if(tr.workerSrc)return tr.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Ue(this,"_setupFakeWorkerGlobal",(async()=>u(this,Ql,Kf)?u(this,Ql,Kf):(await import(this.workerSrc)).WorkerMessageHandler)())}};Ip=new WeakMap,aa=new WeakMap,la=new WeakMap,Yl=new WeakSet,Xf=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},Ql=new WeakSet,Kf=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},T(lt,Ql),T(lt,Ip,0),T(lt,aa,!1),T(lt,la),pn&&(S(lt,aa,!0),tr.workerSrc||(tr.workerSrc="./pdf.worker.mjs")),lt._isSameOrigin=(e,t)=>{let n;try{if(n=new URL(e),!n.origin||n.origin==="null")return!1}catch{return!1}const r=new URL(t,n);return n.origin===r.origin},lt._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))};let _l=lt;var zs,as,Jl,Zl,ls,ca,Ru;class VP{constructor(e,t,n,r,o){T(this,ca);T(this,zs,new Map);T(this,as,new Map);T(this,Jl,new Map);T(this,Zl,new Map);T(this,ls,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new VE,this.fontLoader=new UR({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=o.canvasFactory,this.filterFactory=o.filterFactory,this.cMapReaderFactory=o.cMapReaderFactory,this.standardFontDataFactory=o.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return Ue(this,"annotationStorage",new Qv)}getRenderingIntent(e,t=Pr.ENABLE,n=null,r=!1,o=!1){let l=Jn.DISPLAY,h=Ny;switch(e){case"any":l=Jn.ANY;break;case"display":break;case"print":l=Jn.PRINT;break;default:Ne(`getRenderingIntent - invalid intent: ${e}`)}const d=l&Jn.PRINT&&n instanceof SE?n:this.annotationStorage;switch(t){case Pr.DISABLE:l+=Jn.ANNOTATIONS_DISABLE;break;case Pr.ENABLE:break;case Pr.ENABLE_FORMS:l+=Jn.ANNOTATIONS_FORMS;break;case Pr.ENABLE_STORAGE:l+=Jn.ANNOTATIONS_STORAGE,h=d.serializable;break;default:Ne(`getRenderingIntent - invalid annotationMode: ${t}`)}r&&(l+=Jn.IS_EDITING),o&&(l+=Jn.OPLIST);const{ids:p,hash:g}=d.modifiedIds,y=[l,h.hash,g];return{renderingIntent:l,cacheKey:y.join("_"),annotationStorageSerializable:h,modifiedIds:p}}destroy(){var n;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(n=u(this,ls))==null||n.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const r of u(this,as).values())e.push(r._destroy());u(this,as).clear(),u(this,Jl).clear(),u(this,Zl).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var r;this.commonObjs.clear(),this.fontLoader.clear(),u(this,zs).clear(),this.filterFactory.destroy(),Gy.cleanup(),(r=this._networkStream)==null||r.cancelAllRequests(new Ha("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(n,r)=>{Ot(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=o=>{this._lastProgress={loaded:o.loaded,total:o.total}},r.onPull=()=>{this._fullReader.read().then(function({value:o,done:l}){if(l){r.close();return}Ot(o instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{r.error(o)})},r.onCancel=o=>{this._fullReader.cancel(o),r.ready.catch(l=>{if(!this.destroyed)throw l})}}),e.on("ReaderHeadersReady",async n=>{var h;await this._fullReader.headersReady;const{isStreamingSupported:r,isRangeSupported:o,contentLength:l}=this._fullReader;return(!r||!o)&&(this._lastProgress&&((h=t.onProgress)==null||h.call(t,this._lastProgress)),this._fullReader.onProgress=d=>{var p;(p=t.onProgress)==null||p.call(t,{loaded:d.loaded,total:d.total})}),{isStreamingSupported:r,isRangeSupported:o,contentLength:l}}),e.on("GetRangeReader",(n,r)=>{Ot(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const o=this._networkStream.getRangeReader(n.begin,n.end);if(!o){r.close();return}r.onPull=()=>{o.read().then(function({value:l,done:h}){if(h){r.close();return}Ot(l instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(l),1,[l])}).catch(l=>{r.error(l)})},r.onCancel=l=>{o.cancel(l),r.ready.catch(h=>{if(!this.destroyed)throw h})}}),e.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,t._capability.resolve(new UP(n,this))}),e.on("DocException",function(n){let r;switch(n.name){case"PasswordException":r=new gy(n.message,n.code);break;case"InvalidPDFException":r=new XS(n.message);break;case"MissingPDFException":r=new za(n.message);break;case"UnexpectedResponseException":r=new qp(n.message,n.status);break;case"UnknownErrorException":r=new my(n.message,n.details);break;default:rt("DocException - expected a valid Error.")}t._capability.reject(r)}),e.on("PasswordRequest",n=>{if(S(this,ls,Promise.withResolvers()),t.onPassword){const r=o=>{o instanceof Error?u(this,ls).reject(o):u(this,ls).resolve({password:o})};try{t.onPassword(r,n.code)}catch(o){u(this,ls).reject(o)}}else u(this,ls).reject(new gy(n.message,n.code));return u(this,ls).promise}),e.on("DataLoaded",n=>{var r;(r=t.onProgress)==null||r.call(t,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),e.on("StartRenderPage",n=>{if(this.destroyed)return;u(this,as).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),e.on("commonobj",([n,r,o])=>{var l;if(this.destroyed||this.commonObjs.has(n))return null;switch(r){case"Font":const{disableFontFace:h,fontExtraProperties:d,pdfBug:p}=this._params;if("error"in o){const b=o.error;Ne(`Error during font loading: ${b}`),this.commonObjs.resolve(n,b);break}const g=p&&((l=globalThis.FontInspector)!=null&&l.enabled)?(b,A)=>globalThis.FontInspector.fontAdded(b,A):null,y=new $R(o,{disableFontFace:h,inspectFont:g});this.fontLoader.bind(y).catch(()=>e.sendWithPromise("FontFallback",{id:n})).finally(()=>{!d&&y.data&&(y.data=null),this.commonObjs.resolve(n,y)});break;case"CopyLocalImage":const{imageRef:v}=o;Ot(v,"The imageRef must be defined.");for(const b of u(this,as).values())for(const[,A]of b.objs)if((A==null?void 0:A.ref)===v)return A.dataLen?(this.commonObjs.resolve(n,structuredClone(A)),A.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,o);break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),e.on("obj",([n,r,o,l])=>{var d;if(this.destroyed)return;const h=u(this,as).get(r);if(!h.objs.has(n)){if(h._intentStates.size===0){(d=l==null?void 0:l.bitmap)==null||d.close();return}switch(o){case"Image":h.objs.resolve(n,l),(l==null?void 0:l.dataLen)>yR&&(h._maybeCleanupAfterRender=!0);break;case"Pattern":h.objs.resolve(n,l);break;default:throw new Error(`Got unknown object type ${o}`)}}}),e.on("DocProgress",n=>{var r;this.destroyed||(r=t.onProgress)==null||r.call(t,{loaded:n.loaded,total:n.total})}),e.on("FetchBuiltInCMap",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(n)}),e.on("FetchStandardFontData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var n;this.annotationStorage.size<=0&&Ne("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((n=this._fullReader)==null?void 0:n.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,n=u(this,Jl).get(t);if(n)return n;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(o=>{if(this.destroyed)throw new Error("Transport destroyed");o.refStr&&u(this,Zl).set(o.refStr,e);const l=new $P(t,o,this,this._params.pdfBug);return u(this,as).set(t,l),l});return u(this,Jl).set(t,r),r}getPageIndex(e){return Vb(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return x(this,ca,Ru).call(this,"GetFieldObjects")}hasJSActions(){return x(this,ca,Ru).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return x(this,ca,Ru).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return x(this,ca,Ru).call(this,"GetOptionalContentConfig").then(t=>new hP(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=u(this,zs).get(e);if(t)return t;const n=this.messageHandler.sendWithPromise(e,null).then(r=>{var o,l;return{info:r[0],metadata:r[1]?new cP(r[1]):null,contentDispositionFilename:((o=this._fullReader)==null?void 0:o.filename)??null,contentLength:((l=this._fullReader)==null?void 0:l.contentLength)??null}});return u(this,zs).set(e,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of u(this,as).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),u(this,zs).clear(),this.filterFactory.destroy(!0),Gy.cleanup()}}cachedPageNumber(e){if(!Vb(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return u(this,Zl).get(t)??null}}zs=new WeakMap,as=new WeakMap,Jl=new WeakMap,Zl=new WeakMap,ls=new WeakMap,ca=new WeakSet,Ru=function(e,t=null){const n=u(this,zs).get(e);if(n)return n;const r=this.messageHandler.sendWithPromise(e,t);return u(this,zs).set(e,r),r};const Mf=Symbol("INITIAL_DATA");var Ii,xh,Yy;class VE{constructor(){T(this,xh);T(this,Ii,Object.create(null))}get(e,t=null){if(t){const r=x(this,xh,Yy).call(this,e);return r.promise.then(()=>t(r.data)),null}const n=u(this,Ii)[e];if(!n||n.data===Mf)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return n.data}has(e){const t=u(this,Ii)[e];return!!t&&t.data!==Mf}resolve(e,t=null){const n=x(this,xh,Yy).call(this,e);n.data=t,n.resolve()}clear(){var e;for(const t in u(this,Ii)){const{data:n}=u(this,Ii)[t];(e=n==null?void 0:n.bitmap)==null||e.close()}S(this,Ii,Object.create(null))}*[Symbol.iterator](){for(const e in u(this,Ii)){const{data:t}=u(this,Ii)[e];t!==Mf&&(yield[e,t])}}}Ii=new WeakMap,xh=new WeakSet,Yy=function(e){var t;return(t=u(this,Ii))[e]||(t[e]={...Promise.withResolvers(),data:Mf})};var qr;class GP{constructor(e){T(this,qr,null);S(this,qr,e),this.onContinue=null}get promise(){return u(this,qr).capability.promise}cancel(e=0){u(this,qr).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=u(this,qr).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=u(this,qr);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}qr=new WeakMap;var Xr,ua;const Fo=class Fo{constructor({callback:e,params:t,objs:n,commonObjs:r,annotationCanvasMap:o,operatorList:l,pageIndex:h,canvasFactory:d,filterFactory:p,useRequestAnimationFrame:g=!1,pdfBug:y=!1,pageColors:v=null}){T(this,Xr,null);this.callback=e,this.params=t,this.objs=n,this.commonObjs=r,this.annotationCanvasMap=o,this.operatorListIdx=null,this.operatorList=l,this._pageIndex=h,this.canvasFactory=d,this.filterFactory=p,this._pdfBug=y,this.pageColors=v,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=g===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new GP(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var h,d;if(this.cancelled)return;if(this._canvas){if(u(Fo,ua).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");u(Fo,ua).add(this._canvas)}this._pdfBug&&((h=globalThis.StepperManager)!=null&&h.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:n,viewport:r,transform:o,background:l}=this.params;this.gfx=new El(n,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:o,viewport:r,transparency:e,background:l}),this.operatorListIdx=0,this.graphicsReady=!0,(d=this.graphicsReadyCallback)==null||d.call(this)}cancel(e=null,t=0){var n;this.running=!1,this.cancelled=!0,(n=this.gfx)==null||n.endDrawing(),u(this,Xr)&&(window.cancelAnimationFrame(u(this,Xr)),S(this,Xr,null)),u(Fo,ua).delete(this._canvas),this.callback(e||new qv(`Rendering cancelled, page ${this._pageIndex+1}`,t))}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?S(this,Xr,window.requestAnimationFrame(()=>{S(this,Xr,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),u(Fo,ua).delete(this._canvas),this.callback())))}};Xr=new WeakMap,ua=new WeakMap,T(Fo,ua,new WeakSet);let Qy=Fo;const qP="4.8.69",XP="3634dab10";function Gb(a){return Math.floor(Math.max(0,Math.min(1,a))*255).toString(16).padStart(2,"0")}function Au(a){return Math.max(0,Math.min(255,255*a))}class qb{static CMYK_G([e,t,n,r]){return["G",1-Math.min(1,.3*e+.59*n+.11*t+r)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=Au(e),[e,e,e]}static G_HTML([e]){const t=Gb(e);return`#${t}${t}${t}`}static RGB_G([e,t,n]){return["G",.3*e+.59*t+.11*n]}static RGB_rgb(e){return e.map(Au)}static RGB_HTML(e){return`#${e.map(Gb).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,n,r]){return["RGB",1-Math.min(1,e+r),1-Math.min(1,n+r),1-Math.min(1,t+r)]}static CMYK_rgb([e,t,n,r]){return[Au(1-Math.min(1,e+r)),Au(1-Math.min(1,n+r)),Au(1-Math.min(1,t+r))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,n]){const r=1-e,o=1-t,l=1-n,h=Math.min(r,o,l);return["CMYK",r,o,l,h]}}class KP{create(e,t,n=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),n||(r.setAttribute("width",`${e}px`),r.setAttribute("height",`${t}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${e} ${t}`),r}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){rt("Abstract method `_createSVG` called.")}}class n0 extends KP{_createSVG(e){return document.createElementNS(ks,e)}}class GE{static setupStorage(e,t,n,r,o){const l=r.getValue(t,{value:null});switch(n.name){case"textarea":if(l.value!==null&&(e.textContent=l.value),o==="print")break;e.addEventListener("input",h=>{r.setValue(t,{value:h.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(l.value===n.attributes.xfaOn?e.setAttribute("checked",!0):l.value===n.attributes.xfaOff&&e.removeAttribute("checked"),o==="print")break;e.addEventListener("change",h=>{r.setValue(t,{value:h.target.checked?h.target.getAttribute("xfaOn"):h.target.getAttribute("xfaOff")})})}else{if(l.value!==null&&e.setAttribute("value",l.value),o==="print")break;e.addEventListener("input",h=>{r.setValue(t,{value:h.target.value})})}break;case"select":if(l.value!==null){e.setAttribute("value",l.value);for(const h of n.children)h.attributes.value===l.value?h.attributes.selected=!0:h.attributes.hasOwnProperty("selected")&&delete h.attributes.selected}e.addEventListener("input",h=>{const d=h.target.options,p=d.selectedIndex===-1?"":d[d.selectedIndex].value;r.setValue(t,{value:p})});break}}static setAttributes({html:e,element:t,storage:n=null,intent:r,linkService:o}){const{attributes:l}=t,h=e instanceof HTMLAnchorElement;l.type==="radio"&&(l.name=`${l.name}-${r}`);for(const[d,p]of Object.entries(l))if(p!=null)switch(d){case"class":p.length&&e.setAttribute(d,p.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",p);break;case"style":Object.assign(e.style,p);break;case"textContent":e.textContent=p;break;default:(!h||d!=="href"&&d!=="newWindow")&&e.setAttribute(d,p)}h&&o.addLinkAttributes(e,l.href,l.newWindow),n&&l.dataId&&this.setupStorage(e,l.dataId,t,n)}static render(e){var y,v;const t=e.annotationStorage,n=e.linkService,r=e.xfaHtml,o=e.intent||"display",l=document.createElement(r.name);r.attributes&&this.setAttributes({html:l,element:r,intent:o,linkService:n});const h=o!=="richText",d=e.div;if(d.append(l),e.viewport){const b=`matrix(${e.viewport.transform.join(",")})`;d.style.transform=b}h&&d.setAttribute("class","xfaLayer xfaFont");const p=[];if(r.children.length===0){if(r.value){const b=document.createTextNode(r.value);l.append(b),h&&Uu.shouldBuildText(r.name)&&p.push(b)}return{textDivs:p}}const g=[[r,-1,l]];for(;g.length>0;){const[b,A,E]=g.at(-1);if(A+1===b.children.length){g.pop();continue}const C=b.children[++g.at(-1)[1]];if(C===null)continue;const{name:k}=C;if(k==="#text"){const M=document.createTextNode(C.value);p.push(M),E.append(M);continue}const L=(y=C==null?void 0:C.attributes)!=null&&y.xmlns?document.createElementNS(C.attributes.xmlns,k):document.createElement(k);if(E.append(L),C.attributes&&this.setAttributes({html:L,element:C,storage:t,intent:o,linkService:n}),((v=C.children)==null?void 0:v.length)>0)g.push([C,-1,L]);else if(C.value){const M=document.createTextNode(C.value);h&&Uu.shouldBuildText(k)&&p.push(M),L.append(M)}}for(const b of d.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))b.setAttribute("readOnly",!0);return{textDivs:p}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const dd=1e3,YP=9,Oa=new WeakSet;function nr(a){return{width:a[2]-a[0],height:a[3]-a[1]}}class QP{static create(e){switch(e.data.annotationType){case Mt.LINK:return new qE(e);case Mt.TEXT:return new JP(e);case Mt.WIDGET:switch(e.data.fieldType){case"Tx":return new ZP(e);case"Btn":return e.data.radioButton?new YE(e):e.data.checkBox?new tL(e):new nL(e);case"Ch":return new iL(e);case"Sig":return new eL(e)}return new Ua(e);case Mt.POPUP:return new Zy(e);case Mt.FREETEXT:return new t_(e);case Mt.LINE:return new rL(e);case Mt.SQUARE:return new oL(e);case Mt.CIRCLE:return new aL(e);case Mt.POLYLINE:return new n_(e);case Mt.CARET:return new cL(e);case Mt.INK:return new i0(e);case Mt.POLYGON:return new lL(e);case Mt.HIGHLIGHT:return new i_(e);case Mt.UNDERLINE:return new uL(e);case Mt.SQUIGGLY:return new hL(e);case Mt.STRIKEOUT:return new dL(e);case Mt.STAMP:return new s_(e);case Mt.FILEATTACHMENT:return new fL(e);default:return new _t(e)}}}var ha,ec,tc,Ch,Jy;const a0=class a0{constructor(e,{isRenderable:t=!1,ignoreBorder:n=!1,createQuadrilaterals:r=!1}={}){T(this,Ch);T(this,ha,null);T(this,ec,!1);T(this,tc,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(n)),r&&this._createQuadrilaterals()}static _hasPopupData({titleObj:e,contentsObj:t,richText:n}){return!!(e!=null&&e.str||t!=null&&t.str||n!=null&&n.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return a0._hasPopupData(this.data)}updateEdited(e){var n;if(!this.container)return;u(this,ha)||S(this,ha,{rect:this.data.rect.slice(0)});const{rect:t}=e;t&&x(this,Ch,Jy).call(this,t),(n=u(this,tc))==null||n.popup.updateEdited(e)}resetEdited(){var e;u(this,ha)&&(x(this,Ch,Jy).call(this,u(this,ha).rect),(e=u(this,tc))==null||e.popup.resetEdited(),S(this,ha,null))}_createContainer(e){const{data:t,parent:{page:n,viewport:r}}=this,o=document.createElement("section");o.setAttribute("data-annotation-id",t.id),this instanceof Ua||(o.tabIndex=dd);const{style:l}=o;if(l.zIndex=this.parent.zIndex++,t.alternativeText&&(o.title=t.alternativeText),t.noRotate&&o.classList.add("norotate"),!t.rect||this instanceof Zy){const{rotation:E}=t;return!t.hasOwnCanvas&&E!==0&&this.setRotation(E,o),o}const{width:h,height:d}=nr(t.rect);if(!e&&t.borderStyle.width>0){l.borderWidth=`${t.borderStyle.width}px`;const E=t.borderStyle.horizontalCornerRadius,C=t.borderStyle.verticalCornerRadius;if(E>0||C>0){const L=`calc(${E}px * var(--scale-factor)) / calc(${C}px * var(--scale-factor))`;l.borderRadius=L}else if(this instanceof YE){const L=`calc(${h}px * var(--scale-factor)) / calc(${d}px * var(--scale-factor))`;l.borderRadius=L}switch(t.borderStyle.style){case vu.SOLID:l.borderStyle="solid";break;case vu.DASHED:l.borderStyle="dashed";break;case vu.BEVELED:Ne("Unimplemented border style: beveled");break;case vu.INSET:Ne("Unimplemented border style: inset");break;case vu.UNDERLINE:l.borderBottomStyle="solid";break}const k=t.borderColor||null;k?(S(this,ec,!0),l.borderColor=Ae.makeHexColor(k[0]|0,k[1]|0,k[2]|0)):l.borderWidth=0}const p=Ae.normalizeRect([t.rect[0],n.view[3]-t.rect[1]+n.view[1],t.rect[2],n.view[3]-t.rect[3]+n.view[1]]),{pageWidth:g,pageHeight:y,pageX:v,pageY:b}=r.rawDims;l.left=`${100*(p[0]-v)/g}%`,l.top=`${100*(p[1]-b)/y}%`;const{rotation:A}=t;return t.hasOwnCanvas||A===0?(l.width=`${100*h/g}%`,l.height=`${100*d/y}%`):this.setRotation(A,o),o}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:r}=this.parent.viewport.rawDims,{width:o,height:l}=nr(this.data.rect);let h,d;e%180===0?(h=100*o/n,d=100*l/r):(h=100*l/n,d=100*o/r),t.style.width=`${h}%`,t.style.height=`${d}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,n,r)=>{const o=r.detail[t],l=o[0],h=o.slice(1);r.target.style[n]=qb[`${l}_HTML`](h),this.annotationStorage.setValue(this.data.id,{[n]:qb[`${l}_rgb`](h)})};return Ue(this,"_commonActions",{display:t=>{const{display:n}=t.detail,r=n%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:n===1||n===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:n}=t.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const n=t.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(e,t){const n=this._commonActions;for(const r of Object.keys(t.detail)){const o=e[r]||n[r];o==null||o(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const n=this._commonActions;for(const[r,o]of Object.entries(t)){const l=n[r];if(l){const h={detail:{[r]:o},target:e};l(h),delete t[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,n,r,o]=this.data.rect.map(E=>Math.fround(E));if(e.length===8){const[E,C,k,L]=e.subarray(2,6);if(r===E&&o===C&&t===k&&n===L)return}const{style:l}=this.container;let h;if(u(this,ec)){const{borderColor:E,borderWidth:C}=l;l.borderWidth=0,h=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${E}" stroke-width="${C}">`],this.container.classList.add("hasBorder")}const d=r-t,p=o-n,{svgFactory:g}=this,y=g.createElement("svg");y.classList.add("quadrilateralsContainer"),y.setAttribute("width",0),y.setAttribute("height",0);const v=g.createElement("defs");y.append(v);const b=g.createElement("clipPath"),A=`clippath_${this.data.id}`;b.setAttribute("id",A),b.setAttribute("clipPathUnits","objectBoundingBox"),v.append(b);for(let E=2,C=e.length;E<C;E+=8){const k=e[E],L=e[E+1],M=e[E+2],F=e[E+3],z=g.createElement("rect"),U=(M-t)/d,N=(o-L)/p,q=(k-M)/d,J=(L-F)/p;z.setAttribute("x",U),z.setAttribute("y",N),z.setAttribute("width",q),z.setAttribute("height",J),b.append(z),h==null||h.push(`<rect vector-effect="non-scaling-stroke" x="${U}" y="${N}" width="${q}" height="${J}"/>`)}u(this,ec)&&(h.push("</g></svg>')"),l.backgroundImage=h.join("")),this.container.append(y),this.container.style.clipPath=`url(#${A})`}_createPopup(){const{data:e}=this,t=S(this,tc,new Zy({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(t.render())}render(){rt("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const n=[];if(this._fieldObjects){const r=this._fieldObjects[e];if(r)for(const{page:o,id:l,exportValues:h}of r){if(o===-1||l===t)continue;const d=typeof h=="string"?h:null,p=document.querySelector(`[data-element-id="${l}"]`);if(p&&!Oa.has(p)){Ne(`_getElementsByName - element not allowed: ${l}`);continue}n.push({id:l,exportValue:d,domElement:p})}return n}for(const r of document.getElementsByName(e)){const{exportValue:o}=r,l=r.getAttribute("data-element-id");l!==t&&Oa.has(r)&&n.push({id:l,exportValue:o,domElement:r})}return n}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var n;(n=this.linkService.eventBus)==null||n.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})})}};ha=new WeakMap,ec=new WeakMap,tc=new WeakMap,Ch=new WeakSet,Jy=function(e){const{container:{style:t},data:{rect:n,rotation:r},parent:{viewport:{rawDims:{pageWidth:o,pageHeight:l,pageX:h,pageY:d}}}}=this;n==null||n.splice(0,4,...e);const{width:p,height:g}=nr(e);t.left=`${100*(e[0]-h)/o}%`,t.top=`${100*(l-e[3]+d)/l}%`,r===0?(t.width=`${100*p/o}%`,t.height=`${100*g/l}%`):this.setRotation(r)};let _t=a0;var Zn,Ro,XE,KE;class qE extends _t{constructor(t,n=null){super(t,{isRenderable:!0,ignoreBorder:!!(n!=null&&n.ignoreBorder),createQuadrilaterals:!0});T(this,Zn);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:n}=this,r=document.createElement("a");r.setAttribute("data-element-id",t.id);let o=!1;return t.url?(n.addLinkAttributes(r,t.url,t.newWindow),o=!0):t.action?(this._bindNamedAction(r,t.action),o=!0):t.attachment?(x(this,Zn,XE).call(this,r,t.attachment,t.attachmentDest),o=!0):t.setOCGState?(x(this,Zn,KE).call(this,r,t.setOCGState),o=!0):t.dest?(this._bindLink(r,t.dest),o=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(r,t),o=!0),t.resetForm?(this._bindResetFormAction(r,t.resetForm),o=!0):this.isTooltipOnly&&!o&&(this._bindLink(r,""),o=!0)),this.container.classList.add("linkAnnotation"),o&&this.container.append(r),this.container}_bindLink(t,n){t.href=this.linkService.getDestinationHash(n),t.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&x(this,Zn,Ro).call(this)}_bindNamedAction(t,n){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(n),!1),x(this,Zn,Ro).call(this)}_bindJSAction(t,n){t.href=this.linkService.getAnchorUrl("");const r=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const o of Object.keys(n.actions)){const l=r.get(o);l&&(t[l]=()=>{var h;return(h=this.linkService.eventBus)==null||h.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:o}}),!1})}t.onclick||(t.onclick=()=>!1),x(this,Zn,Ro).call(this)}_bindResetFormAction(t,n){const r=t.onclick;if(r||(t.href=this.linkService.getAnchorUrl("")),x(this,Zn,Ro).call(this),!this._fieldObjects){Ne('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),r||(t.onclick=()=>!1);return}t.onclick=()=>{var y;r==null||r();const{fields:o,refs:l,include:h}=n,d=[];if(o.length!==0||l.length!==0){const v=new Set(l);for(const b of o){const A=this._fieldObjects[b]||[];for(const{id:E}of A)v.add(E)}for(const b of Object.values(this._fieldObjects))for(const A of b)v.has(A.id)===h&&d.push(A)}else for(const v of Object.values(this._fieldObjects))d.push(...v);const p=this.annotationStorage,g=[];for(const v of d){const{id:b}=v;switch(g.push(b),v.type){case"text":{const E=v.defaultValue||"";p.setValue(b,{value:E});break}case"checkbox":case"radiobutton":{const E=v.defaultValue===v.exportValues;p.setValue(b,{value:E});break}case"combobox":case"listbox":{const E=v.defaultValue||"";p.setValue(b,{value:E});break}default:continue}const A=document.querySelector(`[data-element-id="${b}"]`);if(A){if(!Oa.has(A)){Ne(`_bindResetFormAction - element not allowed: ${b}`);continue}}else continue;A.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((y=this.linkService.eventBus)==null||y.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:g,name:"ResetForm"}})),!1}}}Zn=new WeakSet,Ro=function(){this.container.setAttribute("data-internal-link","")},XE=function(t,n,r=null){t.href=this.linkService.getAnchorUrl(""),n.description&&(t.title=n.description),t.onclick=()=>{var o;return(o=this.downloadManager)==null||o.openOrDownloadData(n.content,n.filename,r),!1},x(this,Zn,Ro).call(this)},KE=function(t,n){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(n),!1),x(this,Zn,Ro).call(this)};class JP extends _t{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class Ua extends _t{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return bn.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,n,r,o){n.includes("mouse")?e.addEventListener(n,l=>{var h;(h=this.linkService.eventBus)==null||h.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:o(l),shift:l.shiftKey,modifier:this._getKeyModifier(l)}})}):e.addEventListener(n,l=>{var h;if(n==="blur"){if(!t.focused||!l.relatedTarget)return;t.focused=!1}else if(n==="focus"){if(t.focused)return;t.focused=!0}o&&((h=this.linkService.eventBus)==null||h.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:o(l)}}))})}_setEventListeners(e,t,n,r){var o,l,h;for(const[d,p]of n)(p==="Action"||(o=this.data.actions)!=null&&o[p])&&((p==="Focus"||p==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,d,p,r),p==="Focus"&&!((l=this.data.actions)!=null&&l.Blur)?this._setEventListener(e,t,"blur","Blur",null):p==="Blur"&&!((h=this.data.actions)!=null&&h.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":Ae.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||YP,o=e.style;let l;const h=2,d=p=>Math.round(10*p)/10;if(this.data.multiLine){const p=Math.abs(this.data.rect[3]-this.data.rect[1]-h),g=Math.round(p/(ey*r))||1,y=p/g;l=Math.min(r,d(y/ey))}else{const p=Math.abs(this.data.rect[3]-this.data.rect[1]-h);l=Math.min(r,d(p/ey))}o.fontSize=`calc(${l}px * var(--scale-factor))`,o.color=Ae.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(o.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class ZP extends Ua{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,n,r){const o=this.annotationStorage;for(const l of this._getElementsByName(e.name,e.id))l.domElement&&(l.domElement[t]=n),o.setValue(l.id,{[r]:n})}render(){var r,o;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const l=e.getValue(t,{value:this.data.fieldValue});let h=l.value||"";const d=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;d&&h.length>d&&(h=h.slice(0,d));let p=l.formattedValue||((r=this.data.textContent)==null?void 0:r.join(`
`))||null;p&&this.data.comb&&(p=p.replaceAll(/\s+/g,""));const g={userValue:h,formattedValue:p,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=p??h,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type="text",n.setAttribute("value",p??h),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),Oa.add(n),n.setAttribute("data-element-id",t),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=dd,this._setRequired(n,this.data.required),d&&(n.maxLength=d),n.addEventListener("input",v=>{e.setValue(t,{value:v.target.value}),this.setPropertyOnSiblings(n,"value",v.target.value,"value"),g.formattedValue=null}),n.addEventListener("resetform",v=>{const b=this.data.defaultFieldValue??"";n.value=g.userValue=b,g.formattedValue=null});let y=v=>{const{formattedValue:b}=g;b!=null&&(v.target.value=b),v.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",b=>{var E;if(g.focused)return;const{target:A}=b;g.userValue&&(A.value=g.userValue),g.lastCommittedValue=A.value,g.commitKey=1,(E=this.data.actions)!=null&&E.Focus||(g.focused=!0)}),n.addEventListener("updatefromsandbox",b=>{this.showElementAndHideCanvas(b.target);const A={value(E){g.userValue=E.detail.value??"",e.setValue(t,{value:g.userValue.toString()}),E.target.value=g.userValue},formattedValue(E){const{formattedValue:C}=E.detail;g.formattedValue=C,C!=null&&E.target!==document.activeElement&&(E.target.value=C),e.setValue(t,{formattedValue:C})},selRange(E){E.target.setSelectionRange(...E.detail.selRange)},charLimit:E=>{var M;const{charLimit:C}=E.detail,{target:k}=E;if(C===0){k.removeAttribute("maxLength");return}k.setAttribute("maxLength",C);let L=g.userValue;!L||L.length<=C||(L=L.slice(0,C),k.value=g.userValue=L,e.setValue(t,{value:L}),(M=this.linkService.eventBus)==null||M.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:L,willCommit:!0,commitKey:1,selStart:k.selectionStart,selEnd:k.selectionEnd}}))}};this._dispatchEventFromSandbox(A,b)}),n.addEventListener("keydown",b=>{var C;g.commitKey=1;let A=-1;if(b.key==="Escape"?A=0:b.key==="Enter"&&!this.data.multiLine?A=2:b.key==="Tab"&&(g.commitKey=3),A===-1)return;const{value:E}=b.target;g.lastCommittedValue!==E&&(g.lastCommittedValue=E,g.userValue=E,(C=this.linkService.eventBus)==null||C.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:E,willCommit:!0,commitKey:A,selStart:b.target.selectionStart,selEnd:b.target.selectionEnd}}))});const v=y;y=null,n.addEventListener("blur",b=>{var E,C;if(!g.focused||!b.relatedTarget)return;(E=this.data.actions)!=null&&E.Blur||(g.focused=!1);const{value:A}=b.target;g.userValue=A,g.lastCommittedValue!==A&&((C=this.linkService.eventBus)==null||C.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:A,willCommit:!0,commitKey:g.commitKey,selStart:b.target.selectionStart,selEnd:b.target.selectionEnd}})),v(b)}),(o=this.data.actions)!=null&&o.Keystroke&&n.addEventListener("beforeinput",b=>{var z;g.lastCommittedValue=null;const{data:A,target:E}=b,{value:C,selectionStart:k,selectionEnd:L}=E;let M=k,F=L;switch(b.inputType){case"deleteWordBackward":{const U=C.substring(0,k).match(/\w*[^\w]*$/);U&&(M-=U[0].length);break}case"deleteWordForward":{const U=C.substring(k).match(/^[^\w]*\w*/);U&&(F+=U[0].length);break}case"deleteContentBackward":k===L&&(M-=1);break;case"deleteContentForward":k===L&&(F+=1);break}b.preventDefault(),(z=this.linkService.eventBus)==null||z.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:C,change:A||"",willCommit:!1,selStart:M,selEnd:F}})}),this._setEventListeners(n,g,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],b=>b.target.value)}if(y&&n.addEventListener("blur",y),this.data.comb){const b=(this.data.rect[2]-this.data.rect[0])/d;n.classList.add("comb"),n.style.letterSpacing=`calc(${b}px * var(--scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class eL extends Ua{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class tL extends Ua{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,n=t.id;let r=e.getValue(n,{value:t.exportValue===t.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",e.setValue(n,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const o=document.createElement("input");return Oa.add(o),o.setAttribute("data-element-id",n),o.disabled=t.readOnly,this._setRequired(o,this.data.required),o.type="checkbox",o.name=t.fieldName,r&&o.setAttribute("checked",!0),o.setAttribute("exportValue",t.exportValue),o.tabIndex=dd,o.addEventListener("change",l=>{const{name:h,checked:d}=l.target;for(const p of this._getElementsByName(h,n)){const g=d&&p.exportValue===t.exportValue;p.domElement&&(p.domElement.checked=g),e.setValue(p.id,{value:g})}e.setValue(n,{value:d})}),o.addEventListener("resetform",l=>{const h=t.defaultFieldValue||"Off";l.target.checked=h===t.exportValue}),this.enableScripting&&this.hasJSActions&&(o.addEventListener("updatefromsandbox",l=>{const h={value(d){d.target.checked=d.detail.value!=="Off",e.setValue(n,{value:d.target.checked})}};this._dispatchEventFromSandbox(h,l)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class YE extends Ua{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,n=t.id;let r=e.getValue(n,{value:t.fieldValue===t.buttonValue}).value;if(typeof r=="string"&&(r=r!==t.buttonValue,e.setValue(n,{value:r})),r)for(const l of this._getElementsByName(t.fieldName,n))e.setValue(l.id,{value:!1});const o=document.createElement("input");if(Oa.add(o),o.setAttribute("data-element-id",n),o.disabled=t.readOnly,this._setRequired(o,this.data.required),o.type="radio",o.name=t.fieldName,r&&o.setAttribute("checked",!0),o.tabIndex=dd,o.addEventListener("change",l=>{const{name:h,checked:d}=l.target;for(const p of this._getElementsByName(h,n))e.setValue(p.id,{value:!1});e.setValue(n,{value:d})}),o.addEventListener("resetform",l=>{const h=t.defaultFieldValue;l.target.checked=h!=null&&h===t.buttonValue}),this.enableScripting&&this.hasJSActions){const l=t.buttonValue;o.addEventListener("updatefromsandbox",h=>{const d={value:p=>{const g=l===p.detail.value;for(const y of this._getElementsByName(p.target.name)){const v=g&&y.id===n;y.domElement&&(y.domElement.checked=v),e.setValue(y.id,{value:v})}}};this._dispatchEventFromSandbox(d,h)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],h=>h.target.checked)}return this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class nL extends qE{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),e}}class iL extends Ua{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,n=e.getValue(t,{value:this.data.fieldValue}),r=document.createElement("select");Oa.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=dd;let o=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",g=>{const y=this.data.defaultFieldValue;for(const v of r.options)v.selected=v.value===y});for(const g of this.data.options){const y=document.createElement("option");y.textContent=g.displayValue,y.value=g.exportValue,n.value.includes(g.exportValue)&&(y.setAttribute("selected",!0),o=!1),r.append(y)}let l=null;if(o){const g=document.createElement("option");g.value=" ",g.setAttribute("hidden",!0),g.setAttribute("selected",!0),r.prepend(g),l=()=>{g.remove(),r.removeEventListener("input",l),l=null},r.addEventListener("input",l)}const h=g=>{const y=g?"value":"textContent",{options:v,multiple:b}=r;return b?Array.prototype.filter.call(v,A=>A.selected).map(A=>A[y]):v.selectedIndex===-1?null:v[v.selectedIndex][y]};let d=h(!1);const p=g=>{const y=g.target.options;return Array.prototype.map.call(y,v=>({displayValue:v.textContent,exportValue:v.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",g=>{const y={value(v){l==null||l();const b=v.detail.value,A=new Set(Array.isArray(b)?b:[b]);for(const E of r.options)E.selected=A.has(E.value);e.setValue(t,{value:h(!0)}),d=h(!1)},multipleSelection(v){r.multiple=!0},remove(v){const b=r.options,A=v.detail.remove;b[A].selected=!1,r.remove(A),b.length>0&&Array.prototype.findIndex.call(b,C=>C.selected)===-1&&(b[0].selected=!0),e.setValue(t,{value:h(!0),items:p(v)}),d=h(!1)},clear(v){for(;r.length!==0;)r.remove(0);e.setValue(t,{value:null,items:[]}),d=h(!1)},insert(v){const{index:b,displayValue:A,exportValue:E}=v.detail.insert,C=r.children[b],k=document.createElement("option");k.textContent=A,k.value=E,C?C.before(k):r.append(k),e.setValue(t,{value:h(!0),items:p(v)}),d=h(!1)},items(v){const{items:b}=v.detail;for(;r.length!==0;)r.remove(0);for(const A of b){const{displayValue:E,exportValue:C}=A,k=document.createElement("option");k.textContent=E,k.value=C,r.append(k)}r.options.length>0&&(r.options[0].selected=!0),e.setValue(t,{value:h(!0),items:p(v)}),d=h(!1)},indices(v){const b=new Set(v.detail.indices);for(const A of v.target.options)A.selected=b.has(A.index);e.setValue(t,{value:h(!0)}),d=h(!1)},editable(v){v.target.disabled=!v.detail.editable}};this._dispatchEventFromSandbox(y,g)}),r.addEventListener("input",g=>{var b;const y=h(!0),v=h(!1);e.setValue(t,{value:y}),g.preventDefault(),(b=this.linkService.eventBus)==null||b.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:d,change:v,changeEx:y,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],g=>g.target.value)):r.addEventListener("input",function(g){e.setValue(t,{value:h(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class Zy extends _t{constructor(e){const{data:t,elements:n}=e;super(e,{isRenderable:_t._hasPopupData(t)}),this.elements=n,this.popup=null}render(){this.container.classList.add("popupAnnotation");const e=this.popup=new sL({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(const n of this.elements)n.popup=e,n.container.ariaHasPopup="dialog",t.push(n.data.id),n.addHighlightArea();return this.container.setAttribute("aria-controls",t.map(n=>`${Gv}${n}`).join(",")),this.container}}var nc,Fp,Dp,ic,da,mt,Hs,sc,Th,kh,rc,Us,Fi,$s,Rh,Ws,Ph,fa,pa,Je,Yf,ev,QE,JE,ZE,e_,Qf,Jf,tv;class sL{constructor({container:e,color:t,elements:n,titleObj:r,modificationDate:o,contentsObj:l,richText:h,parent:d,rect:p,parentRect:g,open:y}){T(this,Je);T(this,nc,x(this,Je,ZE).bind(this));T(this,Fp,x(this,Je,tv).bind(this));T(this,Dp,x(this,Je,Jf).bind(this));T(this,ic,x(this,Je,Qf).bind(this));T(this,da,null);T(this,mt,null);T(this,Hs,null);T(this,sc,null);T(this,Th,null);T(this,kh,null);T(this,rc,null);T(this,Us,!1);T(this,Fi,null);T(this,$s,null);T(this,Rh,null);T(this,Ws,null);T(this,Ph,null);T(this,fa,null);T(this,pa,!1);var v;S(this,mt,e),S(this,Ph,r),S(this,Hs,l),S(this,Ws,h),S(this,kh,d),S(this,da,t),S(this,Rh,p),S(this,rc,g),S(this,Th,n),S(this,sc,Kv.toDateObject(o)),this.trigger=n.flatMap(b=>b.getElementsToTriggerPopup());for(const b of this.trigger)b.addEventListener("click",u(this,ic)),b.addEventListener("mouseenter",u(this,Dp)),b.addEventListener("mouseleave",u(this,Fp)),b.classList.add("popupTriggerArea");for(const b of n)(v=b.container)==null||v.addEventListener("keydown",u(this,nc));u(this,mt).hidden=!0,y&&x(this,Je,Qf).call(this)}render(){if(u(this,Fi))return;const e=S(this,Fi,document.createElement("div"));if(e.className="popup",u(this,da)){const o=e.style.outlineColor=Ae.makeHexColor(...u(this,da));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?e.style.backgroundColor=`color-mix(in srgb, ${o} 30%, white)`:e.style.backgroundColor=Ae.makeHexColor(...u(this,da).map(h=>Math.floor(.7*(255-h)+h)))}const t=document.createElement("span");t.className="header";const n=document.createElement("h1");if(t.append(n),{dir:n.dir,str:n.textContent}=u(this,Ph),e.append(t),u(this,sc)){const o=document.createElement("span");o.classList.add("popupDate"),o.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),o.setAttribute("data-l10n-args",JSON.stringify({dateObj:u(this,sc).valueOf()})),t.append(o)}const r=u(this,Je,Yf);if(r)GE.render({xfaHtml:r,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const o=this._formatContents(u(this,Hs));e.append(o)}u(this,mt).append(e)}_formatContents({str:e,dir:t}){const n=document.createElement("p");n.classList.add("popupContent"),n.dir=t;const r=e.split(/(?:\r\n?|\n)/);for(let o=0,l=r.length;o<l;++o){const h=r[o];n.append(document.createTextNode(h)),o<l-1&&n.append(document.createElement("br"))}return n}updateEdited({rect:e,popupContent:t}){var n;u(this,fa)||S(this,fa,{contentsObj:u(this,Hs),richText:u(this,Ws)}),e&&S(this,$s,null),t&&(S(this,Ws,x(this,Je,JE).call(this,t)),S(this,Hs,null)),(n=u(this,Fi))==null||n.remove(),S(this,Fi,null)}resetEdited(){var e;u(this,fa)&&({contentsObj:yn(this,Hs)._,richText:yn(this,Ws)._}=u(this,fa),S(this,fa,null),(e=u(this,Fi))==null||e.remove(),S(this,Fi,null),S(this,$s,null))}forceHide(){S(this,pa,this.isVisible),u(this,pa)&&(u(this,mt).hidden=!0)}maybeShow(){u(this,pa)&&(u(this,Fi)||x(this,Je,Jf).call(this),S(this,pa,!1),u(this,mt).hidden=!1)}get isVisible(){return u(this,mt).hidden===!1}}nc=new WeakMap,Fp=new WeakMap,Dp=new WeakMap,ic=new WeakMap,da=new WeakMap,mt=new WeakMap,Hs=new WeakMap,sc=new WeakMap,Th=new WeakMap,kh=new WeakMap,rc=new WeakMap,Us=new WeakMap,Fi=new WeakMap,$s=new WeakMap,Rh=new WeakMap,Ws=new WeakMap,Ph=new WeakMap,fa=new WeakMap,pa=new WeakMap,Je=new WeakSet,Yf=function(){const e=u(this,Ws),t=u(this,Hs);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&u(this,Ws).html||null},ev=function(){var e,t,n;return((n=(t=(e=u(this,Je,Yf))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:n.fontSize)||0},QE=function(){var e,t,n;return((n=(t=(e=u(this,Je,Yf))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:n.color)||null},JE=function(e){const t=[],n={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},r={style:{color:u(this,Je,QE),fontSize:u(this,Je,ev)?`calc(${u(this,Je,ev)}px * var(--scale-factor))`:""}};for(const o of e.split(`
`))t.push({name:"span",value:o,attributes:r});return n},ZE=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&u(this,Us))&&x(this,Je,Qf).call(this)},e_=function(){if(u(this,$s)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:n,pageX:r,pageY:o}}}=u(this,kh);let l=!!u(this,rc),h=l?u(this,rc):u(this,Rh);for(const A of u(this,Th))if(!h||Ae.intersect(A.data.rect,h)!==null){h=A.data.rect,l=!0;break}const d=Ae.normalizeRect([h[0],e[3]-h[1]+e[1],h[2],e[3]-h[3]+e[1]]),g=l?h[2]-h[0]+5:0,y=d[0]+g,v=d[1];S(this,$s,[100*(y-r)/t,100*(v-o)/n]);const{style:b}=u(this,mt);b.left=`${u(this,$s)[0]}%`,b.top=`${u(this,$s)[1]}%`},Qf=function(){S(this,Us,!u(this,Us)),u(this,Us)?(x(this,Je,Jf).call(this),u(this,mt).addEventListener("click",u(this,ic)),u(this,mt).addEventListener("keydown",u(this,nc))):(x(this,Je,tv).call(this),u(this,mt).removeEventListener("click",u(this,ic)),u(this,mt).removeEventListener("keydown",u(this,nc)))},Jf=function(){u(this,Fi)||this.render(),this.isVisible?u(this,Us)&&u(this,mt).classList.add("focused"):(x(this,Je,e_).call(this),u(this,mt).hidden=!1,u(this,mt).style.zIndex=parseInt(u(this,mt).style.zIndex)+1e3)},tv=function(){u(this,mt).classList.remove("focused"),!(u(this,Us)||!this.isVisible)&&(u(this,mt).hidden=!0,u(this,mt).style.zIndex=parseInt(u(this,mt).style.zIndex)-1e3)};class t_ extends _t{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=De.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const n=document.createElement("span");n.textContent=t,e.append(n)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Lh;class rL extends _t{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});T(this,Lh,null)}render(){this.container.classList.add("lineAnnotation");const t=this.data,{width:n,height:r}=nr(t.rect),o=this.svgFactory.create(n,r,!0),l=S(this,Lh,this.svgFactory.createElement("svg:line"));return l.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),l.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),l.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),l.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),l.setAttribute("stroke-width",t.borderStyle.width||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),o.append(l),this.container.append(o),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return u(this,Lh)}addHighlightArea(){this.container.classList.add("highlightArea")}}Lh=new WeakMap;var Mh;class oL extends _t{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});T(this,Mh,null)}render(){this.container.classList.add("squareAnnotation");const t=this.data,{width:n,height:r}=nr(t.rect),o=this.svgFactory.create(n,r,!0),l=t.borderStyle.width,h=S(this,Mh,this.svgFactory.createElement("svg:rect"));return h.setAttribute("x",l/2),h.setAttribute("y",l/2),h.setAttribute("width",n-l),h.setAttribute("height",r-l),h.setAttribute("stroke-width",l||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),o.append(h),this.container.append(o),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return u(this,Mh)}addHighlightArea(){this.container.classList.add("highlightArea")}}Mh=new WeakMap;var Ih;class aL extends _t{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});T(this,Ih,null)}render(){this.container.classList.add("circleAnnotation");const t=this.data,{width:n,height:r}=nr(t.rect),o=this.svgFactory.create(n,r,!0),l=t.borderStyle.width,h=S(this,Ih,this.svgFactory.createElement("svg:ellipse"));return h.setAttribute("cx",n/2),h.setAttribute("cy",r/2),h.setAttribute("rx",n/2-l/2),h.setAttribute("ry",r/2-l/2),h.setAttribute("stroke-width",l||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),o.append(h),this.container.append(o),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return u(this,Ih)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ih=new WeakMap;var Fh;class n_ extends _t{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});T(this,Fh,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:n,borderStyle:r,popupRef:o}}=this;if(!n)return this.container;const{width:l,height:h}=nr(t),d=this.svgFactory.create(l,h,!0);let p=[];for(let y=0,v=n.length;y<v;y+=2){const b=n[y]-t[0],A=t[3]-n[y+1];p.push(`${b},${A}`)}p=p.join(" ");const g=S(this,Fh,this.svgFactory.createElement(this.svgElementName));return g.setAttribute("points",p),g.setAttribute("stroke-width",r.width||1),g.setAttribute("stroke","transparent"),g.setAttribute("fill","transparent"),d.append(g),this.container.append(d),!o&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return u(this,Fh)}addHighlightArea(){this.container.classList.add("highlightArea")}}Fh=new WeakMap;class lL extends n_{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class cL extends _t{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Dh;class i0 extends _t{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});T(this,Dh,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?De.HIGHLIGHT:De.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,inkLists:n,borderStyle:r,popupRef:o}}=this,{width:l,height:h}=nr(t),d=this.svgFactory.create(l,h,!0);for(const p of n){let g=[];for(let v=0,b=p.length;v<b;v+=2){const A=p[v]-t[0],E=t[3]-p[v+1];g.push(`${A},${E}`)}g=g.join(" ");const y=this.svgFactory.createElement(this.svgElementName);u(this,Dh).push(y),y.setAttribute("points",g),y.setAttribute("stroke-width",r.width||1),y.setAttribute("stroke","transparent"),y.setAttribute("fill","transparent"),d.append(y)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(d),this._editOnDoubleClick(),this.container}getElementsToTriggerPopup(){return u(this,Dh)}addHighlightArea(){this.container.classList.add("highlightArea")}}Dh=new WeakMap;class i_ extends _t{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=De.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class uL extends _t{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class hL extends _t{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class dL extends _t{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class s_ extends _t{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=De.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Oh,Nh,nv;class fL extends _t{constructor(t){var r;super(t,{isRenderable:!0});T(this,Nh);T(this,Oh,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,(r=this.linkService.eventBus)==null||r.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:n}=this;let r;n.hasAppearance||n.fillAlpha===0?r=document.createElement("div"):(r=document.createElement("img"),r.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(r.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),r.addEventListener("dblclick",x(this,Nh,nv).bind(this)),S(this,Oh,r);const{isMac:o}=bn.platform;return t.addEventListener("keydown",l=>{l.key==="Enter"&&(o?l.metaKey:l.ctrlKey)&&x(this,Nh,nv).call(this)}),!n.popupRef&&this.hasPopupData?this._createPopup():r.classList.add("popupTriggerArea"),t.append(r),t}getElementsToTriggerPopup(){return u(this,Oh)}addHighlightArea(){this.container.classList.add("highlightArea")}}Oh=new WeakMap,Nh=new WeakSet,nv=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var jh,ga,ma,Bh,ja,r_,iv,aS;let pL=(aS=class{constructor({div:e,accessibilityManager:t,annotationCanvasMap:n,annotationEditorUIManager:r,page:o,viewport:l,structTreeLayer:h}){T(this,ja);T(this,jh,null);T(this,ga,null);T(this,ma,new Map);T(this,Bh,null);this.div=e,S(this,jh,t),S(this,ga,n),S(this,Bh,h||null),this.page=o,this.viewport=l,this.zIndex=0,this._annotationEditorUIManager=r}hasEditableAnnotations(){return u(this,ma).size>0}async render(e){var l;const{annotations:t}=e,n=this.div;Fa(n,this.viewport);const r=new Map,o={data:null,layer:n,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new n0,annotationStorage:e.annotationStorage||new Qv,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const h of t){if(h.noHTML)continue;const d=h.annotationType===Mt.POPUP;if(d){const y=r.get(h.id);if(!y)continue;o.elements=y}else{const{width:y,height:v}=nr(h.rect);if(y<=0||v<=0)continue}o.data=h;const p=QP.create(o);if(!p.isRenderable)continue;if(!d&&h.popupRef){const y=r.get(h.popupRef);y?y.push(p):r.set(h.popupRef,[p])}const g=p.render();h.hidden&&(g.style.visibility="hidden"),await x(this,ja,r_).call(this,g,h.id),p._isEditable&&(u(this,ma).set(p.data.id,p),(l=this._annotationEditorUIManager)==null||l.renderAnnotationElement(p))}x(this,ja,iv).call(this)}update({viewport:e}){const t=this.div;this.viewport=e,Fa(t,{rotation:e.rotation}),x(this,ja,iv).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(u(this,ma).values())}getEditableAnnotation(e){return u(this,ma).get(e)}},jh=new WeakMap,ga=new WeakMap,ma=new WeakMap,Bh=new WeakMap,ja=new WeakSet,r_=async function(e,t){var l,h;const n=e.firstChild||e,r=n.id=`${Gv}${t}`,o=await((l=u(this,Bh))==null?void 0:l.getAriaAttributes(r));if(o)for(const[d,p]of o)n.setAttribute(d,p);this.div.append(e),(h=u(this,jh))==null||h.moveElementInDOM(this.div,e,n,!1)},iv=function(){if(!u(this,ga))return;const e=this.div;for(const[t,n]of u(this,ga)){const r=e.querySelector(`[data-annotation-id="${t}"]`);if(!r)continue;n.className="annotationContent";const{firstChild:o}=r;o?o.nodeName==="CANVAS"?o.replaceWith(n):o.classList.contains("annotationContent")?o.after(n):o.before(n):r.append(n)}u(this,ga).clear()},aS);const If=/\r\n?|\n/g;var Di,Gn,zh,ya,qn,kt,o_,a_,l_,Zf,sr,ep,tp,c_,rv,u_;const nt=class nt extends Ye{constructor(t){super({...t,name:"freeTextEditor"});T(this,kt);T(this,Di);T(this,Gn,"");T(this,zh,`${this.id}-editor`);T(this,ya,null);T(this,qn);S(this,Di,t.color||nt._defaultColor||Ye._defaultLineColor),S(this,qn,t.fontSize||nt._defaultFontSize)}static get _keyboardManager(){const t=nt.prototype,n=l=>l.isEmpty(),r=Da.TRANSLATE_SMALL,o=Da.TRANSLATE_BIG;return Ue(this,"_keyboardManager",new hd([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-o,0],checker:n}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[r,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[o,0],checker:n}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-o],checker:n}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,r],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,o],checker:n}]]))}static initialize(t,n){Ye.initialize(t,n);const r=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(r.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,n){switch(t){case Le.FREETEXT_SIZE:nt._defaultFontSize=n;break;case Le.FREETEXT_COLOR:nt._defaultColor=n;break}}updateParams(t,n){switch(t){case Le.FREETEXT_SIZE:x(this,kt,o_).call(this,n);break;case Le.FREETEXT_COLOR:x(this,kt,a_).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Le.FREETEXT_SIZE,nt._defaultFontSize],[Le.FREETEXT_COLOR,nt._defaultColor||Ye._defaultLineColor]]}get propertiesToUpdate(){return[[Le.FREETEXT_SIZE,u(this,qn)],[Le.FREETEXT_COLOR,u(this,Di)]]}_translateEmpty(t,n){this._uiManager.translateSelectedEditors(t,n,!0)}getInitialTranslation(){const t=this.parentScale;return[-nt._internalPadding*t,-(nt._internalPadding+u(this,qn))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(De.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),S(this,ya,new AbortController);const t=this._uiManager.combinedSignal(u(this,ya));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t})}disableEditMode(){var t;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",u(this,zh)),this._isDraggable=!0,(t=u(this,ya))==null||t.abort(),S(this,ya,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var t;this.width||(this.enableEditMode(),this.editorDiv.focus(),(t=this._initialOptions)!=null&&t.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=u(this,Gn),n=S(this,Gn,x(this,kt,l_).call(this).trimEnd());if(t===n)return;const r=o=>{if(S(this,Gn,o),!o){this.remove();return}x(this,kt,tp).call(this),this._uiManager.rebuild(this),x(this,kt,Zf).call(this)};this.addCommands({cmd:()=>{r(n)},undo:()=>{r(t)},mustExec:!1}),x(this,kt,Zf).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(t){this.enterInEditMode()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){nt._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let t,n;this.width&&(t=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",u(this,zh)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:r}=this.editorDiv;if(r.fontSize=`calc(${u(this,qn)}px * var(--scale-factor))`,r.color=u(this,Di),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),mp(this,this.div,["dblclick","keydown"]),this.width){const[o,l]=this.parentDimensions;if(this.annotationElementId){const{position:h}=this._initialData;let[d,p]=this.getInitialTranslation();[d,p]=this.pageTranslationToScreen(d,p);const[g,y]=this.pageDimensions,[v,b]=this.pageTranslation;let A,E;switch(this.rotation){case 0:A=t+(h[0]-v)/g,E=n+this.height-(h[1]-b)/y;break;case 90:A=t+(h[0]-v)/g,E=n-(h[1]-b)/y,[d,p]=[p,-d];break;case 180:A=t-this.width+(h[0]-v)/g,E=n-(h[1]-b)/y,[d,p]=[-d,-p];break;case 270:A=t+(h[0]-v-this.height*y)/g,E=n+(h[1]-b-this.width*g)/y,[d,p]=[-p,d];break}this.setAt(A*o,E*l,d,p)}else this.setAt(t*o,n*l,this.width*o,this.height*l);x(this,kt,tp).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var A,E,C;const n=t.clipboardData||window.clipboardData,{types:r}=n;if(r.length===1&&r[0]==="text/plain")return;t.preventDefault();const o=x(A=nt,sr,rv).call(A,n.getData("text")||"").replaceAll(If,`
`);if(!o)return;const l=window.getSelection();if(!l.rangeCount)return;this.editorDiv.normalize(),l.deleteFromDocument();const h=l.getRangeAt(0);if(!o.includes(`
`)){h.insertNode(document.createTextNode(o)),this.editorDiv.normalize(),l.collapseToStart();return}const{startContainer:d,startOffset:p}=h,g=[],y=[];if(d.nodeType===Node.TEXT_NODE){const k=d.parentElement;if(y.push(d.nodeValue.slice(p).replaceAll(If,"")),k!==this.editorDiv){let L=g;for(const M of this.editorDiv.childNodes){if(M===k){L=y;continue}L.push(x(E=nt,sr,ep).call(E,M))}}g.push(d.nodeValue.slice(0,p).replaceAll(If,""))}else if(d===this.editorDiv){let k=g,L=0;for(const M of this.editorDiv.childNodes)L++===p&&(k=y),k.push(x(C=nt,sr,ep).call(C,M))}S(this,Gn,`${g.join(`
`)}${o}${y.join(`
`)}`),x(this,kt,tp).call(this);const v=new Range;let b=g.reduce((k,L)=>k+L.length,0);for(const{firstChild:k}of this.editorDiv.childNodes)if(k.nodeType===Node.TEXT_NODE){const L=k.nodeValue.length;if(b<=L){v.setStart(k,b),v.setEnd(k,b);break}b-=L}l.removeAllRanges(),l.addRange(v)}get contentDiv(){return this.editorDiv}static async deserialize(t,n,r){var h;let o=null;if(t instanceof t_){const{data:{defaultAppearanceData:{fontSize:d,fontColor:p},rect:g,rotation:y,id:v,popupRef:b},textContent:A,textPosition:E,parent:{page:{pageNumber:C}}}=t;if(!A||A.length===0)return null;o=t={annotationType:De.FREETEXT,color:Array.from(p),fontSize:d,value:A.join(`
`),position:E,pageIndex:C-1,rect:g.slice(0),rotation:y,id:v,deleted:!1,popupRef:b}}const l=await super.deserialize(t,n,r);return S(l,qn,t.fontSize),S(l,Di,Ae.makeHexColor(...t.color)),S(l,Gn,x(h=nt,sr,rv).call(h,t.value)),l.annotationElementId=t.id||null,l._initialData=o,l}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=nt._internalPadding*this.parentScale,r=this.getRect(n,n),o=Ye._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:u(this,Di)),l={annotationType:De.FREETEXT,color:o,fontSize:u(this,qn),value:x(this,kt,c_).call(this),pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?l:this.annotationElementId&&!x(this,kt,u_).call(this,l)?null:(l.id=this.annotationElementId,l)}renderAnnotationElement(t){const n=super.renderAnnotationElement(t);if(this.deleted)return n;const{style:r}=n;r.fontSize=`calc(${u(this,qn)}px * var(--scale-factor))`,r.color=u(this,Di),n.replaceChildren();for(const l of u(this,Gn).split(`
`)){const h=document.createElement("div");h.append(l?document.createTextNode(l):document.createElement("br")),n.append(h)}const o=nt._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(o,o),popupContent:u(this,Gn)}),n}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};Di=new WeakMap,Gn=new WeakMap,zh=new WeakMap,ya=new WeakMap,qn=new WeakMap,kt=new WeakSet,o_=function(t){const n=o=>{this.editorDiv.style.fontSize=`calc(${o}px * var(--scale-factor))`,this.translate(0,-(o-u(this,qn))*this.parentScale),S(this,qn,o),x(this,kt,Zf).call(this)},r=u(this,qn);this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Le.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},a_=function(t){const n=o=>{S(this,Di,this.editorDiv.style.color=o)},r=u(this,Di);this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Le.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},l_=function(){var r;const t=[];this.editorDiv.normalize();let n=null;for(const o of this.editorDiv.childNodes)(n==null?void 0:n.nodeType)===Node.TEXT_NODE&&o.nodeName==="BR"||(t.push(x(r=nt,sr,ep).call(r,o)),n=o);return t.join(`
`)},Zf=function(){const[t,n]=this.parentDimensions;let r;if(this.isAttachedToDOM)r=this.div.getBoundingClientRect();else{const{currentLayer:o,div:l}=this,h=l.style.display,d=l.classList.contains("hidden");l.classList.remove("hidden"),l.style.display="hidden",o.div.append(this.div),r=l.getBoundingClientRect(),l.remove(),l.style.display=h,l.classList.toggle("hidden",d)}this.rotation%180===this.parentRotation%180?(this.width=r.width/t,this.height=r.height/n):(this.width=r.height/t,this.height=r.width/n),this.fixAndSetPosition()},sr=new WeakSet,ep=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(If,"")},tp=function(){if(this.editorDiv.replaceChildren(),!!u(this,Gn))for(const t of u(this,Gn).split(`
`)){const n=document.createElement("div");n.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(n)}},c_=function(){return u(this,Gn).replaceAll(""," ")},rv=function(t){return t.replaceAll(" ","")},u_=function(t){const{value:n,fontSize:r,color:o,pageIndex:l}=this._initialData;return this._hasBeenMoved||t.value!==n||t.fontSize!==r||t.color.some((h,d)=>h!==o[d])||t.pageIndex!==l},T(nt,sr),Pe(nt,"_freeTextDefaultContent",""),Pe(nt,"_internalPadding",0),Pe(nt,"_defaultColor",null),Pe(nt,"_defaultFontSize",10),Pe(nt,"_type","freetext"),Pe(nt,"_editorType",De.FREETEXT);let sv=nt;class h_{toSVGPath(){rt("Abstract method `toSVGPath` must be implemented.")}get box(){rt("Abstract getter `box` must be implemented.")}serialize(e,t){rt("Abstract method `serialize` must be implemented.")}get classNamesForDrawing(){rt("Abstract getter `classNamesForDrawing` must be implemented.")}get classNamesForOutlining(){rt("Abstract getter `classNamesForOutlining` must be implemented.")}get mustRemoveSelfIntersections(){return!1}}var Xn,Oi,oc,ac,cs,Be,va,wa,Hh,Uh,lc,cc,Kr,$h,Op,Np,Nt,Pu,d_,f_,p_,g_,m_,y_;const Ps=class Ps{constructor({x:e,y:t},n,r,o,l,h=0){T(this,Nt);T(this,Xn);T(this,Oi,[]);T(this,oc);T(this,ac);T(this,cs,[]);T(this,Be,new Float64Array(18));T(this,va);T(this,wa);T(this,Hh);T(this,Uh);T(this,lc);T(this,cc);T(this,Kr,[]);S(this,Xn,n),S(this,cc,o*r),S(this,ac,l),u(this,Be).set([NaN,NaN,NaN,NaN,e,t],6),S(this,oc,h),S(this,Uh,u(Ps,$h)*r),S(this,Hh,u(Ps,Np)*r),S(this,lc,r),u(this,Kr).push(e,t)}isEmpty(){return isNaN(u(this,Be)[8])}add({x:e,y:t}){var J;S(this,va,e),S(this,wa,t);const[n,r,o,l]=u(this,Xn);let[h,d,p,g]=u(this,Be).subarray(8,12);const y=e-p,v=t-g,b=Math.hypot(y,v);if(b<u(this,Hh))return!1;const A=b-u(this,Uh),E=A/b,C=E*y,k=E*v;let L=h,M=d;h=p,d=g,p+=C,g+=k,(J=u(this,Kr))==null||J.push(e,t);const F=-k/A,z=C/A,U=F*u(this,cc),N=z*u(this,cc);return u(this,Be).set(u(this,Be).subarray(2,8),0),u(this,Be).set([p+U,g+N],4),u(this,Be).set(u(this,Be).subarray(14,18),12),u(this,Be).set([p-U,g-N],16),isNaN(u(this,Be)[6])?(u(this,cs).length===0&&(u(this,Be).set([h+U,d+N],2),u(this,cs).push(NaN,NaN,NaN,NaN,(h+U-n)/o,(d+N-r)/l),u(this,Be).set([h-U,d-N],14),u(this,Oi).push(NaN,NaN,NaN,NaN,(h-U-n)/o,(d-N-r)/l)),u(this,Be).set([L,M,h,d,p,g],6),!this.isEmpty()):(u(this,Be).set([L,M,h,d,p,g],6),Math.abs(Math.atan2(M-d,L-h)-Math.atan2(k,C))<Math.PI/2?([h,d,p,g]=u(this,Be).subarray(2,6),u(this,cs).push(NaN,NaN,NaN,NaN,((h+p)/2-n)/o,((d+g)/2-r)/l),[h,d,L,M]=u(this,Be).subarray(14,18),u(this,Oi).push(NaN,NaN,NaN,NaN,((L+h)/2-n)/o,((M+d)/2-r)/l),!0):([L,M,h,d,p,g]=u(this,Be).subarray(0,6),u(this,cs).push(((L+5*h)/6-n)/o,((M+5*d)/6-r)/l,((5*h+p)/6-n)/o,((5*d+g)/6-r)/l,((h+p)/2-n)/o,((d+g)/2-r)/l),[p,g,h,d,L,M]=u(this,Be).subarray(12,18),u(this,Oi).push(((L+5*h)/6-n)/o,((M+5*d)/6-r)/l,((5*h+p)/6-n)/o,((5*d+g)/6-r)/l,((h+p)/2-n)/o,((d+g)/2-r)/l),!0))}toSVGPath(){if(this.isEmpty())return"";const e=u(this,cs),t=u(this,Oi);if(isNaN(u(this,Be)[6])&&!this.isEmpty())return x(this,Nt,d_).call(this);const n=[];n.push(`M${e[4]} ${e[5]}`);for(let r=6;r<e.length;r+=6)isNaN(e[r])?n.push(`L${e[r+4]} ${e[r+5]}`):n.push(`C${e[r]} ${e[r+1]} ${e[r+2]} ${e[r+3]} ${e[r+4]} ${e[r+5]}`);x(this,Nt,p_).call(this,n);for(let r=t.length-6;r>=6;r-=6)isNaN(t[r])?n.push(`L${t[r+4]} ${t[r+5]}`):n.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);return x(this,Nt,f_).call(this,n),n.join(" ")}newFreeDrawOutline(e,t,n,r,o,l){return new v_(e,t,n,r,o,l)}getOutlines(){var y;const e=u(this,cs),t=u(this,Oi),n=u(this,Be),[r,o,l,h]=u(this,Xn),d=new Float64Array((((y=u(this,Kr))==null?void 0:y.length)??0)+2);for(let v=0,b=d.length-2;v<b;v+=2)d[v]=(u(this,Kr)[v]-r)/l,d[v+1]=(u(this,Kr)[v+1]-o)/h;if(d[d.length-2]=(u(this,va)-r)/l,d[d.length-1]=(u(this,wa)-o)/h,isNaN(n[6])&&!this.isEmpty())return x(this,Nt,g_).call(this,d);const p=new Float64Array(u(this,cs).length+24+u(this,Oi).length);let g=e.length;for(let v=0;v<g;v+=2){if(isNaN(e[v])){p[v]=p[v+1]=NaN;continue}p[v]=e[v],p[v+1]=e[v+1]}g=x(this,Nt,y_).call(this,p,g);for(let v=t.length-6;v>=6;v-=6)for(let b=0;b<6;b+=2){if(isNaN(t[v+b])){p[g]=p[g+1]=NaN,g+=2;continue}p[g]=t[v+b],p[g+1]=t[v+b+1],g+=2}return x(this,Nt,m_).call(this,p,g),this.newFreeDrawOutline(p,d,u(this,Xn),u(this,lc),u(this,oc),u(this,ac))}};Xn=new WeakMap,Oi=new WeakMap,oc=new WeakMap,ac=new WeakMap,cs=new WeakMap,Be=new WeakMap,va=new WeakMap,wa=new WeakMap,Hh=new WeakMap,Uh=new WeakMap,lc=new WeakMap,cc=new WeakMap,Kr=new WeakMap,$h=new WeakMap,Op=new WeakMap,Np=new WeakMap,Nt=new WeakSet,Pu=function(){const e=u(this,Be).subarray(4,6),t=u(this,Be).subarray(16,18),[n,r,o,l]=u(this,Xn);return[(u(this,va)+(e[0]-t[0])/2-n)/o,(u(this,wa)+(e[1]-t[1])/2-r)/l,(u(this,va)+(t[0]-e[0])/2-n)/o,(u(this,wa)+(t[1]-e[1])/2-r)/l]},d_=function(){const[e,t,n,r]=u(this,Xn),[o,l,h,d]=x(this,Nt,Pu).call(this);return`M${(u(this,Be)[2]-e)/n} ${(u(this,Be)[3]-t)/r} L${(u(this,Be)[4]-e)/n} ${(u(this,Be)[5]-t)/r} L${o} ${l} L${h} ${d} L${(u(this,Be)[16]-e)/n} ${(u(this,Be)[17]-t)/r} L${(u(this,Be)[14]-e)/n} ${(u(this,Be)[15]-t)/r} Z`},f_=function(e){const t=u(this,Oi);e.push(`L${t[4]} ${t[5]} Z`)},p_=function(e){const[t,n,r,o]=u(this,Xn),l=u(this,Be).subarray(4,6),h=u(this,Be).subarray(16,18),[d,p,g,y]=x(this,Nt,Pu).call(this);e.push(`L${(l[0]-t)/r} ${(l[1]-n)/o} L${d} ${p} L${g} ${y} L${(h[0]-t)/r} ${(h[1]-n)/o}`)},g_=function(e){const t=u(this,Be),[n,r,o,l]=u(this,Xn),[h,d,p,g]=x(this,Nt,Pu).call(this),y=new Float64Array(36);return y.set([NaN,NaN,NaN,NaN,(t[2]-n)/o,(t[3]-r)/l,NaN,NaN,NaN,NaN,(t[4]-n)/o,(t[5]-r)/l,NaN,NaN,NaN,NaN,h,d,NaN,NaN,NaN,NaN,p,g,NaN,NaN,NaN,NaN,(t[16]-n)/o,(t[17]-r)/l,NaN,NaN,NaN,NaN,(t[14]-n)/o,(t[15]-r)/l],0),this.newFreeDrawOutline(y,e,u(this,Xn),u(this,lc),u(this,oc),u(this,ac))},m_=function(e,t){const n=u(this,Oi);return e.set([NaN,NaN,NaN,NaN,n[4],n[5]],t),t+=6},y_=function(e,t){const n=u(this,Be).subarray(4,6),r=u(this,Be).subarray(16,18),[o,l,h,d]=u(this,Xn),[p,g,y,v]=x(this,Nt,Pu).call(this);return e.set([NaN,NaN,NaN,NaN,(n[0]-o)/h,(n[1]-l)/d,NaN,NaN,NaN,NaN,p,g,NaN,NaN,NaN,NaN,y,v,NaN,NaN,NaN,NaN,(r[0]-o)/h,(r[1]-l)/d],t),t+=24},T(Ps,$h,8),T(Ps,Op,2),T(Ps,Np,u(Ps,$h)+u(Ps,Op));let vp=Ps;var uc,Aa,Vs,Wh,Kn,Vh,bt,On,Lu,Mu,w_;class v_ extends h_{constructor(t,n,r,o,l,h){super();T(this,On);T(this,uc);T(this,Aa,null);T(this,Vs);T(this,Wh);T(this,Kn);T(this,Vh);T(this,bt);S(this,bt,t),S(this,Kn,n),S(this,uc,r),S(this,Vh,o),S(this,Vs,l),S(this,Wh,h),x(this,On,w_).call(this,h);const{x:d,y:p,width:g,height:y}=u(this,Aa);for(let v=0,b=t.length;v<b;v+=2)t[v]=(t[v]-d)/g,t[v+1]=(t[v+1]-p)/y;for(let v=0,b=n.length;v<b;v+=2)n[v]=(n[v]-d)/g,n[v+1]=(n[v+1]-p)/y}toSVGPath(){const t=[`M${u(this,bt)[4]} ${u(this,bt)[5]}`];for(let n=6,r=u(this,bt).length;n<r;n+=6){if(isNaN(u(this,bt)[n])){t.push(`L${u(this,bt)[n+4]} ${u(this,bt)[n+5]}`);continue}t.push(`C${u(this,bt)[n]} ${u(this,bt)[n+1]} ${u(this,bt)[n+2]} ${u(this,bt)[n+3]} ${u(this,bt)[n+4]} ${u(this,bt)[n+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,n,r,o],l){const h=r-t,d=o-n;let p,g;switch(l){case 0:p=x(this,On,Lu).call(this,u(this,bt),t,o,h,-d),g=x(this,On,Lu).call(this,u(this,Kn),t,o,h,-d);break;case 90:p=x(this,On,Mu).call(this,u(this,bt),t,n,h,d),g=x(this,On,Mu).call(this,u(this,Kn),t,n,h,d);break;case 180:p=x(this,On,Lu).call(this,u(this,bt),r,n,-h,d),g=x(this,On,Lu).call(this,u(this,Kn),r,n,-h,d);break;case 270:p=x(this,On,Mu).call(this,u(this,bt),r,o,-h,-d),g=x(this,On,Mu).call(this,u(this,Kn),r,o,-h,-d);break}return{outline:Array.from(p),points:[Array.from(g)]}}get box(){return u(this,Aa)}newOutliner(t,n,r,o,l,h=0){return new vp(t,n,r,o,l,h)}getNewOutline(t,n){const{x:r,y:o,width:l,height:h}=u(this,Aa),[d,p,g,y]=u(this,uc),v=l*g,b=h*y,A=r*g+d,E=o*y+p,C=this.newOutliner({x:u(this,Kn)[0]*v+A,y:u(this,Kn)[1]*b+E},u(this,uc),u(this,Vh),t,u(this,Wh),n??u(this,Vs));for(let k=2;k<u(this,Kn).length;k+=2)C.add({x:u(this,Kn)[k]*v+A,y:u(this,Kn)[k+1]*b+E});return C.getOutlines()}get mustRemoveSelfIntersections(){return!0}}uc=new WeakMap,Aa=new WeakMap,Vs=new WeakMap,Wh=new WeakMap,Kn=new WeakMap,Vh=new WeakMap,bt=new WeakMap,On=new WeakSet,Lu=function(t,n,r,o,l){const h=new Float64Array(t.length);for(let d=0,p=t.length;d<p;d+=2)h[d]=n+t[d]*o,h[d+1]=r+t[d+1]*l;return h},Mu=function(t,n,r,o,l){const h=new Float64Array(t.length);for(let d=0,p=t.length;d<p;d+=2)h[d]=n+t[d+1]*o,h[d+1]=r+t[d]*l;return h},w_=function(t){const n=u(this,bt);let r=n[4],o=n[5],l=r,h=o,d=r,p=o,g=r,y=o;const v=t?Math.max:Math.min;for(let k=6,L=n.length;k<L;k+=6){if(isNaN(n[k]))l=Math.min(l,n[k+4]),h=Math.min(h,n[k+5]),d=Math.max(d,n[k+4]),p=Math.max(p,n[k+5]),y<n[k+5]?(g=n[k+4],y=n[k+5]):y===n[k+5]&&(g=v(g,n[k+4]));else{const M=Ae.bezierBoundingBox(r,o,...n.slice(k,k+6));l=Math.min(l,M[0]),h=Math.min(h,M[1]),d=Math.max(d,M[2]),p=Math.max(p,M[3]),y<M[3]?(g=M[2],y=M[3]):y===M[3]&&(g=v(g,M[2]))}r=n[k+4],o=n[k+5]}const b=l-u(this,Vs),A=h-u(this,Vs),E=d-l+2*u(this,Vs),C=p-h+2*u(this,Vs);S(this,Aa,{x:b,y:A,width:E,height:C,lastPoint:[g,y]})};var Gh,Yr,Ni,En,A_,np,b_,S_,ov;class Xb{constructor(e,t=0,n=0,r=!0){T(this,En);T(this,Gh);T(this,Yr,[]);T(this,Ni,[]);let o=1/0,l=-1/0,h=1/0,d=-1/0;const p=10**-4;for(const{x:C,y:k,width:L,height:M}of e){const F=Math.floor((C-t)/p)*p,z=Math.ceil((C+L+t)/p)*p,U=Math.floor((k-t)/p)*p,N=Math.ceil((k+M+t)/p)*p,q=[F,U,N,!0],J=[z,U,N,!1];u(this,Yr).push(q,J),o=Math.min(o,F),l=Math.max(l,z),h=Math.min(h,U),d=Math.max(d,N)}const g=l-o+2*n,y=d-h+2*n,v=o-n,b=h-n,A=u(this,Yr).at(r?-1:-2),E=[A[0],A[2]];for(const C of u(this,Yr)){const[k,L,M]=C;C[0]=(k-v)/g,C[1]=(L-b)/y,C[2]=(M-b)/y}S(this,Gh,{x:v,y:b,width:g,height:y,lastPoint:E})}getOutlines(){u(this,Yr).sort((t,n)=>t[0]-n[0]||t[1]-n[1]||t[2]-n[2]);const e=[];for(const t of u(this,Yr))t[3]?(e.push(...x(this,En,ov).call(this,t)),x(this,En,b_).call(this,t)):(x(this,En,S_).call(this,t),e.push(...x(this,En,ov).call(this,t)));return x(this,En,A_).call(this,e)}}Gh=new WeakMap,Yr=new WeakMap,Ni=new WeakMap,En=new WeakSet,A_=function(e){const t=[],n=new Set;for(const l of e){const[h,d,p]=l;t.push([h,d,l],[h,p,l])}t.sort((l,h)=>l[1]-h[1]||l[0]-h[0]);for(let l=0,h=t.length;l<h;l+=2){const d=t[l][2],p=t[l+1][2];d.push(p),p.push(d),n.add(d),n.add(p)}const r=[];let o;for(;n.size>0;){const l=n.values().next().value;let[h,d,p,g,y]=l;n.delete(l);let v=h,b=d;for(o=[h,p],r.push(o);;){let A;if(n.has(g))A=g;else if(n.has(y))A=y;else break;n.delete(A),[h,d,p,g,y]=A,v!==h&&(o.push(v,b,h,b===d?d:p),v=h),b=b===d?p:d}o.push(v,b)}return new gL(r,u(this,Gh))},np=function(e){const t=u(this,Ni);let n=0,r=t.length-1;for(;n<=r;){const o=n+r>>1,l=t[o][0];if(l===e)return o;l<e?n=o+1:r=o-1}return r+1},b_=function([,e,t]){const n=x(this,En,np).call(this,e);u(this,Ni).splice(n,0,[e,t])},S_=function([,e,t]){const n=x(this,En,np).call(this,e);for(let r=n;r<u(this,Ni).length;r++){const[o,l]=u(this,Ni)[r];if(o!==e)break;if(o===e&&l===t){u(this,Ni).splice(r,1);return}}for(let r=n-1;r>=0;r--){const[o,l]=u(this,Ni)[r];if(o!==e)break;if(o===e&&l===t){u(this,Ni).splice(r,1);return}}},ov=function(e){const[t,n,r]=e,o=[[t,n,r]],l=x(this,En,np).call(this,r);for(let h=0;h<l;h++){const[d,p]=u(this,Ni)[h];for(let g=0,y=o.length;g<y;g++){const[,v,b]=o[g];if(!(p<=v||b<=d)){if(v>=d){if(b>p)o[g][1]=p;else{if(y===1)return[];o.splice(g,1),g--,y--}continue}o[g][2]=d,b>p&&o.push([t,p,b])}}}return o};var qh,hc;class gL extends h_{constructor(t,n){super();T(this,qh);T(this,hc);S(this,hc,t),S(this,qh,n)}toSVGPath(){const t=[];for(const n of u(this,hc)){let[r,o]=n;t.push(`M${r} ${o}`);for(let l=2;l<n.length;l+=2){const h=n[l],d=n[l+1];h===r?(t.push(`V${d}`),o=d):d===o&&(t.push(`H${h}`),r=h)}t.push("Z")}return t.join(" ")}serialize([t,n,r,o],l){const h=[],d=r-t,p=o-n;for(const g of u(this,hc)){const y=new Array(g.length);for(let v=0;v<g.length;v+=2)y[v]=t+g[v]*d,y[v+1]=o-g[v+1]*p;h.push(y)}return h}get box(){return u(this,qh)}get classNamesForDrawing(){return["highlight"]}get classNamesForOutlining(){return["highlightOutline"]}}qh=new WeakMap,hc=new WeakMap;class av extends vp{newFreeDrawOutline(e,t,n,r,o,l){return new mL(e,t,n,r,o,l)}get classNamesForDrawing(){return["highlight","free"]}}class mL extends v_{get classNamesForDrawing(){return["highlight","free"]}get classNamesForOutlining(){return["highlightOutline","free"]}newOutliner(e,t,n,r,o,l=0){return new av(e,t,n,r,o,l)}}var ji,ba,dc,Ft,Xh,fc,Kh,Yh,Qr,Bi,pc,Qh,Qe,lv,cv,uv,Po,E_,Rr;const Ln=class Ln{constructor({editor:e=null,uiManager:t=null}){T(this,Qe);T(this,ji,null);T(this,ba,null);T(this,dc);T(this,Ft,null);T(this,Xh,!1);T(this,fc,!1);T(this,Kh,null);T(this,Yh);T(this,Qr,null);T(this,Bi,null);T(this,pc);var n;e?(S(this,fc,!1),S(this,pc,Le.HIGHLIGHT_COLOR),S(this,Kh,e)):(S(this,fc,!0),S(this,pc,Le.HIGHLIGHT_DEFAULT_COLOR)),S(this,Bi,(e==null?void 0:e._uiManager)||t),S(this,Yh,u(this,Bi)._eventBus),S(this,dc,(e==null?void 0:e.color)||((n=u(this,Bi))==null?void 0:n.highlightColors.values().next().value)||"#FFFF98"),u(Ln,Qh)||S(Ln,Qh,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return Ue(this,"_keyboardManager",new hd([[["Escape","mac+Escape"],Ln.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Ln.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Ln.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Ln.prototype._moveToPrevious],[["Home","mac+Home"],Ln.prototype._moveToBeginning],[["End","mac+End"],Ln.prototype._moveToEnd]]))}renderButton(){const e=S(this,ji,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);const t=u(this,Bi)._signal;e.addEventListener("click",x(this,Qe,Po).bind(this),{signal:t}),e.addEventListener("keydown",x(this,Qe,uv).bind(this),{signal:t});const n=S(this,ba,document.createElement("span"));return n.className="swatch",n.setAttribute("aria-hidden",!0),n.style.backgroundColor=u(this,dc),e.append(n),e}renderMainDropdown(){const e=S(this,Ft,x(this,Qe,lv).call(this));return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}_colorSelectFromKeyboard(e){if(e.target===u(this,ji)){x(this,Qe,Po).call(this,e);return}const t=e.target.getAttribute("data-color");t&&x(this,Qe,cv).call(this,t,e)}_moveToNext(e){var t,n;if(!u(this,Qe,Rr)){x(this,Qe,Po).call(this,e);return}if(e.target===u(this,ji)){(t=u(this,Ft).firstChild)==null||t.focus();return}(n=e.target.nextSibling)==null||n.focus()}_moveToPrevious(e){var t,n;if(e.target===((t=u(this,Ft))==null?void 0:t.firstChild)||e.target===u(this,ji)){u(this,Qe,Rr)&&this._hideDropdownFromKeyboard();return}u(this,Qe,Rr)||x(this,Qe,Po).call(this,e),(n=e.target.previousSibling)==null||n.focus()}_moveToBeginning(e){var t;if(!u(this,Qe,Rr)){x(this,Qe,Po).call(this,e);return}(t=u(this,Ft).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!u(this,Qe,Rr)){x(this,Qe,Po).call(this,e);return}(t=u(this,Ft).lastChild)==null||t.focus()}hideDropdown(){var e,t;(e=u(this,Ft))==null||e.classList.add("hidden"),(t=u(this,Qr))==null||t.abort(),S(this,Qr,null)}_hideDropdownFromKeyboard(){var e;if(!u(this,fc)){if(!u(this,Qe,Rr)){(e=u(this,Kh))==null||e.unselect();return}this.hideDropdown(),u(this,ji).focus({preventScroll:!0,focusVisible:u(this,Xh)})}}updateColor(e){if(u(this,ba)&&(u(this,ba).style.backgroundColor=e),!u(this,Ft))return;const t=u(this,Bi).highlightColors.values();for(const n of u(this,Ft).children)n.setAttribute("aria-selected",t.next().value===e)}destroy(){var e,t;(e=u(this,ji))==null||e.remove(),S(this,ji,null),S(this,ba,null),(t=u(this,Ft))==null||t.remove(),S(this,Ft,null)}};ji=new WeakMap,ba=new WeakMap,dc=new WeakMap,Ft=new WeakMap,Xh=new WeakMap,fc=new WeakMap,Kh=new WeakMap,Yh=new WeakMap,Qr=new WeakMap,Bi=new WeakMap,pc=new WeakMap,Qh=new WeakMap,Qe=new WeakSet,lv=function(){const e=document.createElement("div"),t=u(this,Bi)._signal;e.addEventListener("contextmenu",yi,{signal:t}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[n,r]of u(this,Bi).highlightColors){const o=document.createElement("button");o.tabIndex="0",o.role="option",o.setAttribute("data-color",r),o.title=n,o.setAttribute("data-l10n-id",u(Ln,Qh)[n]);const l=document.createElement("span");o.append(l),l.className="swatch",l.style.backgroundColor=r,o.setAttribute("aria-selected",r===u(this,dc)),o.addEventListener("click",x(this,Qe,cv).bind(this,r),{signal:t}),e.append(o)}return e.addEventListener("keydown",x(this,Qe,uv).bind(this),{signal:t}),e},cv=function(e,t){t.stopPropagation(),u(this,Yh).dispatch("switchannotationeditorparams",{source:this,type:u(this,pc),value:e})},uv=function(e){Ln._keyboardManager.exec(this,e)},Po=function(e){if(u(this,Qe,Rr)){this.hideDropdown();return}if(S(this,Xh,e.detail===0),u(this,Qr)||(S(this,Qr,new AbortController),window.addEventListener("pointerdown",x(this,Qe,E_).bind(this),{signal:u(this,Bi).combinedSignal(u(this,Qr))})),u(this,Ft)){u(this,Ft).classList.remove("hidden");return}const t=S(this,Ft,x(this,Qe,lv).call(this));u(this,ji).append(t)},E_=function(e){var t;(t=u(this,Ft))!=null&&t.contains(e.target)||this.hideDropdown()},Rr=function(){return u(this,Ft)&&!u(this,Ft).classList.contains("hidden")},T(Ln,Qh,null);let wp=Ln;var gc,Jh,Gs,Sa,mc,hi,Zh,ed,Ea,zi,un,Fn,yc,qs,Dt,vc,di,td,Fe,hv,ip,__,x_,C_,dv,Lo,gi,Al,T_,sp,Iu,k_,R_,P_,L_,M_;const Ve=class Ve extends Ye{constructor(t){super({...t,name:"highlightEditor"});T(this,Fe);T(this,gc,null);T(this,Jh,0);T(this,Gs);T(this,Sa,null);T(this,mc,null);T(this,hi,null);T(this,Zh,null);T(this,ed,0);T(this,Ea,null);T(this,zi,null);T(this,un,null);T(this,Fn,!1);T(this,yc,null);T(this,qs);T(this,Dt,null);T(this,vc,"");T(this,di);T(this,td,"");this.color=t.color||Ve._defaultColor,S(this,di,t.thickness||Ve._defaultThickness),S(this,qs,t.opacity||Ve._defaultOpacity),S(this,Gs,t.boxes||null),S(this,td,t.methodOfCreation||""),S(this,vc,t.text||""),this._isDraggable=!1,t.highlightId>-1?(S(this,Fn,!0),x(this,Fe,ip).call(this,t),x(this,Fe,Lo).call(this)):u(this,Gs)&&(S(this,gc,t.anchorNode),S(this,Jh,t.anchorOffset),S(this,Zh,t.focusNode),S(this,ed,t.focusOffset),x(this,Fe,hv).call(this),x(this,Fe,Lo).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const t=Ve.prototype;return Ue(this,"_keyboardManager",new hd([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:u(this,Fn)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:u(this,di),methodOfCreation:u(this,td)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,n){var r;Ye.initialize(t,n),Ve._defaultColor||(Ve._defaultColor=((r=n.highlightColors)==null?void 0:r.values().next().value)||"#fff066")}static updateDefaultParams(t,n){switch(t){case Le.HIGHLIGHT_DEFAULT_COLOR:Ve._defaultColor=n;break;case Le.HIGHLIGHT_THICKNESS:Ve._defaultThickness=n;break}}translateInPage(t,n){}get toolbarPosition(){return u(this,yc)}updateParams(t,n){switch(t){case Le.HIGHLIGHT_COLOR:x(this,Fe,__).call(this,n);break;case Le.HIGHLIGHT_THICKNESS:x(this,Fe,x_).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Le.HIGHLIGHT_DEFAULT_COLOR,Ve._defaultColor],[Le.HIGHLIGHT_THICKNESS,Ve._defaultThickness]]}get propertiesToUpdate(){return[[Le.HIGHLIGHT_COLOR,this.color||Ve._defaultColor],[Le.HIGHLIGHT_THICKNESS,u(this,di)||Ve._defaultThickness],[Le.HIGHLIGHT_FREE,u(this,Fn)]]}async addEditToolbar(){const t=await super.addEditToolbar();return t?(this._uiManager.highlightColors&&(S(this,mc,new wp({editor:this})),t.addColorPicker(u(this,mc))),t):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(x(this,Fe,Iu).call(this))}getBaseTranslation(){return[0,0]}getRect(t,n){return super.getRect(t,n,x(this,Fe,Iu).call(this))}onceAdded(){this.annotationElementId||this.parent.addUndoableEditor(this),this.div.focus()}remove(){x(this,Fe,dv).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(x(this,Fe,Lo).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var r;let n=!1;this.parent&&!t?x(this,Fe,dv).call(this):t&&(x(this,Fe,Lo).call(this,t),n=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),n&&this.select()}rotate(t){var o,l,h;const{drawLayer:n}=this.parent;let r;u(this,Fn)?(t=(t-this.rotation+360)%360,r=x(o=Ve,gi,Al).call(o,u(this,zi).box,t)):r=x(l=Ve,gi,Al).call(l,this,t),n.rotate(u(this,un),t),n.rotate(u(this,Dt),t),n.updateBox(u(this,un),r),n.updateBox(u(this,Dt),x(h=Ve,gi,Al).call(h,u(this,hi).box,t))}render(){if(this.div)return this.div;const t=super.render();u(this,vc)&&(t.setAttribute("aria-label",u(this,vc)),t.setAttribute("role","mark")),u(this,Fn)?t.classList.add("free"):this.div.addEventListener("keydown",x(this,Fe,T_).bind(this),{signal:this._uiManager._signal});const n=S(this,Ea,document.createElement("div"));t.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=u(this,Sa);const[r,o]=this.parentDimensions;return this.setDims(this.width*r,this.height*o),mp(this,u(this,Ea),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent.drawLayer.addClass(u(this,Dt),"hovered")}pointerleave(){this.isSelected||this.parent.drawLayer.removeClass(u(this,Dt),"hovered")}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:x(this,Fe,sp).call(this,!0);break;case 1:case 3:x(this,Fe,sp).call(this,!1);break}}select(){var t,n;super.select(),u(this,Dt)&&((t=this.parent)==null||t.drawLayer.removeClass(u(this,Dt),"hovered"),(n=this.parent)==null||n.drawLayer.addClass(u(this,Dt),"selected"))}unselect(){var t;super.unselect(),u(this,Dt)&&((t=this.parent)==null||t.drawLayer.removeClass(u(this,Dt),"selected"),u(this,Fn)||x(this,Fe,sp).call(this,!1))}get _mustFixPosition(){return!u(this,Fn)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.show(u(this,un),t),this.parent.drawLayer.show(u(this,Dt),t))}static startHighlighting(t,n,{target:r,x:o,y:l}){const{x:h,y:d,width:p,height:g}=r.getBoundingClientRect(),y=new AbortController,v=t.combinedSignal(y),b=E=>{E.preventDefault(),E.stopPropagation()},A=E=>{y.abort(),x(this,gi,L_).call(this,t,E)};window.addEventListener("blur",A,{signal:v}),window.addEventListener("pointerup",A,{signal:v}),window.addEventListener("pointerdown",b,{capture:!0,passive:!1,signal:v}),window.addEventListener("contextmenu",yi,{signal:v}),r.addEventListener("pointermove",x(this,gi,P_).bind(this,t),{signal:v}),this._freeHighlight=new av({x:o,y:l},[h,d,p,g],t.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0)}static async deserialize(t,n,r){var E,C,k,L;let o=null;if(t instanceof i_){const{data:{quadPoints:M,rect:F,rotation:z,id:U,color:N,opacity:q,popupRef:J},parent:{page:{pageNumber:se}}}=t;o=t={annotationType:De.HIGHLIGHT,color:Array.from(N),opacity:q,quadPoints:M,boxes:null,pageIndex:se-1,rect:F.slice(0),rotation:z,id:U,deleted:!1,popupRef:J}}else if(t instanceof i0){const{data:{inkLists:M,rect:F,rotation:z,id:U,color:N,borderStyle:{rawWidth:q},popupRef:J},parent:{page:{pageNumber:se}}}=t;o=t={annotationType:De.HIGHLIGHT,color:Array.from(N),thickness:q,inkLists:M,boxes:null,pageIndex:se-1,rect:F.slice(0),rotation:z,id:U,deleted:!1,popupRef:J}}const{color:l,quadPoints:h,inkLists:d,opacity:p}=t,g=await super.deserialize(t,n,r);g.color=Ae.makeHexColor(...l),S(g,qs,p||1),d&&S(g,di,t.thickness),g.annotationElementId=t.id||null,g._initialData=o;const[y,v]=g.pageDimensions,[b,A]=g.pageTranslation;if(h){const M=S(g,Gs,[]);for(let F=0;F<h.length;F+=8)M.push({x:(h[F]-b)/y,y:1-(h[F+1]-A)/v,width:(h[F+2]-h[F])/y,height:(h[F+1]-h[F+5])/v});x(E=g,Fe,hv).call(E),x(C=g,Fe,Lo).call(C),g.rotate(g.rotation)}else if(d){S(g,Fn,!0);const M=d[0],F={x:M[0]-b,y:v-(M[1]-A)},z=new av(F,[0,0,y,v],1,u(g,di)/2,!0,.001);for(let q=0,J=M.length;q<J;q+=2)F.x=M[q]-b,F.y=v-(M[q+1]-A),z.add(F);const{id:U,clipPathId:N}=n.drawLayer.draw(z,g.color,g._defaultOpacity,!0);x(k=g,Fe,ip).call(k,{highlightOutlines:z.getOutlines(),highlightId:U,clipPathId:N}),x(L=g,Fe,Lo).call(L)}return g}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const n=this.getRect(0,0),r=Ye._colorManager.convert(this.color),o={annotationType:De.HIGHLIGHT,color:r,opacity:u(this,qs),thickness:u(this,di),quadPoints:x(this,Fe,k_).call(this),outlines:x(this,Fe,R_).call(this,n),pageIndex:this.pageIndex,rect:n,rotation:x(this,Fe,Iu).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!x(this,Fe,M_).call(this,o)?null:(o.id=this.annotationElementId,o)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};gc=new WeakMap,Jh=new WeakMap,Gs=new WeakMap,Sa=new WeakMap,mc=new WeakMap,hi=new WeakMap,Zh=new WeakMap,ed=new WeakMap,Ea=new WeakMap,zi=new WeakMap,un=new WeakMap,Fn=new WeakMap,yc=new WeakMap,qs=new WeakMap,Dt=new WeakMap,vc=new WeakMap,di=new WeakMap,td=new WeakMap,Fe=new WeakSet,hv=function(){const t=new Xb(u(this,Gs),.001);S(this,zi,t.getOutlines()),{x:this.x,y:this.y,width:this.width,height:this.height}=u(this,zi).box;const n=new Xb(u(this,Gs),.0025,.001,this._uiManager.direction==="ltr");S(this,hi,n.getOutlines());const{lastPoint:r}=u(this,hi).box;S(this,yc,[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height])},ip=function({highlightOutlines:t,highlightId:n,clipPathId:r}){var y,v;if(S(this,zi,t),S(this,hi,t.getNewOutline(u(this,di)/2+1.5,.0025)),n>=0)S(this,un,n),S(this,Sa,r),this.parent.drawLayer.finalizeLine(n,t),S(this,Dt,this.parent.drawLayer.drawOutline(u(this,hi)));else if(this.parent){const b=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(u(this,un),t),this.parent.drawLayer.updateBox(u(this,un),x(y=Ve,gi,Al).call(y,u(this,zi).box,(b-this.rotation+360)%360)),this.parent.drawLayer.updateLine(u(this,Dt),u(this,hi)),this.parent.drawLayer.updateBox(u(this,Dt),x(v=Ve,gi,Al).call(v,u(this,hi).box,b))}const{x:l,y:h,width:d,height:p}=t.box;switch(this.rotation){case 0:this.x=l,this.y=h,this.width=d,this.height=p;break;case 90:{const[b,A]=this.parentDimensions;this.x=h,this.y=1-l,this.width=d*A/b,this.height=p*b/A;break}case 180:this.x=1-l,this.y=1-h,this.width=d,this.height=p;break;case 270:{const[b,A]=this.parentDimensions;this.x=1-h,this.y=l,this.width=d*A/b,this.height=p*b/A;break}}const{lastPoint:g}=u(this,hi).box;S(this,yc,[(g[0]-l)/d,(g[1]-h)/p])},__=function(t){const n=(l,h)=>{var d,p,g;this.color=l,(d=this.parent)==null||d.drawLayer.changeColor(u(this,un),l),(p=u(this,mc))==null||p.updateColor(l),S(this,qs,h),(g=this.parent)==null||g.drawLayer.changeOpacity(u(this,un),h)},r=this.color,o=u(this,qs);this.addCommands({cmd:n.bind(this,t,Ve._defaultOpacity),undo:n.bind(this,r,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Le.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)},x_=function(t){const n=u(this,di),r=o=>{S(this,di,o),x(this,Fe,C_).call(this,o)};this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Le.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},C_=function(t){if(!u(this,Fn))return;x(this,Fe,ip).call(this,{highlightOutlines:u(this,zi).getNewOutline(t/2)}),this.fixAndSetPosition();const[n,r]=this.parentDimensions;this.setDims(this.width*n,this.height*r)},dv=function(){u(this,un)===null||!this.parent||(this.parent.drawLayer.remove(u(this,un)),S(this,un,null),this.parent.drawLayer.remove(u(this,Dt)),S(this,Dt,null))},Lo=function(t=this.parent){u(this,un)===null&&({id:yn(this,un)._,clipPathId:yn(this,Sa)._}=t.drawLayer.draw(u(this,zi),this.color,u(this,qs)),S(this,Dt,t.drawLayer.drawOutline(u(this,hi))),u(this,Ea)&&(u(this,Ea).style.clipPath=u(this,Sa)))},gi=new WeakSet,Al=function({x:t,y:n,width:r,height:o},l){switch(l){case 90:return{x:1-n-o,y:t,width:o,height:r};case 180:return{x:1-t-r,y:1-n-o,width:r,height:o};case 270:return{x:n,y:1-t-r,width:o,height:r}}return{x:t,y:n,width:r,height:o}},T_=function(t){Ve._keyboardManager.exec(this,t)},sp=function(t){if(!u(this,gc))return;const n=window.getSelection();t?n.setPosition(u(this,gc),u(this,Jh)):n.setPosition(u(this,Zh),u(this,ed))},Iu=function(){return u(this,Fn)?this.rotation:0},k_=function(){if(u(this,Fn))return null;const[t,n]=this.pageDimensions,[r,o]=this.pageTranslation,l=u(this,Gs),h=new Float32Array(l.length*8);let d=0;for(const{x:p,y:g,width:y,height:v}of l){const b=p*t+r,A=(1-g-v)*n+o;h[d]=h[d+4]=b,h[d+1]=h[d+3]=A,h[d+2]=h[d+6]=b+y*t,h[d+5]=h[d+7]=A+v*n,d+=8}return h},R_=function(t){return u(this,zi).serialize(t,x(this,Fe,Iu).call(this))},P_=function(t,n){this._freeHighlight.add(n)&&t.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)},L_=function(t,n){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},M_=function(t){const{color:n}=this._initialData;return t.color.some((r,o)=>r!==n[o])},T(Ve,gi),Pe(Ve,"_defaultColor",null),Pe(Ve,"_defaultOpacity",1),Pe(Ve,"_defaultThickness",12),Pe(Ve,"_type","highlight"),Pe(Ve,"_editorType",De.HIGHLIGHT),Pe(Ve,"_freeHighlightId",-1),Pe(Ve,"_freeHighlight",null),Pe(Ve,"_freeHighlightClipId","");let Ap=Ve;var _a,xa,us,Xs,fi,Ca,Ta,ka,Ks,wc,Ra,Pa,Jr,ie,I_,F_,D_,O_,pv,N_,gv,j_,B_,z_,H_,U_,Mo,mv,yv,vv,rp,op,bl,wv,ap,or,$_,Av,W_,V_,bv,lp,Fu;const ht=class ht extends Ye{constructor(t){super({...t,name:"inkEditor"});T(this,ie);T(this,_a,0);T(this,xa,0);T(this,us,null);T(this,Xs,new Path2D);T(this,fi,!1);T(this,Ca,null);T(this,Ta,!1);T(this,ka,!1);T(this,Ks,null);T(this,wc,null);T(this,Ra,0);T(this,Pa,0);T(this,Jr,null);this.color=t.color||null,this.thickness=t.thickness||null,this.opacity=t.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(t,n){Ye.initialize(t,n)}static updateDefaultParams(t,n){switch(t){case Le.INK_THICKNESS:ht._defaultThickness=n;break;case Le.INK_COLOR:ht._defaultColor=n;break;case Le.INK_OPACITY:ht._defaultOpacity=n/100;break}}updateParams(t,n){switch(t){case Le.INK_THICKNESS:x(this,ie,I_).call(this,n);break;case Le.INK_COLOR:x(this,ie,F_).call(this,n);break;case Le.INK_OPACITY:x(this,ie,D_).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Le.INK_THICKNESS,ht._defaultThickness],[Le.INK_COLOR,ht._defaultColor||Ye._defaultLineColor],[Le.INK_OPACITY,Math.round(ht._defaultOpacity*100)]]}get propertiesToUpdate(){return[[Le.INK_THICKNESS,this.thickness||ht._defaultThickness],[Le.INK_COLOR,this.color||ht._defaultColor||Ye._defaultLineColor],[Le.INK_OPACITY,Math.round(100*(this.opacity??ht._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(x(this,ie,rp).call(this),x(this,ie,op).call(this)),this.isAttachedToDOM||(this.parent.add(this),x(this,ie,bl).call(this)),x(this,ie,Fu).call(this)))}remove(){var t;this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,u(this,us)&&(clearTimeout(u(this,us)),S(this,us,null)),(t=u(this,Ks))==null||t.disconnect(),S(this,Ks,null),super.remove())}setParent(t){!this.parent&&t?this._uiManager.removeShouldRescale(this):this.parent&&t===null&&this._uiManager.addShouldRescale(this),super.setParent(t)}onScaleChanging(){const[t,n]=this.parentDimensions,r=this.width*t,o=this.height*n;this.setDimensions(r,o)}enableEditMode(){u(this,fi)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,x(this,ie,mv).call(this))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),x(this,ie,yv).call(this))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){u(this,fi)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),S(this,fi,!0),this.div.classList.add("disabled"),x(this,ie,Fu).call(this,!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),this.enableEditMode())}canvasPointerdown(t){t.button!==0||!this.isInEditMode()||u(this,fi)||(this.setInForeground(),t.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),x(this,ie,N_).call(this,t.offsetX,t.offsetY))}canvasPointermove(t){t.preventDefault(),x(this,ie,gv).call(this,t.offsetX,t.offsetY)}canvasPointerup(t){t.preventDefault(),x(this,ie,vv).call(this,t)}canvasPointerleave(t){x(this,ie,vv).call(this,t)}get isResizable(){return!this.isEmpty()&&u(this,fi)}render(){if(this.div)return this.div;let t,n;this.width&&(t=this.x,n=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[r,o,l,h]=x(this,ie,O_).call(this);if(this.setAt(r,o,0,0),this.setDims(l,h),x(this,ie,rp).call(this),this.width){const[d,p]=this.parentDimensions;this.setAspectRatio(this.width*d,this.height*p),this.setAt(t*d,n*p,this.width*d,this.height*p),S(this,ka,!0),x(this,ie,bl).call(this),this.setDims(this.width*d,this.height*p),x(this,ie,Mo).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return x(this,ie,op).call(this),this.div}setDimensions(t,n){const r=Math.round(t),o=Math.round(n);if(u(this,Ra)===r&&u(this,Pa)===o)return;S(this,Ra,r),S(this,Pa,o),this.canvas.style.visibility="hidden";const[l,h]=this.parentDimensions;this.width=t/l,this.height=n/h,this.fixAndSetPosition(),u(this,fi)&&x(this,ie,wv).call(this,t,n),x(this,ie,bl).call(this),x(this,ie,Mo).call(this),this.canvas.style.visibility="visible",this.fixDims()}static async deserialize(t,n,r){var C,k,L;if(t instanceof i0)return null;const o=await super.deserialize(t,n,r);o.thickness=t.thickness,o.color=Ae.makeHexColor(...t.color),o.opacity=t.opacity;const[l,h]=o.pageDimensions,d=o.width*l,p=o.height*h,g=o.parentScale,y=t.thickness/2;S(o,fi,!0),S(o,Ra,Math.round(d)),S(o,Pa,Math.round(p));const{paths:v,rect:b,rotation:A}=t;for(let{bezier:M}of v){M=x(C=ht,or,W_).call(C,M,b,A);const F=[];o.paths.push(F);let z=g*(M[0]-y),U=g*(M[1]-y);for(let q=2,J=M.length;q<J;q+=6){const se=g*(M[q]-y),ne=g*(M[q+1]-y),be=g*(M[q+2]-y),de=g*(M[q+3]-y),ce=g*(M[q+4]-y),me=g*(M[q+5]-y);F.push([[z,U],[se,ne],[be,de],[ce,me]]),z=ce,U=me}const N=x(this,or,$_).call(this,F);o.bezierPath2D.push(N)}const E=x(k=o,ie,bv).call(k);return S(o,xa,Math.max(Ye.MIN_SIZE,E[2]-E[0])),S(o,_a,Math.max(Ye.MIN_SIZE,E[3]-E[1])),x(L=o,ie,wv).call(L,d,p),o}serialize(){if(this.isEmpty())return null;const t=this.getRect(0,0),n=Ye._colorManager.convert(this.ctx.strokeStyle);return{annotationType:De.INK,color:n,thickness:this.thickness,opacity:this.opacity,paths:x(this,ie,V_).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,t),pageIndex:this.pageIndex,rect:t,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};_a=new WeakMap,xa=new WeakMap,us=new WeakMap,Xs=new WeakMap,fi=new WeakMap,Ca=new WeakMap,Ta=new WeakMap,ka=new WeakMap,Ks=new WeakMap,wc=new WeakMap,Ra=new WeakMap,Pa=new WeakMap,Jr=new WeakMap,ie=new WeakSet,I_=function(t){const n=o=>{this.thickness=o,x(this,ie,Fu).call(this)},r=this.thickness;this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Le.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},F_=function(t){const n=o=>{this.color=o,x(this,ie,Mo).call(this)},r=this.color;this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Le.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},D_=function(t){const n=o=>{this.opacity=o,x(this,ie,Mo).call(this)};t/=100;const r=this.opacity;this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Le.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},O_=function(){const{parentRotation:t,parentDimensions:[n,r]}=this;switch(t){case 90:return[0,r,r,n];case 180:return[n,r,n,r];case 270:return[n,0,r,n];default:return[0,0,n,r]}},pv=function(){const{ctx:t,color:n,opacity:r,thickness:o,parentScale:l,scaleFactor:h}=this;t.lineWidth=o*l/h,t.lineCap="round",t.lineJoin="round",t.miterLimit=10,t.strokeStyle=`${n}${jR(r)}`},N_=function(t,n){this.canvas.addEventListener("contextmenu",yi,{signal:this._uiManager._signal}),x(this,ie,yv).call(this),S(this,Ca,new AbortController);const r=this._uiManager.combinedSignal(u(this,Ca));this.canvas.addEventListener("pointerleave",this.canvasPointerleave.bind(this),{signal:r}),this.canvas.addEventListener("pointermove",this.canvasPointermove.bind(this),{signal:r}),this.canvas.addEventListener("pointerup",this.canvasPointerup.bind(this),{signal:r}),this.isEditing=!0,u(this,ka)||(S(this,ka,!0),x(this,ie,bl).call(this),this.thickness||(this.thickness=ht._defaultThickness),this.color||(this.color=ht._defaultColor||Ye._defaultLineColor),this.opacity??(this.opacity=ht._defaultOpacity)),this.currentPath.push([t,n]),S(this,Ta,!1),x(this,ie,pv).call(this),S(this,Jr,()=>{x(this,ie,z_).call(this),u(this,Jr)&&window.requestAnimationFrame(u(this,Jr))}),window.requestAnimationFrame(u(this,Jr))},gv=function(t,n){const[r,o]=this.currentPath.at(-1);if(this.currentPath.length>1&&t===r&&n===o)return;const l=this.currentPath;let h=u(this,Xs);if(l.push([t,n]),S(this,Ta,!0),l.length<=2){h.moveTo(...l[0]),h.lineTo(t,n);return}l.length===3&&(S(this,Xs,h=new Path2D),h.moveTo(...l[0])),x(this,ie,H_).call(this,h,...l.at(-3),...l.at(-2),t,n)},j_=function(){if(this.currentPath.length===0)return;const t=this.currentPath.at(-1);u(this,Xs).lineTo(...t)},B_=function(t,n){S(this,Jr,null),t=Math.min(Math.max(t,0),this.canvas.width),n=Math.min(Math.max(n,0),this.canvas.height),x(this,ie,gv).call(this,t,n),x(this,ie,j_).call(this);let r;if(this.currentPath.length!==1)r=x(this,ie,U_).call(this);else{const p=[t,n];r=[[p,p.slice(),p.slice(),p]]}const o=u(this,Xs),l=this.currentPath;this.currentPath=[],S(this,Xs,new Path2D);const h=()=>{this.allRawPaths.push(l),this.paths.push(r),this.bezierPath2D.push(o),this._uiManager.rebuild(this)},d=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(x(this,ie,rp).call(this),x(this,ie,op).call(this)),x(this,ie,Fu).call(this))};this.addCommands({cmd:h,undo:d,mustExec:!0})},z_=function(){if(!u(this,Ta))return;S(this,Ta,!1);const t=Math.ceil(this.thickness*this.parentScale),n=this.currentPath.slice(-3),r=n.map(h=>h[0]),o=n.map(h=>h[1]);Math.min(...r)-t,Math.max(...r)+t,Math.min(...o)-t,Math.max(...o)+t;const{ctx:l}=this;l.save(),l.clearRect(0,0,this.canvas.width,this.canvas.height);for(const h of this.bezierPath2D)l.stroke(h);l.stroke(u(this,Xs)),l.restore()},H_=function(t,n,r,o,l,h,d){const p=(n+o)/2,g=(r+l)/2,y=(o+h)/2,v=(l+d)/2;t.bezierCurveTo(p+2*(o-p)/3,g+2*(l-g)/3,y+2*(o-y)/3,v+2*(l-v)/3,y,v)},U_=function(){const t=this.currentPath;if(t.length<=2)return[[t[0],t[0],t.at(-1),t.at(-1)]];const n=[];let r,[o,l]=t[0];for(r=1;r<t.length-2;r++){const[b,A]=t[r],[E,C]=t[r+1],k=(b+E)/2,L=(A+C)/2,M=[o+2*(b-o)/3,l+2*(A-l)/3],F=[k+2*(b-k)/3,L+2*(A-L)/3];n.push([[o,l],M,F,[k,L]]),[o,l]=[k,L]}const[h,d]=t[r],[p,g]=t[r+1],y=[o+2*(h-o)/3,l+2*(d-l)/3],v=[p+2*(h-p)/3,g+2*(d-g)/3];return n.push([[o,l],y,v,[p,g]]),n},Mo=function(){if(this.isEmpty()){x(this,ie,ap).call(this);return}x(this,ie,pv).call(this);const{canvas:t,ctx:n}=this;n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,t.width,t.height),x(this,ie,ap).call(this);for(const r of this.bezierPath2D)n.stroke(r)},mv=function(){if(u(this,wc))return;S(this,wc,new AbortController);const t=this._uiManager.combinedSignal(u(this,wc));this.canvas.addEventListener("pointerdown",this.canvasPointerdown.bind(this),{signal:t})},yv=function(){var t;(t=this.pointerdownAC)==null||t.abort(),this.pointerdownAC=null},vv=function(t){var n;(n=u(this,Ca))==null||n.abort(),S(this,Ca,null),x(this,ie,mv).call(this),u(this,us)&&clearTimeout(u(this,us)),S(this,us,setTimeout(()=>{S(this,us,null),this.canvas.removeEventListener("contextmenu",yi)},10)),x(this,ie,B_).call(this,t.offsetX,t.offsetY),this.addToAnnotationStorage(),this.setInBackground()},rp=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},op=function(){S(this,Ks,new ResizeObserver(t=>{const n=t[0].contentRect;n.width&&n.height&&this.setDimensions(n.width,n.height)})),u(this,Ks).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var t;(t=u(this,Ks))==null||t.disconnect(),S(this,Ks,null)},{once:!0})},bl=function(){if(!u(this,ka))return;const[t,n]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*t),this.canvas.height=Math.ceil(this.height*n),x(this,ie,ap).call(this)},wv=function(t,n){const r=x(this,ie,lp).call(this),o=(t-r)/u(this,xa),l=(n-r)/u(this,_a);this.scaleFactor=Math.min(o,l)},ap=function(){const t=x(this,ie,lp).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+t,this.translationY*this.scaleFactor+t)},or=new WeakSet,$_=function(t){const n=new Path2D;for(let r=0,o=t.length;r<o;r++){const[l,h,d,p]=t[r];r===0&&n.moveTo(...l),n.bezierCurveTo(h[0],h[1],d[0],d[1],p[0],p[1])}return n},Av=function(t,n,r){const[o,l,h,d]=n;switch(r){case 0:for(let p=0,g=t.length;p<g;p+=2)t[p]+=o,t[p+1]=d-t[p+1];break;case 90:for(let p=0,g=t.length;p<g;p+=2){const y=t[p];t[p]=t[p+1]+o,t[p+1]=y+l}break;case 180:for(let p=0,g=t.length;p<g;p+=2)t[p]=h-t[p],t[p+1]+=l;break;case 270:for(let p=0,g=t.length;p<g;p+=2){const y=t[p];t[p]=h-t[p+1],t[p+1]=d-y}break;default:throw new Error("Invalid rotation")}return t},W_=function(t,n,r){const[o,l,h,d]=n;switch(r){case 0:for(let p=0,g=t.length;p<g;p+=2)t[p]-=o,t[p+1]=d-t[p+1];break;case 90:for(let p=0,g=t.length;p<g;p+=2){const y=t[p];t[p]=t[p+1]-l,t[p+1]=y-o}break;case 180:for(let p=0,g=t.length;p<g;p+=2)t[p]=h-t[p],t[p+1]-=l;break;case 270:for(let p=0,g=t.length;p<g;p+=2){const y=t[p];t[p]=d-t[p+1],t[p+1]=h-y}break;default:throw new Error("Invalid rotation")}return t},V_=function(t,n,r,o){var g,y;const l=[],h=this.thickness/2,d=t*n+h,p=t*r+h;for(const v of this.paths){const b=[],A=[];for(let E=0,C=v.length;E<C;E++){const[k,L,M,F]=v[E];if(k[0]===F[0]&&k[1]===F[1]&&C===1){const de=t*k[0]+d,ce=t*k[1]+p;b.push(de,ce),A.push(de,ce);break}const z=t*k[0]+d,U=t*k[1]+p,N=t*L[0]+d,q=t*L[1]+p,J=t*M[0]+d,se=t*M[1]+p,ne=t*F[0]+d,be=t*F[1]+p;E===0&&(b.push(z,U),A.push(z,U)),b.push(N,q,J,se,ne,be),A.push(N,q),E===C-1&&A.push(ne,be)}l.push({bezier:x(g=ht,or,Av).call(g,b,o,this.rotation),points:x(y=ht,or,Av).call(y,A,o,this.rotation)})}return l},bv=function(){let t=1/0,n=-1/0,r=1/0,o=-1/0;for(const l of this.paths)for(const[h,d,p,g]of l){const y=Ae.bezierBoundingBox(...h,...d,...p,...g);t=Math.min(t,y[0]),r=Math.min(r,y[1]),n=Math.max(n,y[2]),o=Math.max(o,y[3])}return[t,r,n,o]},lp=function(){return u(this,fi)?Math.ceil(this.thickness*this.parentScale):0},Fu=function(t=!1){if(this.isEmpty())return;if(!u(this,fi)){x(this,ie,Mo).call(this);return}const n=x(this,ie,bv).call(this),r=x(this,ie,lp).call(this);S(this,xa,Math.max(Ye.MIN_SIZE,n[2]-n[0])),S(this,_a,Math.max(Ye.MIN_SIZE,n[3]-n[1]));const o=Math.ceil(r+u(this,xa)*this.scaleFactor),l=Math.ceil(r+u(this,_a)*this.scaleFactor),[h,d]=this.parentDimensions;this.width=o/h,this.height=l/d,this.setAspectRatio(o,l);const p=this.translationX,g=this.translationY;this.translationX=-n[0],this.translationY=-n[1],x(this,ie,bl).call(this),x(this,ie,Mo).call(this),S(this,Ra,o),S(this,Pa,l),this.setDims(o,l);const y=t?r/this.scaleFactor/2:0;this.translate(p-this.translationX-y,g-this.translationY-y)},T(ht,or),Pe(ht,"_defaultColor",null),Pe(ht,"_defaultOpacity",1),Pe(ht,"_defaultThickness",1),Pe(ht,"_type","ink"),Pe(ht,"_editorType",De.INK);let fv=ht;var ft,Jt,Zr,Ys,eo,Ac,hs,Qs,ds,Yn,bc,ze,Du,Ou,cp,Ev,G_,up,_v,hp,q_,X_;const Bu=class Bu extends Ye{constructor(t){super({...t,name:"stampEditor"});T(this,ze);T(this,ft,null);T(this,Jt,null);T(this,Zr,null);T(this,Ys,null);T(this,eo,null);T(this,Ac,"");T(this,hs,null);T(this,Qs,null);T(this,ds,null);T(this,Yn,!1);T(this,bc,!1);S(this,Ys,t.bitmapUrl),S(this,eo,t.bitmapFile)}static initialize(t,n){Ye.initialize(t,n)}static get supportedTypes(){return Ue(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(n=>`image/${n}`))}static get supportedTypesStr(){return Ue(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(t){return this.supportedTypes.includes(t)}static paste(t,n){n.pasteEditor(De.STAMP,{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const n=t.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}async mlGuessAltText(t=null,n=!0){if(this.hasAltTextData())return null;const{mlManager:r}=this._uiManager;if(!r)throw new Error("No ML.");if(!await r.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:o,width:l,height:h}=t||this.copyCanvas(null,null,!0).imageData,d=await r.guess({name:"altText",request:{data:o,width:l,height:h,channels:o.length/(l*h)}});if(!d)throw new Error("No response from the AI service.");if(d.error)throw new Error("Error from the AI service.");if(d.cancel)return null;if(!d.output)throw new Error("No valid response from the AI service.");const p=d.output;return await this.setGuessedAltText(p),n&&!this.hasAltTextData()&&(this.altTextData={alt:p,decorative:!1}),p}remove(){var t,n;u(this,Jt)&&(S(this,ft,null),this._uiManager.imageManager.deleteId(u(this,Jt)),(t=u(this,hs))==null||t.remove(),S(this,hs,null),(n=u(this,Qs))==null||n.disconnect(),S(this,Qs,null),u(this,ds)&&(clearTimeout(u(this,ds)),S(this,ds,null))),super.remove()}rebuild(){if(!this.parent){u(this,Jt)&&x(this,ze,cp).call(this);return}super.rebuild(),this.div!==null&&(u(this,Jt)&&u(this,hs)===null&&x(this,ze,cp).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(u(this,Zr)||u(this,ft)||u(this,Ys)||u(this,eo)||u(this,Jt))}get isResizable(){return!0}render(){if(this.div)return this.div;let t,n;if(this.width&&(t=this.x,n=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),u(this,ft)?x(this,ze,Ev).call(this):x(this,ze,cp).call(this),this.width&&!this.annotationElementId){const[r,o]=this.parentDimensions;this.setAt(t*r,n*o,this.width*r,this.height*o)}return this.div}copyCanvas(t,n,r=!1){var b;t||(t=224);const{width:o,height:l}=u(this,ft),h=new vy;let d=u(this,ft),p=o,g=l,y=null;if(n){if(o>n||l>n){const q=Math.min(n/o,n/l);p=Math.floor(o*q),g=Math.floor(l*q)}y=document.createElement("canvas");const A=y.width=Math.ceil(p*h.sx),E=y.height=Math.ceil(g*h.sy);u(this,Yn)||(d=x(this,ze,up).call(this,A,E));const C=y.getContext("2d");C.filter=this._uiManager.hcmFilter;let k="white",L="#cfcfd8";this._uiManager.hcmFilter!=="none"?L="black":(b=window.matchMedia)!=null&&b.call(window,"(prefers-color-scheme: dark)").matches&&(k="#8f8f9d",L="#42414d");const M=15,F=M*h.sx,z=M*h.sy,U=new OffscreenCanvas(F*2,z*2),N=U.getContext("2d");N.fillStyle=k,N.fillRect(0,0,F*2,z*2),N.fillStyle=L,N.fillRect(0,0,F,z),N.fillRect(F,z,F,z),C.fillStyle=C.createPattern(U,"repeat"),C.fillRect(0,0,A,E),C.drawImage(d,0,0,d.width,d.height,0,0,A,E)}let v=null;if(r){let A,E;if(h.symmetric&&d.width<t&&d.height<t)A=d.width,E=d.height;else if(d=u(this,ft),o>t||l>t){const L=Math.min(t/o,t/l);A=Math.floor(o*L),E=Math.floor(l*L),u(this,Yn)||(d=x(this,ze,up).call(this,A,E))}const k=new OffscreenCanvas(A,E).getContext("2d",{willReadFrequently:!0});k.drawImage(d,0,0,d.width,d.height,0,0,A,E),v={width:A,height:E,data:k.getImageData(0,0,A,E).data}}return{canvas:y,width:p,height:g,imageData:v}}getImageForAltText(){return u(this,hs)}static async deserialize(t,n,r){var E;let o=null;if(t instanceof s_){const{data:{rect:C,rotation:k,id:L,structParent:M,popupRef:F},container:z,parent:{page:{pageNumber:U}}}=t,N=z.querySelector("canvas"),q=r.imageManager.getFromCanvas(z.id,N);N.remove();const J=((E=await n._structTree.getAriaAttributes(`${Gv}${L}`))==null?void 0:E.get("aria-label"))||"";o=t={annotationType:De.STAMP,bitmapId:q.id,bitmap:q.bitmap,pageIndex:U-1,rect:C.slice(0),rotation:k,id:L,deleted:!1,accessibilityData:{decorative:!1,altText:J},isSvg:!1,structParent:M,popupRef:F}}const l=await super.deserialize(t,n,r),{rect:h,bitmap:d,bitmapUrl:p,bitmapId:g,isSvg:y,accessibilityData:v}=t;g&&r.imageManager.isValidId(g)?(S(l,Jt,g),d&&S(l,ft,d)):S(l,Ys,p),S(l,Yn,y);const[b,A]=l.pageDimensions;return l.width=(h[2]-h[0])/b,l.height=(h[3]-h[1])/A,l.annotationElementId=t.id||null,v&&(l.altTextData=v),l._initialData=o,S(l,bc,!!o),l}serialize(t=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r={annotationType:De.STAMP,bitmapId:u(this,Jt),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:u(this,Yn),structTreeParentId:this._structTreeParentId};if(t)return r.bitmapUrl=x(this,ze,hp).call(this,!0),r.accessibilityData=this.serializeAltText(!0),r;const{decorative:o,altText:l}=this.serializeAltText(!1);if(!o&&l&&(r.accessibilityData={type:"Figure",alt:l}),this.annotationElementId){const d=x(this,ze,X_).call(this,r);if(d.isSame)return null;d.isSameAltText?delete r.accessibilityData:r.accessibilityData.structParent=this._initialData.structParent??-1}if(r.id=this.annotationElementId,n===null)return r;n.stamps||(n.stamps=new Map);const h=u(this,Yn)?(r.rect[2]-r.rect[0])*(r.rect[3]-r.rect[1]):null;if(!n.stamps.has(u(this,Jt)))n.stamps.set(u(this,Jt),{area:h,serialized:r}),r.bitmap=x(this,ze,hp).call(this,!1);else if(u(this,Yn)){const d=n.stamps.get(u(this,Jt));h>d.area&&(d.area=h,d.serialized.bitmap.close(),d.serialized.bitmap=x(this,ze,hp).call(this,!1))}return r}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}};ft=new WeakMap,Jt=new WeakMap,Zr=new WeakMap,Ys=new WeakMap,eo=new WeakMap,Ac=new WeakMap,hs=new WeakMap,Qs=new WeakMap,ds=new WeakMap,Yn=new WeakMap,bc=new WeakMap,ze=new WeakSet,Du=function(t,n=!1){if(!t){this.remove();return}S(this,ft,t.bitmap),n||(S(this,Jt,t.id),S(this,Yn,t.isSvg)),t.file&&S(this,Ac,t.file.name),x(this,ze,Ev).call(this)},Ou=function(){if(S(this,Zr,null),this._uiManager.enableWaiting(!1),!!u(this,hs)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&u(this,ft)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&u(this,ft)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},cp=function(){if(u(this,Jt)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(u(this,Jt)).then(r=>x(this,ze,Du).call(this,r,!0)).finally(()=>x(this,ze,Ou).call(this));return}if(u(this,Ys)){const r=u(this,Ys);S(this,Ys,null),this._uiManager.enableWaiting(!0),S(this,Zr,this._uiManager.imageManager.getFromUrl(r).then(o=>x(this,ze,Du).call(this,o)).finally(()=>x(this,ze,Ou).call(this)));return}if(u(this,eo)){const r=u(this,eo);S(this,eo,null),this._uiManager.enableWaiting(!0),S(this,Zr,this._uiManager.imageManager.getFromFile(r).then(o=>x(this,ze,Du).call(this,o)).finally(()=>x(this,ze,Ou).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=Bu.supportedTypesStr;const n=this._uiManager._signal;S(this,Zr,new Promise(r=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const o=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),x(this,ze,Du).call(this,o)}r()},{signal:n}),t.addEventListener("cancel",()=>{this.remove(),r()},{signal:n})}).finally(()=>x(this,ze,Ou).call(this))),t.click()},Ev=function(){const{div:t}=this;let{width:n,height:r}=u(this,ft);const[o,l]=this.pageDimensions,h=.75;if(this.width)n=this.width*o,r=this.height*l;else if(n>h*o||r>h*l){const y=Math.min(h*o/n,h*l/r);n*=y,r*=y}const[d,p]=this.parentDimensions;this.setDims(n*d/o,r*p/l),this._uiManager.enableWaiting(!1);const g=S(this,hs,document.createElement("canvas"));g.setAttribute("role","img"),this.addContainer(g),(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),x(this,ze,_v).call(this,n,r),x(this,ze,q_).call(this),u(this,bc)||(this.parent.addUndoableEditor(this),S(this,bc,!0)),this._reportTelemetry({action:"inserted_image"}),u(this,Ac)&&g.setAttribute("aria-label",u(this,Ac))},G_=function(t,n){var h;const[r,o]=this.parentDimensions;this.width=t/r,this.height=n/o,(h=this._initialOptions)!=null&&h.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,u(this,ds)!==null&&clearTimeout(u(this,ds)),S(this,ds,setTimeout(()=>{S(this,ds,null),x(this,ze,_v).call(this,t,n)},200))},up=function(t,n){const{width:r,height:o}=u(this,ft);let l=r,h=o,d=u(this,ft);for(;l>2*t||h>2*n;){const p=l,g=h;l>2*t&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2)),h>2*n&&(h=h>=16384?Math.floor(h/2)-1:Math.ceil(h/2));const y=new OffscreenCanvas(l,h);y.getContext("2d").drawImage(d,0,0,p,g,0,0,l,h),d=y.transferToImageBitmap()}return d},_v=function(t,n){const r=new vy,o=Math.ceil(t*r.sx),l=Math.ceil(n*r.sy),h=u(this,hs);if(!h||h.width===o&&h.height===l)return;h.width=o,h.height=l;const d=u(this,Yn)?u(this,ft):x(this,ze,up).call(this,o,l),p=h.getContext("2d");p.filter=this._uiManager.hcmFilter,p.drawImage(d,0,0,d.width,d.height,0,0,o,l)},hp=function(t){if(t){if(u(this,Yn)){const o=this._uiManager.imageManager.getSvgUrl(u(this,Jt));if(o)return o}const n=document.createElement("canvas");return{width:n.width,height:n.height}=u(this,ft),n.getContext("2d").drawImage(u(this,ft),0,0),n.toDataURL()}if(u(this,Yn)){const[n,r]=this.pageDimensions,o=Math.round(this.width*n*oo.PDF_TO_CSS_UNITS),l=Math.round(this.height*r*oo.PDF_TO_CSS_UNITS),h=new OffscreenCanvas(o,l);return h.getContext("2d").drawImage(u(this,ft),0,0,u(this,ft).width,u(this,ft).height,0,0,o,l),h.transferToImageBitmap()}return structuredClone(u(this,ft))},q_=function(){this._uiManager._signal&&(S(this,Qs,new ResizeObserver(t=>{const n=t[0].contentRect;n.width&&n.height&&x(this,ze,G_).call(this,n.width,n.height)})),u(this,Qs).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var t;(t=u(this,Qs))==null||t.disconnect(),S(this,Qs,null)},{once:!0}))},X_=function(t){var p;const{rect:n,pageIndex:r,accessibilityData:{altText:o}}=this._initialData,l=t.rect.every((g,y)=>Math.abs(g-n[y])<1),h=t.pageIndex===r,d=(((p=t.accessibilityData)==null?void 0:p.alt)||"")===o;return{isSame:l&&h&&d,isSameAltText:d}},Pe(Bu,"_type","stamp"),Pe(Bu,"_editorType",De.STAMP);let Sv=Bu;var La,Sc,fs,to,Js,Qn,no,Ec,_c,hn,Zs,Ee,io,Zt,K_,Cv,Tv,kv,dp;const Ci=class Ci{constructor({uiManager:e,pageIndex:t,div:n,structTreeLayer:r,accessibilityManager:o,annotationLayer:l,drawLayer:h,textLayer:d,viewport:p,l10n:g}){T(this,Zt);T(this,La);T(this,Sc,!1);T(this,fs,null);T(this,to,null);T(this,Js,null);T(this,Qn,new Map);T(this,no,!1);T(this,Ec,!1);T(this,_c,!1);T(this,hn,null);T(this,Zs,null);T(this,Ee);const y=[...u(Ci,io).values()];if(!Ci._initialized){Ci._initialized=!0;for(const v of y)v.initialize(g,e)}e.registerEditorTypes(y),S(this,Ee,e),this.pageIndex=t,this.div=n,S(this,La,o),S(this,fs,l),this.viewport=p,S(this,hn,d),this.drawLayer=h,this._structTree=r,u(this,Ee).addLayer(this)}get isEmpty(){return u(this,Qn).size===0}get isInvisible(){return this.isEmpty&&u(this,Ee).getMode()===De.NONE}updateToolbar(e){u(this,Ee).updateToolbar(e)}updateMode(e=u(this,Ee).getMode()){switch(x(this,Zt,dp).call(this),e){case De.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case De.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case De.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const n of u(Ci,io).values())t.toggle(`${n._type}Editing`,e===n._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=u(this,hn))==null?void 0:t.div)}addInkEditorIfNeeded(e){if(u(this,Ee).getMode()!==De.INK)return;if(!e){for(const n of u(this,Qn).values())if(n.isEmpty()){n.setInBackground();return}}this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(e){u(this,Ee).setEditingState(e)}addCommands(e){u(this,Ee).addCommands(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=u(this,fs))==null||t.div.classList.toggle("disabled",!e)}async enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const e=new Set;for(const n of u(this,Qn).values())n.enableEditing(),n.show(!0),n.annotationElementId&&(u(this,Ee).removeChangedExistingAnnotation(n),e.add(n.annotationElementId));if(!u(this,fs))return;const t=u(this,fs).getEditableAnnotations();for(const n of t){if(n.hide(),u(this,Ee).isDeletedAnnotationElement(n.data.id)||e.has(n.data.id))continue;const r=await this.deserialize(n);r&&(this.addOrRebuild(r),r.enableEditing())}}disable(){var r;S(this,_c,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const e=new Map,t=new Map;for(const o of u(this,Qn).values())if(o.disableEditing(),!!o.annotationElementId){if(o.serialize()!==null){e.set(o.annotationElementId,o);continue}else t.set(o.annotationElementId,o);(r=this.getEditableAnnotation(o.annotationElementId))==null||r.show(),o.remove()}if(u(this,fs)){const o=u(this,fs).getEditableAnnotations();for(const l of o){const{id:h}=l.data;if(u(this,Ee).isDeletedAnnotationElement(h))continue;let d=t.get(h);if(d){d.resetAnnotationElement(l),d.show(!1),l.show();continue}d=e.get(h),d&&(u(this,Ee).addChangedExistingAnnotation(d),d.renderAnnotationElement(l)&&d.show(!1)),l.show()}}x(this,Zt,dp).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const o of u(Ci,io).values())n.remove(`${o._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),S(this,_c,!1)}getEditableAnnotation(e){var t;return((t=u(this,fs))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){u(this,Ee).getActive()!==e&&u(this,Ee).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=u(this,hn))!=null&&e.div&&!u(this,Zs)){S(this,Zs,new AbortController);const t=u(this,Ee).combinedSignal(u(this,Zs));u(this,hn).div.addEventListener("pointerdown",x(this,Zt,K_).bind(this),{signal:t}),u(this,hn).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=u(this,hn))!=null&&e.div&&u(this,Zs)&&(u(this,Zs).abort(),S(this,Zs,null),u(this,hn).div.classList.remove("highlighting"))}enableClick(){if(u(this,to))return;S(this,to,new AbortController);const e=u(this,Ee).combinedSignal(u(this,to));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e}),this.div.addEventListener("pointerup",this.pointerup.bind(this),{signal:e})}disableClick(){var e;(e=u(this,to))==null||e.abort(),S(this,to,null)}attach(e){u(this,Qn).set(e.id,e);const{annotationElementId:t}=e;t&&u(this,Ee).isDeletedAnnotationElement(t)&&u(this,Ee).removeDeletedAnnotationElement(e)}detach(e){var t;u(this,Qn).delete(e.id),(t=u(this,La))==null||t.removePointerInTextLayer(e.contentDiv),!u(this,_c)&&e.annotationElementId&&u(this,Ee).addDeletedAnnotationElement(e)}remove(e){this.detach(e),u(this,Ee).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1,u(this,Ec)||this.addInkEditorIfNeeded(!1)}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(u(this,Ee).addDeletedAnnotationElement(e.annotationElementId),Ye.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),u(this,Ee).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(),u(this,Ee).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var n;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!u(this,Js)&&(e._focusEventsAllowed=!1,S(this,Js,setTimeout(()=>{S(this,Js,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:u(this,Ee)._signal}),t.focus())},0))),e._structTreeParentId=(n=u(this,La))==null?void 0:n.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),n=()=>{e.remove()};this.addCommands({cmd:t,undo:n,mustExec:!1})}getNextId(){return u(this,Ee).getId()}combinedSignal(e){return u(this,Ee).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=u(this,Zt,Cv))==null?void 0:e.canCreateNewEmptyEditor()}pasteEditor(e,t){u(this,Ee).updateToolbar(e),u(this,Ee).updateMode(e);const{offsetX:n,offsetY:r}=x(this,Zt,kv).call(this),o=this.getNextId(),l=x(this,Zt,Tv).call(this,{parent:this,id:o,x:n,y:r,uiManager:u(this,Ee),isCentered:!0,...t});l&&this.add(l)}async deserialize(e){var t;return await((t=u(Ci,io).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,u(this,Ee)))||null}createAndAddNewEditor(e,t,n={}){const r=this.getNextId(),o=x(this,Zt,Tv).call(this,{parent:this,id:r,x:e.offsetX,y:e.offsetY,uiManager:u(this,Ee),isCentered:t,...n});return o&&this.add(o),o}addNewEditor(){this.createAndAddNewEditor(x(this,Zt,kv).call(this),!0)}setSelected(e){u(this,Ee).setSelected(e)}toggleSelected(e){u(this,Ee).toggleSelected(e)}unselect(e){u(this,Ee).unselect(e)}pointerup(e){const{isMac:t}=bn.platform;if(!(e.button!==0||e.ctrlKey&&t)&&e.target===this.div&&u(this,no)){if(S(this,no,!1),!u(this,Sc)){S(this,Sc,!0);return}if(u(this,Ee).getMode()===De.STAMP){u(this,Ee).unselectAll();return}this.createAndAddNewEditor(e,!1)}}pointerdown(e){if(u(this,Ee).getMode()===De.HIGHLIGHT&&this.enableTextSelection(),u(this,no)){S(this,no,!1);return}const{isMac:t}=bn.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;S(this,no,!0);const n=u(this,Ee).getActive();S(this,Sc,!n||n.isEmpty())}findNewParent(e,t,n){const r=u(this,Ee).findParent(t,n);return r===null||r===this?!1:(r.changeParent(e),!0)}destroy(){var e,t;((e=u(this,Ee).getActive())==null?void 0:e.parent)===this&&(u(this,Ee).commitOrRemove(),u(this,Ee).setActiveEditor(null)),u(this,Js)&&(clearTimeout(u(this,Js)),S(this,Js,null));for(const n of u(this,Qn).values())(t=u(this,La))==null||t.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,u(this,Qn).clear(),u(this,Ee).removeLayer(this)}render({viewport:e}){this.viewport=e,Fa(this.div,e);for(const t of u(this,Ee).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){u(this,Ee).commitOrRemove(),x(this,Zt,dp).call(this);const t=this.viewport.rotation,n=e.rotation;if(this.viewport=e,Fa(this.div,{rotation:n}),t!==n)for(const r of u(this,Qn).values())r.rotate(n);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return u(this,Ee).viewParameters.realScale}};La=new WeakMap,Sc=new WeakMap,fs=new WeakMap,to=new WeakMap,Js=new WeakMap,Qn=new WeakMap,no=new WeakMap,Ec=new WeakMap,_c=new WeakMap,hn=new WeakMap,Zs=new WeakMap,Ee=new WeakMap,io=new WeakMap,Zt=new WeakSet,K_=function(e){u(this,Ee).unselectAll();const{target:t}=e;if(t===u(this,hn).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&u(this,hn).div.contains(t)){const{isMac:n}=bn.platform;if(e.button!==0||e.ctrlKey&&n)return;u(this,Ee).showAllEditors("highlight",!0,!0),u(this,hn).div.classList.add("free"),this.toggleDrawing(),Ap.startHighlighting(this,u(this,Ee).direction==="ltr",{target:u(this,hn).div,x:e.x,y:e.y}),u(this,hn).div.addEventListener("pointerup",()=>{u(this,hn).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:u(this,Ee)._signal}),e.preventDefault()}},Cv=function(){return u(Ci,io).get(u(this,Ee).getMode())},Tv=function(e){const t=u(this,Zt,Cv);return t?new t.prototype.constructor(e):null},kv=function(){const{x:e,y:t,width:n,height:r}=this.div.getBoundingClientRect(),o=Math.max(0,e),l=Math.max(0,t),h=Math.min(window.innerWidth,e+n),d=Math.min(window.innerHeight,t+r),p=(o+h)/2-e,g=(l+d)/2-t,[y,v]=this.viewport.rotation%180===0?[p,g]:[g,p];return{offsetX:y,offsetY:v}},dp=function(){S(this,Ec,!0);for(const e of u(this,Qn).values())e.isEmpty()&&e.remove();S(this,Ec,!1)},Pe(Ci,"_initialized",!1),T(Ci,io,new Map([sv,fv,Sv,Ap].map(e=>[e._editorType,e])));let xv=Ci;var ps,nd,Tt,er,id,Pv,Ba,Lv,Y_;const Kt=class Kt{constructor({pageIndex:e}){T(this,Ba);T(this,ps,null);T(this,nd,0);T(this,Tt,new Map);T(this,er,new Map);this.pageIndex=e}setParent(e){if(!u(this,ps)){S(this,ps,e);return}if(u(this,ps)!==e){if(u(this,Tt).size>0)for(const t of u(this,Tt).values())t.remove(),e.append(t);S(this,ps,e)}}static get _svgFactory(){return Ue(this,"_svgFactory",new n0)}draw(e,t,n,r=!1){const o=yn(this,nd)._++,l=x(this,Ba,Lv).call(this,e.box);l.classList.add(...e.classNamesForDrawing);const h=Kt._svgFactory.createElement("defs");l.append(h);const d=Kt._svgFactory.createElement("path");h.append(d);const p=`path_p${this.pageIndex}_${o}`;d.setAttribute("id",p),d.setAttribute("d",e.toSVGPath()),r&&u(this,er).set(o,d);const g=x(this,Ba,Y_).call(this,h,p),y=Kt._svgFactory.createElement("use");return l.append(y),l.setAttribute("fill",t),l.setAttribute("fill-opacity",n),y.setAttribute("href",`#${p}`),u(this,Tt).set(o,l),{id:o,clipPathId:`url(#${g})`}}drawOutline(e){const t=yn(this,nd)._++,n=x(this,Ba,Lv).call(this,e.box);n.classList.add(...e.classNamesForOutlining);const r=Kt._svgFactory.createElement("defs");n.append(r);const o=Kt._svgFactory.createElement("path");r.append(o);const l=`path_p${this.pageIndex}_${t}`;o.setAttribute("id",l),o.setAttribute("d",e.toSVGPath()),o.setAttribute("vector-effect","non-scaling-stroke");let h;if(e.mustRemoveSelfIntersections){const g=Kt._svgFactory.createElement("mask");r.append(g),h=`mask_p${this.pageIndex}_${t}`,g.setAttribute("id",h),g.setAttribute("maskUnits","objectBoundingBox");const y=Kt._svgFactory.createElement("rect");g.append(y),y.setAttribute("width","1"),y.setAttribute("height","1"),y.setAttribute("fill","white");const v=Kt._svgFactory.createElement("use");g.append(v),v.setAttribute("href",`#${l}`),v.setAttribute("stroke","none"),v.setAttribute("fill","black"),v.setAttribute("fill-rule","nonzero"),v.classList.add("mask")}const d=Kt._svgFactory.createElement("use");n.append(d),d.setAttribute("href",`#${l}`),h&&d.setAttribute("mask",`url(#${h})`);const p=d.cloneNode();return n.append(p),d.classList.add("mainOutline"),p.classList.add("secondaryOutline"),u(this,Tt).set(t,n),t}finalizeLine(e,t){const n=u(this,er).get(e);u(this,er).delete(e),this.updateBox(e,t.box),n.setAttribute("d",t.toSVGPath())}updateLine(e,t){u(this,Tt).get(e).firstChild.firstChild.setAttribute("d",t.toSVGPath())}updatePath(e,t){u(this,er).get(e).setAttribute("d",t.toSVGPath())}updateBox(e,t){var n;x(n=Kt,id,Pv).call(n,u(this,Tt).get(e),t)}show(e,t){u(this,Tt).get(e).classList.toggle("hidden",!t)}rotate(e,t){u(this,Tt).get(e).setAttribute("data-main-rotation",t)}changeColor(e,t){u(this,Tt).get(e).setAttribute("fill",t)}changeOpacity(e,t){u(this,Tt).get(e).setAttribute("fill-opacity",t)}addClass(e,t){u(this,Tt).get(e).classList.add(t)}removeClass(e,t){u(this,Tt).get(e).classList.remove(t)}getSVGRoot(e){return u(this,Tt).get(e)}remove(e){u(this,er).delete(e),u(this,ps)!==null&&(u(this,Tt).get(e).remove(),u(this,Tt).delete(e))}destroy(){S(this,ps,null);for(const e of u(this,Tt).values())e.remove();u(this,Tt).clear(),u(this,er).clear()}};ps=new WeakMap,nd=new WeakMap,Tt=new WeakMap,er=new WeakMap,id=new WeakSet,Pv=function(e,{x:t=0,y:n=0,width:r=1,height:o=1}={}){const{style:l}=e;l.top=`${100*n}%`,l.left=`${100*t}%`,l.width=`${100*r}%`,l.height=`${100*o}%`},Ba=new WeakSet,Lv=function(e){var n;const t=Kt._svgFactory.create(1,1,!0);return u(this,ps).append(t),t.setAttribute("aria-hidden",!0),x(n=Kt,id,Pv).call(n,t,e),t},Y_=function(e,t){const n=Kt._svgFactory.createElement("clipPath");e.append(n);const r=`clip_${t}`;n.setAttribute("id",r),n.setAttribute("clipPathUnits","objectBoundingBox");const o=Kt._svgFactory.createElement("use");return n.append(o),o.setAttribute("href",`#${t}`),o.classList.add("clip"),r},T(Kt,id);let Rv=Kt;var yL=Me.AbortException,vL=Me.AnnotationEditorLayer,wL=Me.AnnotationEditorParamsType,AL=Me.AnnotationEditorType,bL=Me.AnnotationEditorUIManager,Q_=Me.AnnotationLayer,J_=Me.AnnotationMode,SL=Me.ColorPicker,EL=Me.DOMSVGFactory,_L=Me.DrawLayer,xL=Me.FeatureTest,s0=Me.GlobalWorkerOptions,CL=Me.ImageKind,TL=Me.InvalidPDFException,kL=Me.MissingPDFException,RL=Me.OPS,PL=Me.OutputScale,LL=Me.PDFDataRangeTransport,ML=Me.PDFDateString,IL=Me.PDFWorker,FL=Me.PasswordResponses,DL=Me.PermissionFlag,OL=Me.PixelsPerInch,NL=Me.RenderingCancelledException,Z_=Me.TextLayer,jL=Me.UnexpectedResponseException,BL=Me.Util,zL=Me.VerbosityLevel,HL=Me.XfaLayer,UL=Me.build,$L=Me.createValidAbsoluteUrl,WL=Me.fetchData,ex=Me.getDocument,VL=Me.getFilenameFromUrl,GL=Me.getPdfFilenameFromUrl,qL=Me.getXfaPageViewport,XL=Me.isDataScheme,KL=Me.isPdfFile,YL=Me.noContextMenu,QL=Me.normalizeUnicode,JL=Me.setLayerDimensions,ZL=Me.shadow,tx=Me.version;const eM=Object.freeze(Object.defineProperty({__proto__:null,AbortException:yL,AnnotationEditorLayer:vL,AnnotationEditorParamsType:wL,AnnotationEditorType:AL,AnnotationEditorUIManager:bL,AnnotationLayer:Q_,AnnotationMode:J_,ColorPicker:SL,DOMSVGFactory:EL,DrawLayer:_L,FeatureTest:xL,GlobalWorkerOptions:s0,ImageKind:CL,InvalidPDFException:TL,MissingPDFException:kL,OPS:RL,OutputScale:PL,PDFDataRangeTransport:LL,PDFDateString:ML,PDFWorker:IL,PasswordResponses:FL,PermissionFlag:DL,PixelsPerInch:OL,RenderingCancelledException:NL,TextLayer:Z_,UnexpectedResponseException:jL,Util:BL,VerbosityLevel:zL,XfaLayer:HL,build:UL,createValidAbsoluteUrl:$L,fetchData:WL,getDocument:ex,getFilenameFromUrl:VL,getPdfFilenameFromUrl:GL,getXfaPageViewport:qL,isDataScheme:XL,isPdfFile:KL,noContextMenu:YL,normalizeUnicode:QL,setLayerDimensions:JL,shadow:ZL,version:tx},Symbol.toStringTag,{value:"Module"}));var Ht=function(a,e,t){if(t||arguments.length===2)for(var n=0,r=e.length,o;n<r;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return a.concat(o||Array.prototype.slice.call(e))},tM=["onCopy","onCut","onPaste"],nM=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],iM=["onFocus","onBlur"],sM=["onInput","onInvalid","onReset","onSubmit"],rM=["onLoad","onError"],oM=["onKeyDown","onKeyPress","onKeyUp"],aM=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],lM=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],cM=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],uM=["onSelect"],hM=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],dM=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],fM=["onScroll"],pM=["onWheel"],gM=["onAnimationStart","onAnimationEnd","onAnimationIteration"],mM=["onTransitionEnd"],yM=["onToggle"],vM=["onChange"],wM=Ht(Ht(Ht(Ht(Ht(Ht(Ht(Ht(Ht(Ht(Ht(Ht(Ht(Ht(Ht(Ht(Ht(Ht([],tM,!0),nM,!0),iM,!0),sM,!0),rM,!0),oM,!0),aM,!0),lM,!0),cM,!0),uM,!0),hM,!0),dM,!0),fM,!0),pM,!0),gM,!0),mM,!0),vM,!0),yM,!0);function nx(a,e){var t={};return wM.forEach(function(n){var r=a[n];r&&(e?t[n]=(function(o){return r(o,e(n))}):t[n]=r)}),t}function fd(a){var e=!1,t=new Promise(function(n,r){a.then(function(o){return!e&&n(o)}).catch(function(o){return!e&&r(o)})});return{promise:t,cancel:function(){e=!0}}}function ix(a){var e,t,n="";if(typeof a=="string"||typeof a=="number")n+=a;else if(typeof a=="object")if(Array.isArray(a)){var r=a.length;for(e=0;e<r;e++)a[e]&&(t=ix(a[e]))&&(n&&(n+=" "),n+=t)}else for(t in a)a[t]&&(n&&(n+=" "),n+=t);return n}function Jp(){for(var a,e,t=0,n="",r=arguments.length;t<r;t++)(a=arguments[t])&&(e=ix(a))&&(n&&(n+=" "),n+=e);return n}var AM="Invariant failed";function et(a,e){if(!a)throw new Error(AM)}var oy,Kb;function bM(){if(Kb)return oy;Kb=1;var a=function(){};return oy=a,oy}var SM=bM();const fn=Fv(SM);var Yb=Object.prototype.hasOwnProperty;function Qb(a,e,t){for(t of a.keys())if(xl(t,e))return t}function xl(a,e){var t,n,r;if(a===e)return!0;if(a&&e&&(t=a.constructor)===e.constructor){if(t===Date)return a.getTime()===e.getTime();if(t===RegExp)return a.toString()===e.toString();if(t===Array){if((n=a.length)===e.length)for(;n--&&xl(a[n],e[n]););return n===-1}if(t===Set){if(a.size!==e.size)return!1;for(n of a)if(r=n,r&&typeof r=="object"&&(r=Qb(e,r),!r)||!e.has(r))return!1;return!0}if(t===Map){if(a.size!==e.size)return!1;for(n of a)if(r=n[0],r&&typeof r=="object"&&(r=Qb(e,r),!r)||!xl(n[1],e.get(r)))return!1;return!0}if(t===ArrayBuffer)a=new Uint8Array(a),e=new Uint8Array(e);else if(t===DataView){if((n=a.byteLength)===e.byteLength)for(;n--&&a.getInt8(n)===e.getInt8(n););return n===-1}if(ArrayBuffer.isView(a)){if((n=a.byteLength)===e.byteLength)for(;n--&&a[n]===e[n];);return n===-1}if(!t||typeof a=="object"){n=0;for(t in a)if(Yb.call(a,t)&&++n&&!Yb.call(e,t)||!(t in e)||!xl(a[t],e[t]))return!1;return Object.keys(e).length===n}}return a!==a&&e!==e}const sx=j.createContext(null);function Cl({children:a,type:e}){return P.jsx("div",{className:`react-pdf__message react-pdf__message--${e}`,children:a})}const EM="noopener noreferrer nofollow";class _M{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(e){this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setExternalLinkRel(e){this.externalLinkRel=e}setExternalLinkTarget(e){this.externalLinkTarget=e}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return et(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(e){et(this.pdfViewer),this.pdfViewer.currentPageNumber=e}get rotation(){return 0}set rotation(e){}goToDestination(e){return new Promise(t=>{et(this.pdfDocument),et(e),typeof e=="string"?this.pdfDocument.getDestination(e).then(t):Array.isArray(e)?t(e):e.then(t)}).then(t=>{et(Array.isArray(t));const n=t[0];new Promise(r=>{et(this.pdfDocument),n instanceof Object?this.pdfDocument.getPageIndex(n).then(o=>{r(o)}).catch(()=>{et(!1)}):typeof n=="number"?r(n):et(!1)}).then(r=>{const o=r+1;et(this.pdfViewer),et(o>=1&&o<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:t,pageIndex:r,pageNumber:o})})})}navigateTo(e){this.goToDestination(e)}goToPage(e){const t=e-1;et(this.pdfViewer),et(e>=1&&e<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:t,pageNumber:e})}addLinkAttributes(e,t,n){e.href=t,e.rel=this.externalLinkRel||EM,e.target=n?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}const Jb={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},Zp=typeof window<"u",rx=Zp&&window.location.protocol==="file:";function xM(a){return typeof a<"u"}function ko(a){return xM(a)&&a!==null}function CM(a){return typeof a=="string"}function TM(a){return a instanceof ArrayBuffer}function kM(a){return et(Zp),a instanceof Blob}function Mv(a){return CM(a)&&/^data:/.test(a)}function Zb(a){et(Mv(a));const[e="",t=""]=a.split(",");return e.split(";").indexOf("base64")!==-1?atob(t):unescape(t)}function RM(){return Zp&&window.devicePixelRatio||1}const ox="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function eS(){fn(!rx,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${ox}`)}function PM(){fn(!rx,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${ox}`)}function Na(a){a!=null&&a.cancel&&a.cancel()}function Iv(a,e){return Object.defineProperty(a,"width",{get(){return this.view[2]*e},configurable:!0}),Object.defineProperty(a,"height",{get(){return this.view[3]*e},configurable:!0}),Object.defineProperty(a,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(a,"originalHeight",{get(){return this.view[3]},configurable:!0}),a}function LM(a){return a.name==="RenderingCancelledException"}function MM(a){return new Promise((e,t)=>{const n=new FileReader;n.onload=()=>{if(!n.result)return t(new Error("Error while reading a file."));e(n.result)},n.onerror=r=>{if(!r.target)return t(new Error("Error while reading a file."));const{error:o}=r.target;if(!o)return t(new Error("Error while reading a file."));switch(o.code){case o.NOT_FOUND_ERR:return t(new Error("Error while reading a file: File not found."));case o.SECURITY_ERR:return t(new Error("Error while reading a file: Security error."));case o.ABORT_ERR:return t(new Error("Error while reading a file: Aborted."));default:return t(new Error("Error while reading a file."))}},n.readAsArrayBuffer(a)})}function IM(a,e){switch(e.type){case"RESOLVE":return{value:e.value,error:void 0};case"REJECT":return{value:!1,error:e.error};case"RESET":return{value:void 0,error:void 0};default:return a}}function Cc(){return j.useReducer(IM,{value:void 0,error:void 0})}var FM=function(a,e,t,n){function r(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function h(g){try{p(n.next(g))}catch(y){l(y)}}function d(g){try{p(n.throw(g))}catch(y){l(y)}}function p(g){g.done?o(g.value):r(g.value).then(h,d)}p((n=n.apply(a,e||[])).next())})},tS=function(a,e){var t={};for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&e.indexOf(n)<0&&(t[n]=a[n]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(a);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(a,n[r])&&(t[n[r]]=a[n[r]]);return t};const{PDFDataRangeTransport:DM}=eM,OM=(a,e)=>{switch(e){case Jb.NEED_PASSWORD:{const t=prompt("Enter the password to open this PDF file.");a(t);break}case Jb.INCORRECT_PASSWORD:{const t=prompt("Invalid password. Please try again.");a(t);break}}};function nS(a){return typeof a=="object"&&a!==null&&("data"in a||"range"in a||"url"in a)}const NM=j.forwardRef(function(e,t){var{children:n,className:r,error:o="Failed to load PDF file.",externalLinkRel:l,externalLinkTarget:h,file:d,inputRef:p,imageResourcesPath:g,loading:y="Loading PDF",noData:v="No PDF file specified.",onItemClick:b,onLoadError:A,onLoadProgress:E,onLoadSuccess:C,onPassword:k=OM,onSourceError:L,onSourceSuccess:M,options:F,renderMode:z,rotate:U}=e,N=tS(e,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate"]);const[q,J]=Cc(),{value:se,error:ne}=q,[be,de]=Cc(),{value:ce,error:me}=be,le=j.useRef(new _M),Z=j.useRef([]),V=j.useRef(void 0),ae=j.useRef(void 0);d&&d!==V.current&&nS(d)&&(fn(!xl(d,V.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),V.current=d),F&&F!==ae.current&&(fn(!xl(F,ae.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),ae.current=F);const te=j.useRef({scrollPageIntoView:He=>{const{dest:Ze,pageNumber:vt,pageIndex:ot=vt-1}=He;if(b){b({dest:Ze,pageIndex:ot,pageNumber:vt});return}const en=Z.current[ot];if(en){en.scrollIntoView();return}fn(!1,`An internal link leading to page ${vt} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});j.useImperativeHandle(t,()=>({linkService:le,pages:Z,viewer:te}),[]);function D(){M&&M()}function G(){ne&&(fn(!1,ne.toString()),L&&L(ne))}function oe(){J({type:"RESET"})}j.useEffect(oe,[d,J]);const we=j.useCallback(()=>FM(this,void 0,void 0,function*(){if(!d)return null;if(typeof d=="string")return Mv(d)?{data:Zb(d)}:(eS(),{url:d});if(d instanceof DM)return{range:d};if(TM(d))return{data:d};if(Zp&&kM(d))return{data:yield MM(d)};if(et(typeof d=="object"),et(nS(d)),"url"in d&&typeof d.url=="string"){if(Mv(d.url)){const{url:He}=d,Ze=tS(d,["url"]),vt=Zb(He);return Object.assign({data:vt},Ze)}eS()}return d}),[d]);j.useEffect(()=>{const He=fd(we());return He.promise.then(Ze=>{J({type:"RESOLVE",value:Ze})}).catch(Ze=>{J({type:"REJECT",error:Ze})}),()=>{Na(He)}},[we,J]),j.useEffect(()=>{if(!(typeof se>"u")){if(se===!1){G();return}D()}},[se]);function Te(){ce&&(C&&C(ce),Z.current=new Array(ce.numPages),le.current.setDocument(ce))}function ye(){me&&(fn(!1,me.toString()),A&&A(me))}j.useEffect(function(){de({type:"RESET"})},[de,se]),j.useEffect(function(){if(!se)return;const Ze=F?Object.assign(Object.assign({},se),F):se,vt=ex(Ze);E&&(vt.onProgress=E),k&&(vt.onPassword=k);const ot=vt,en=ot.promise.then(lr=>{de({type:"RESOLVE",value:lr})}).catch(lr=>{ot.destroyed||de({type:"REJECT",error:lr})});return()=>{en.finally(()=>ot.destroy())}},[F,de,se]),j.useEffect(()=>{if(!(typeof ce>"u")){if(ce===!1){ye();return}Te()}},[ce]),j.useEffect(function(){le.current.setViewer(te.current),le.current.setExternalLinkRel(l),le.current.setExternalLinkTarget(h)},[l,h]);const Y=j.useCallback((He,Ze)=>{Z.current[He]=Ze},[]),Se=j.useCallback(He=>{delete Z.current[He]},[]),ke=j.useMemo(()=>({imageResourcesPath:g,linkService:le.current,onItemClick:b,pdf:ce,registerPage:Y,renderMode:z,rotate:U,unregisterPage:Se}),[g,b,ce,Y,z,U,Se]),Ce=j.useMemo(()=>nx(N,()=>ce),[N,ce]);function Rt(){return P.jsx(sx.Provider,{value:ke,children:n})}function ti(){return d?ce==null?P.jsx(Cl,{type:"loading",children:typeof y=="function"?y():y}):ce===!1?P.jsx(Cl,{type:"error",children:typeof o=="function"?o():o}):Rt():P.jsx(Cl,{type:"no-data",children:typeof v=="function"?v():v})}return P.jsx("div",Object.assign({className:Jp("react-pdf__Document",r),ref:p,style:{"--scale-factor":"1"}},Ce,{children:ti()}))});function ax(){return j.useContext(sx)}function lx(){for(var a=[],e=0;e<arguments.length;e++)a[e]=arguments[e];var t=a.filter(Boolean);if(t.length<=1){var n=t[0];return n||null}return function(o){t.forEach(function(l){typeof l=="function"?l(o):l&&(l.current=o)})}}const cx=j.createContext(null),ux={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},jM=/^H(\d+)$/;function BM(a){return a in ux}function eg(a){return"children"in a}function hx(a){return eg(a)?a.children.length===1&&0 in a.children&&"id"in a.children[0]:!1}function zM(a){const e={};if(eg(a)){const{role:t}=a,n=t.match(jM);if(n)e.role="heading",e["aria-level"]=Number(n[1]);else if(BM(t)){const r=ux[t];r&&(e.role=r)}}return e}function dx(a){const e={};if(eg(a)){if(a.alt!==void 0&&(e["aria-label"]=a.alt),a.lang!==void 0&&(e.lang=a.lang),hx(a)){const[t]=a.children;if(t){const n=dx(t);return Object.assign(Object.assign({},e),n)}}}else"id"in a&&(e["aria-owns"]=a.id);return e}function HM(a){return a?Object.assign(Object.assign({},zM(a)),dx(a)):null}function fx({className:a,node:e}){const t=j.useMemo(()=>HM(e),[e]),n=j.useMemo(()=>!eg(e)||hx(e)?null:e.children.map((r,o)=>P.jsx(fx,{node:r},o)),[e]);return P.jsx("span",Object.assign({className:a},t,{children:n}))}function tg(){return j.useContext(cx)}function UM(){const a=tg();et(a);const{onGetStructTreeError:e,onGetStructTreeSuccess:t}=a,[n,r]=Cc(),{value:o,error:l}=n,{customTextRenderer:h,page:d}=a;function p(){o&&t&&t(o)}function g(){l&&(fn(!1,l.toString()),e&&e(l))}return j.useEffect(function(){r({type:"RESET"})},[r,d]),j.useEffect(function(){if(h||!d)return;const v=fd(d.getStructTree()),b=v;return v.promise.then(A=>{r({type:"RESOLVE",value:A})}).catch(A=>{r({type:"REJECT",error:A})}),()=>Na(b)},[h,d,r]),j.useEffect(()=>{if(o!==void 0){if(o===!1){g();return}p()}},[o]),o?P.jsx(fx,{className:"react-pdf__Page__structTree structTree",node:o}):null}const iS=J_;function $M(a){const e=tg();et(e);const t=Object.assign(Object.assign({},e),a),{_className:n,canvasBackground:r,devicePixelRatio:o=RM(),onRenderError:l,onRenderSuccess:h,page:d,renderForms:p,renderTextLayer:g,rotate:y,scale:v}=t,{canvasRef:b}=a;et(d);const A=j.useRef(null);function E(){d&&h&&h(Iv(d,v))}function C(F){LM(F)||(fn(!1,F.toString()),l&&l(F))}const k=j.useMemo(()=>d.getViewport({scale:v*o,rotation:y}),[o,d,y,v]),L=j.useMemo(()=>d.getViewport({scale:v,rotation:y}),[d,y,v]);j.useEffect(function(){if(!d)return;d.cleanup();const{current:z}=A;if(!z)return;z.width=k.width,z.height=k.height,z.style.width=`${Math.floor(L.width)}px`,z.style.height=`${Math.floor(L.height)}px`,z.style.visibility="hidden";const U={annotationMode:p?iS.ENABLE_FORMS:iS.ENABLE,canvasContext:z.getContext("2d",{alpha:!1}),viewport:k};r&&(U.background=r);const N=d.render(U),q=N;return N.promise.then(()=>{z.style.visibility="",E()}).catch(C),()=>Na(q)},[r,d,p,k,L]);const M=j.useCallback(()=>{const{current:F}=A;F&&(F.width=0,F.height=0)},[]);return j.useEffect(()=>M,[M]),P.jsx("canvas",{className:`${n}__canvas`,dir:"ltr",ref:lx(b,A),style:{display:"block",userSelect:"none"},children:g?P.jsx(UM,{}):null})}function WM(a){return"str"in a}function VM(){const a=tg();et(a);const{customTextRenderer:e,onGetTextError:t,onGetTextSuccess:n,onRenderTextLayerError:r,onRenderTextLayerSuccess:o,page:l,pageIndex:h,pageNumber:d,rotate:p,scale:g}=a;et(l);const[y,v]=Cc(),{value:b,error:A}=y,E=j.useRef(null);fn(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function C(){b&&n&&n(b)}function k(){A&&(fn(!1,A.toString()),t&&t(A))}j.useEffect(function(){v({type:"RESET"})},[l,v]),j.useEffect(function(){if(!l)return;const q=fd(l.getTextContent()),J=q;return q.promise.then(se=>{v({type:"RESOLVE",value:se})}).catch(se=>{v({type:"REJECT",error:se})}),()=>Na(J)},[l,v]),j.useEffect(()=>{if(b!==void 0){if(b===!1){k();return}C()}},[b]);const L=j.useCallback(()=>{o&&o()},[o]),M=j.useCallback(N=>{fn(!1,N.toString()),r&&r(N)},[r]);function F(){const N=E.current;N&&N.classList.add("selecting")}function z(){const N=E.current;N&&N.classList.remove("selecting")}const U=j.useMemo(()=>l.getViewport({scale:g,rotation:p}),[l,p,g]);return j.useLayoutEffect(function(){if(!l||!b)return;const{current:q}=E;if(!q)return;q.innerHTML="";const J=l.streamTextContent({includeMarkedContent:!0}),se={container:q,textContentSource:J,viewport:U},ne=new Z_(se),be=ne;return ne.render().then(()=>{const de=document.createElement("div");de.className="endOfContent",q.append(de);const ce=q.querySelectorAll('[role="presentation"]');if(e){let me=0;b.items.forEach((le,Z)=>{if(!WM(le))return;const V=ce[me];if(!V)return;const ae=e(Object.assign({pageIndex:h,pageNumber:d,itemIndex:Z},le));V.innerHTML=ae,me+=le.str&&le.hasEOL?2:1})}L()}).catch(M),()=>Na(be)},[e,M,L,l,h,d,b,U]),P.jsx("div",{className:Jp("react-pdf__Page__textContent","textLayer"),onMouseUp:z,onMouseDown:F,ref:E})}function GM(){const a=ax(),e=tg();et(e);const t=Object.assign(Object.assign({},a),e),{imageResourcesPath:n,linkService:r,onGetAnnotationsError:o,onGetAnnotationsSuccess:l,onRenderAnnotationLayerError:h,onRenderAnnotationLayerSuccess:d,page:p,pdf:g,renderForms:y,rotate:v,scale:b=1}=t;et(g),et(p),et(r);const[A,E]=Cc(),{value:C,error:k}=A,L=j.useRef(null);fn(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function M(){C&&l&&l(C)}function F(){k&&(fn(!1,k.toString()),o&&o(k))}j.useEffect(function(){E({type:"RESET"})},[E,p]),j.useEffect(function(){if(!p)return;const J=fd(p.getAnnotations()),se=J;return J.promise.then(ne=>{E({type:"RESOLVE",value:ne})}).catch(ne=>{E({type:"REJECT",error:ne})}),()=>{Na(se)}},[E,p]),j.useEffect(()=>{if(C!==void 0){if(C===!1){F();return}M()}},[C]);function z(){d&&d()}function U(q){fn(!1,`${q}`),h&&h(q)}const N=j.useMemo(()=>p.getViewport({scale:b,rotation:v}),[p,v,b]);return j.useEffect(function(){if(!g||!p||!r||!C)return;const{current:J}=L;if(!J)return;const se=N.clone({dontFlip:!0}),ne={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,div:J,l10n:null,page:p,structTreeLayer:null,viewport:se},be={annotations:C,annotationStorage:g.annotationStorage,div:J,imageResourcesPath:n,linkService:r,page:p,renderForms:y,viewport:se};J.innerHTML="";try{new Q_(ne).render(be),z()}catch(de){U(de)}return()=>{}},[C,n,r,p,g,y,N]),P.jsx("div",{className:Jp("react-pdf__Page__annotations","annotationLayer"),ref:L})}var qM=function(a,e){var t={};for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&e.indexOf(n)<0&&(t[n]=a[n]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(a);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(a,n[r])&&(t[n[r]]=a[n[r]]);return t};const sS=1;function XM(a){const e=ax(),t=Object.assign(Object.assign({},e),a),{_className:n="react-pdf__Page",_enableRegisterUnregisterPage:r=!0,canvasBackground:o,canvasRef:l,children:h,className:d,customRenderer:p,customTextRenderer:g,devicePixelRatio:y,error:v="Failed to load the page.",height:b,inputRef:A,loading:E="Loading page",noData:C="No page specified.",onGetAnnotationsError:k,onGetAnnotationsSuccess:L,onGetStructTreeError:M,onGetStructTreeSuccess:F,onGetTextError:z,onGetTextSuccess:U,onLoadError:N,onLoadSuccess:q,onRenderAnnotationLayerError:J,onRenderAnnotationLayerSuccess:se,onRenderError:ne,onRenderSuccess:be,onRenderTextLayerError:de,onRenderTextLayerSuccess:ce,pageIndex:me,pageNumber:le,pdf:Z,registerPage:V,renderAnnotationLayer:ae=!0,renderForms:te=!1,renderMode:D="canvas",renderTextLayer:G=!0,rotate:oe,scale:we=sS,unregisterPage:Te,width:ye}=t,Y=qM(t,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[Se,ke]=Cc(),{value:Ce,error:Rt}=Se,ti=j.useRef(null);et(Z);const He=ko(le)?le-1:me??null,Ze=le??(ko(me)?me+1:null),vt=oe??(Ce?Ce.rotate:null),ot=j.useMemo(()=>{if(!Ce)return null;let $i=1;const ms=we??sS;if(ye||b){const po=Ce.getViewport({scale:1,rotation:vt});ye?$i=ye/po.width:b&&($i=b/po.height)}return ms*$i},[b,Ce,vt,we,ye]);j.useEffect(function(){return()=>{ko(He)&&r&&Te&&Te(He)}},[r,Z,He,Te]);function en(){if(q){if(!Ce||!ot)return;q(Iv(Ce,ot))}if(r&&V){if(!ko(He)||!ti.current)return;V(He,ti.current)}}function lr(){Rt&&(fn(!1,Rt.toString()),N&&N(Rt))}j.useEffect(function(){ke({type:"RESET"})},[ke,Z,He]),j.useEffect(function(){if(!Z||!Ze)return;const ms=fd(Z.getPage(Ze)),po=ms;return ms.promise.then(ys=>{ke({type:"RESOLVE",value:ys})}).catch(ys=>{ke({type:"REJECT",error:ys})}),()=>Na(po)},[ke,Z,Ze]),j.useEffect(()=>{if(Ce!==void 0){if(Ce===!1){lr();return}en()}},[Ce,ot]);const Lc=j.useMemo(()=>Ce&&ko(He)&&Ze&&ko(vt)&&ko(ot)?{_className:n,canvasBackground:o,customTextRenderer:g,devicePixelRatio:y,onGetAnnotationsError:k,onGetAnnotationsSuccess:L,onGetStructTreeError:M,onGetStructTreeSuccess:F,onGetTextError:z,onGetTextSuccess:U,onRenderAnnotationLayerError:J,onRenderAnnotationLayerSuccess:se,onRenderError:ne,onRenderSuccess:be,onRenderTextLayerError:de,onRenderTextLayerSuccess:ce,page:Ce,pageIndex:He,pageNumber:Ze,renderForms:te,renderTextLayer:G,rotate:vt,scale:ot}:null,[n,o,g,y,k,L,M,F,z,U,J,se,ne,be,de,ce,Ce,He,Ze,te,G,vt,ot]),fo=j.useMemo(()=>nx(Y,()=>Ce&&(ot?Iv(Ce,ot):void 0)),[Y,Ce,ot]),vi=`${He}@${ot}/${vt}`;function Mc(){switch(D){case"custom":return et(p),P.jsx(p,{},`${vi}_custom`);case"none":return null;case"canvas":default:return P.jsx($M,{canvasRef:l},`${vi}_canvas`)}}function pd(){return G?P.jsx(VM,{},`${vi}_text`):null}function gd(){return ae?P.jsx(GM,{},`${vi}_annotations`):null}function md(){return P.jsxs(cx.Provider,{value:Lc,children:[Mc(),pd(),gd(),h]})}function yd(){return Ze?Z===null||Ce===void 0||Ce===null?P.jsx(Cl,{type:"loading",children:typeof E=="function"?E():E}):Z===!1||Ce===!1?P.jsx(Cl,{type:"error",children:typeof v=="function"?v():v}):md():P.jsx(Cl,{type:"no-data",children:typeof C=="function"?C():C})}return P.jsx("div",Object.assign({className:Jp(n,d),"data-page-number":Ze,ref:lx(A,ti),style:{"--scale-factor":`${ot}`,backgroundColor:o||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},fo,{children:yd()}))}PM();s0.workerSrc="pdf.worker.mjs";s0.workerSrc=`//cdnjs.cloudflare.com/ajax/libs/pdf.js/${tx}/pdf.worker.min.js`;function KM({pdfUrl:a,annotations:e,onAnnotationsChange:t,fontSize:n,fontFamily:r,color:o,bold:l,italic:h}){var U;const[d,p]=j.useState(0),[g,y]=j.useState(1),[v,b]=j.useState(null),[A,E]=j.useState(600),C=j.useRef(null);function k({numPages:N}){p(N)}const L=N=>{const q=N.currentTarget.getBoundingClientRect(),J=(N.clientX-q.left)/q.width,se=(N.clientY-q.top)/q.height,ne={id:`annotation-${Date.now()}`,text:"Click to edit",x:J,y:se,fontSize:n,fontFamily:r,color:o,bold:l,italic:h,pageNumber:g};t([...e,ne]),b(ne.id)},M=(N,q)=>{t(e.map(J=>J.id===N?{...J,text:q}:J))},F=N=>{t(e.filter(q=>q.id!==N)),v===N&&b(null)},z=e.filter(N=>N.pageNumber===g);return P.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[P.jsxs("div",{ref:C,style:{position:"relative",border:"2px solid #ccc",borderRadius:"4px",overflow:"auto",maxHeight:"80vh",backgroundColor:"#f5f5f5"},children:[P.jsx(NM,{file:a,onLoadSuccess:k,children:P.jsx(XM,{pageNumber:g,width:A,renderTextLayer:!1,renderAnnotationLayer:!1})}),P.jsx("div",{onClick:L,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",cursor:"crosshair"},children:z.map(N=>P.jsx("div",{style:{position:"absolute",left:`${N.x*100}%`,top:`${N.y*100}%`,transform:"translate(-50%, -50%)",cursor:"pointer",zIndex:v===N.id?1e3:100},onClick:q=>{q.stopPropagation(),b(N.id)},children:P.jsx("div",{style:{fontSize:`${N.fontSize}px`,fontFamily:N.fontFamily,color:N.color,fontWeight:N.bold?"bold":"normal",fontStyle:N.italic?"italic":"normal",backgroundColor:v===N.id?"rgba(255, 255, 0, 0.3)":"transparent",padding:"2px 4px",whiteSpace:"nowrap",border:v===N.id?"2px solid #007bff":"1px dashed rgba(0,0,0,0.2)"},children:N.text})},N.id))})]}),d>1&&P.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"1rem",alignItems:"center"},children:[P.jsx("button",{onClick:()=>y(N=>Math.max(1,N-1)),disabled:g<=1,style:{padding:"0.5rem 1rem",backgroundColor:g<=1?"#ccc":"#007bff",color:"white",border:"none",borderRadius:"4px",cursor:g<=1?"not-allowed":"pointer"},children:"Previous"}),P.jsxs("span",{children:["Page ",g," of ",d]}),P.jsx("button",{onClick:()=>y(N=>Math.min(d,N+1)),disabled:g>=d,style:{padding:"0.5rem 1rem",backgroundColor:g>=d?"#ccc":"#007bff",color:"white",border:"none",borderRadius:"4px",cursor:g>=d?"not-allowed":"pointer"},children:"Next"})]}),v&&P.jsxs("div",{style:{padding:"1rem",border:"1px solid #ddd",borderRadius:"4px",backgroundColor:"#f9f9f9"},children:[P.jsx("h4",{style:{marginTop:0},children:"Edit Annotation"}),P.jsx("div",{style:{marginBottom:"1rem"},children:P.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold"},children:["Text:",P.jsx("input",{type:"text",value:((U=e.find(N=>N.id===v))==null?void 0:U.text)||"",onChange:N=>M(v,N.target.value),style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem",fontSize:"1rem"}})]})}),P.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[P.jsx("button",{onClick:()=>b(null),style:{padding:"0.5rem 1rem",backgroundColor:"#6c757d",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Done"}),P.jsx("button",{onClick:()=>F(v),style:{padding:"0.5rem 1rem",backgroundColor:"#dc3545",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Delete"})]})]})]})}function YM(){const{templateId:a}=ZC(),[e,t]=j.useState(null),[n,r]=j.useState({}),[o,l]=j.useState([]),[h,d]=j.useState([]),[p,g]=j.useState(!1),[y,v]=j.useState(!1),[b,A]=j.useState(!1),[E,C]=j.useState(null),[k,L]=j.useState(null),[M,F]=j.useState(null),[z,U]=j.useState(12),[N,q]=j.useState("Helvetica"),[J,se]=j.useState("#000000"),[ne,be]=j.useState(!1),[de,ce]=j.useState(!1),me=j.useRef(null),le=j.useRef(n),Z=j.useRef(o);j.useEffect(()=>{le.current=n,Z.current=o},[n,o]);const V=VS();j.useEffect(()=>{if(!a)return;(async()=>{try{const ke=(await GS()).find(Ce=>Ce.id===a);ke&&t(ke)}catch(Se){console.error("Failed to load template:",Se)}})()},[a]);const ae=j.useCallback(async()=>{if(a)try{const Y=await hR(a);d(Y)}catch(Y){console.error("Failed to load drafts:",Y)}},[a]);j.useEffect(()=>{ae()},[ae]),j.useEffect(()=>{const Y=Object.keys(n).length>0,Se=o.length>0;if(!(!Y&&!Se))return me.current&&clearTimeout(me.current),me.current=setTimeout(()=>{te(!0)},3e4),()=>{me.current&&clearTimeout(me.current)}},[n,o]);const te=async(Y=!1)=>{var Ce,Rt;if(!a)return;const Se=Object.keys(le.current).length>0,ke=Z.current.length>0;if(!Se&&!ke){Y||C("Please fill in at least one field or add annotations before saving.");return}v(!0),C(null),L(null);try{await kb({templateId:a,formData:le.current,annotations:Z.current.length>0?Z.current:void 0}),F(new Date),L(Y?"Auto-saved successfully!":"Draft saved successfully!"),setTimeout(()=>L(null),3e3),await ae()}catch(ti){const He=((Rt=(Ce=ti.response)==null?void 0:Ce.data)==null?void 0:Rt.error)||"Failed to save draft. Please try again.";C(He),Y&&setTimeout(()=>C(null),5e3)}finally{v(!1)}},D=async Y=>{var Se,ke;g(!0),C(null);try{const Ce=await dR(Y);r(Ce.formData),l(Ce.annotations||[]),L("Draft loaded successfully!"),setTimeout(()=>L(null),3e3)}catch(Ce){C(((ke=(Se=Ce.response)==null?void 0:Se.data)==null?void 0:ke.error)||"Failed to load draft.")}finally{g(!1)}},G=async()=>{var ke,Ce;if(!a)return;const Y=Object.keys(n).length>0,Se=o.length>0;if(!Y&&!Se){C("Please fill in the form or add annotations before exporting.");return}A(!0),C(null);try{const Rt=await kb({templateId:a,formData:n,annotations:o.length>0?o:void 0});await fR(Rt.id);const ti=localStorage.getItem("authToken"),He=pR(Rt.id),Ze=await fetch(He,{headers:{Authorization:`Bearer ${ti}`}});if(!Ze.ok)throw new Error("Failed to download PDF");const vt=await Ze.blob(),ot=window.URL.createObjectURL(vt),en=document.createElement("a");en.href=ot,en.download=`filled-form-${new Date().toISOString().split("T")[0]}.pdf`,document.body.appendChild(en),en.click(),window.URL.revokeObjectURL(ot),document.body.removeChild(en),L("PDF exported and downloaded successfully!"),setTimeout(()=>L(null),3e3)}catch(Rt){C(((Ce=(ke=Rt.response)==null?void 0:ke.data)==null?void 0:Ce.error)||Rt.message||"Failed to export PDF. Please try again.")}finally{A(!1)}},oe=(Y,Se)=>{r(ke=>({...ke,[Y]:Se}))},we=()=>{WS()};if(!a)return P.jsxs("div",{style:{padding:"2rem"},children:[P.jsx("h1",{children:"Editor"}),P.jsx("p",{children:"Missing templateId in URL."}),P.jsx(pp,{to:"/templates",children:"Back to Templates"})]});const Te=lR(a),ye=(e==null?void 0:e.hasFormFields)===!1;return P.jsxs("div",{style:{padding:"2rem",maxWidth:"1400px",margin:"0 auto"},children:[P.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[P.jsxs("div",{children:[P.jsx("h1",{children:"Fill PDF Form"}),V&&P.jsxs("p",{style:{color:"#666"},children:["Logged in as: ",V.fullName]}),e&&P.jsx("p",{style:{color:"#888",fontSize:"0.9rem"},children:ye?" Unfillable Form (Manual Annotation Mode)":" Fillable Form (Field Mode)"})]}),P.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[P.jsx(pp,{to:"/templates",style:{padding:"0.5rem 1rem",textDecoration:"none",border:"1px solid #ccc",borderRadius:"4px"},children:" Back to Templates"}),P.jsx("button",{onClick:we,style:{padding:"0.5rem 1rem",backgroundColor:"#dc3545",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Logout"})]})]}),E&&P.jsxs("div",{style:{padding:"1rem",marginBottom:"1rem",backgroundColor:"#fee",border:"1px solid #fcc",borderRadius:"4px",color:"#c00"},children:[" ",E]}),k&&P.jsxs("div",{style:{padding:"1rem",marginBottom:"1rem",backgroundColor:"#efe",border:"1px solid #cfc",borderRadius:"4px",color:"#060"},children:[" ",k]}),P.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"2rem"},children:[P.jsxs("div",{children:[P.jsxs("h2",{children:["PDF ",ye?"Annotation":"Preview"]}),ye?P.jsx(KM,{pdfUrl:Te,annotations:o,onAnnotationsChange:l,fontSize:z,fontFamily:N,color:J,bold:ne,italic:de}):P.jsx("div",{style:{border:"2px solid #ccc",borderRadius:"4px",height:"80vh",overflow:"auto"},children:P.jsx("iframe",{title:"Template PDF",src:Te,style:{width:"100%",height:"100%",border:"none"}})})]}),P.jsxs("div",{children:[P.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[P.jsx("h2",{children:ye?"Annotation Toolbar":"Fill Form"}),M&&P.jsxs("span",{style:{fontSize:"0.9rem",color:"#666"},children:["Last saved: ",M.toLocaleTimeString()]})]}),ye?P.jsxs("div",{style:{marginBottom:"2rem",padding:"1.5rem",border:"1px solid #ddd",borderRadius:"4px",backgroundColor:"#f9f9f9"},children:[P.jsx("h3",{style:{marginTop:0},children:"Text Styling"}),P.jsx("div",{style:{marginBottom:"1rem"},children:P.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold"},children:["Font Size:",P.jsxs("select",{value:z,onChange:Y=>U(Number(Y.target.value)),style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem",fontSize:"1rem"},children:[P.jsx("option",{value:8,children:"8pt"}),P.jsx("option",{value:10,children:"10pt"}),P.jsx("option",{value:12,children:"12pt"}),P.jsx("option",{value:14,children:"14pt"}),P.jsx("option",{value:16,children:"16pt"}),P.jsx("option",{value:18,children:"18pt"})]})]})}),P.jsx("div",{style:{marginBottom:"1rem"},children:P.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold"},children:["Font Family:",P.jsxs("select",{value:N,onChange:Y=>q(Y.target.value),style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem",fontSize:"1rem"},children:[P.jsx("option",{value:"Helvetica",children:"Helvetica"}),P.jsx("option",{value:"Times",children:"Times"}),P.jsx("option",{value:"Courier",children:"Courier"})]})]})}),P.jsx("div",{style:{marginBottom:"1rem"},children:P.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold"},children:["Color:",P.jsx("input",{type:"color",value:J,onChange:Y=>se(Y.target.value),style:{width:"100%",padding:"0.25rem",marginTop:"0.25rem",height:"40px"}})]})}),P.jsxs("div",{style:{marginBottom:"1rem",display:"flex",gap:"1rem"},children:[P.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[P.jsx("input",{type:"checkbox",checked:ne,onChange:Y=>be(Y.target.checked)}),P.jsx("strong",{children:"Bold"})]}),P.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[P.jsx("input",{type:"checkbox",checked:de,onChange:Y=>ce(Y.target.checked)}),P.jsx("em",{children:"Italic"})]})]}),P.jsxs("div",{style:{padding:"1rem",backgroundColor:"#e7f3ff",border:"1px solid #b3d9ff",borderRadius:"4px"},children:[P.jsx("strong",{children:" How to use:"}),P.jsxs("ul",{style:{marginTop:"0.5rem",marginBottom:0,paddingLeft:"1.5rem"},children:[P.jsx("li",{children:"Click anywhere on the PDF to place a text box"}),P.jsx("li",{children:"Click a text box to select and edit it"}),P.jsx("li",{children:"Use the toolbar above to change text styling"}),P.jsx("li",{children:"Delete unwanted annotations using the Delete button"})]})]})]}):P.jsxs("div",{style:{marginBottom:"2rem",padding:"1.5rem",border:"1px solid #ddd",borderRadius:"4px",backgroundColor:"#f9f9f9"},children:[P.jsx("h3",{style:{marginTop:0},children:"Patient Information"}),P.jsx("div",{style:{marginBottom:"1rem"},children:P.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold"},children:["Full Name:",P.jsx("input",{type:"text",value:n.fullName||"",onChange:Y=>oe("fullName",Y.target.value),placeholder:"Enter full name",style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem",fontSize:"1rem"}})]})}),P.jsx("div",{style:{marginBottom:"1rem"},children:P.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold"},children:["Date of Birth:",P.jsx("input",{type:"date",value:n.dateOfBirth||"",onChange:Y=>oe("dateOfBirth",Y.target.value),style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem",fontSize:"1rem"}})]})}),P.jsx("div",{style:{marginBottom:"1rem"},children:P.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold"},children:["Phone Number:",P.jsx("input",{type:"tel",value:n.phoneNumber||"",onChange:Y=>oe("phoneNumber",Y.target.value),placeholder:"(123) 456-7890",style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem",fontSize:"1rem"}})]})}),P.jsx("div",{style:{marginBottom:"1rem"},children:P.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold"},children:["Email:",P.jsx("input",{type:"email",value:n.email||"",onChange:Y=>oe("email",Y.target.value),placeholder:"email@example.com",style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem",fontSize:"1rem"}})]})}),P.jsx("div",{style:{marginBottom:"1rem"},children:P.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold"},children:["Address:",P.jsx("textarea",{value:n.address||"",onChange:Y=>oe("address",Y.target.value),placeholder:"Street address, City, State, ZIP",rows:3,style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem",fontSize:"1rem"}})]})})]}),P.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"2rem"},children:[P.jsx("button",{onClick:()=>te(!1),disabled:y||p,style:{flex:1,padding:"0.75rem",fontSize:"1rem",backgroundColor:"#28a745",color:"white",border:"none",borderRadius:"4px",cursor:y||p?"not-allowed":"pointer",opacity:y||p?.6:1},children:y?"Saving...":" Save Draft"}),P.jsx("button",{onClick:G,disabled:b||y||p,style:{flex:1,padding:"0.75rem",fontSize:"1rem",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"4px",cursor:b||y||p?"not-allowed":"pointer",opacity:b||y||p?.6:1},children:b?"Exporting...":" Download PDF"})]}),h.length>0&&P.jsxs("div",{style:{marginTop:"2rem",padding:"1.5rem",border:"1px solid #ddd",borderRadius:"4px",backgroundColor:"#f9f9f9"},children:[P.jsx("h3",{style:{marginTop:0},children:"Your Saved Drafts"}),P.jsx("ul",{style:{listStyle:"none",padding:0},children:h.map(Y=>P.jsx("li",{style:{marginBottom:"0.5rem",padding:"0.75rem",backgroundColor:"white",border:"1px solid #ddd",borderRadius:"4px"},children:P.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[P.jsxs("div",{children:[P.jsxs("strong",{children:["Version ",Y.version]}),P.jsx("br",{}),P.jsxs("small",{style:{color:"#666"},children:["Saved: ",new Date(Y.updatedAtUtc).toLocaleString()]})]}),P.jsx("button",{onClick:()=>D(Y.id),disabled:p,style:{padding:"0.5rem 1rem",backgroundColor:"#17a2b8",color:"white",border:"none",borderRadius:"4px",cursor:p?"not-allowed":"pointer"},children:"Load"})]})},Y.id))})]}),P.jsxs("div",{style:{marginTop:"2rem",padding:"1rem",backgroundColor:"#e7f3ff",border:"1px solid #b3d9ff",borderRadius:"4px"},children:[P.jsx("strong",{children:" Tips:"}),P.jsxs("ul",{style:{marginTop:"0.5rem",marginBottom:0},children:[P.jsxs("li",{children:["Your ",ye?"annotations":"form"," auto-save every 30 seconds"]}),P.jsx("li",{children:'Click "Save Draft" to manually save your progress'}),P.jsx("li",{children:"Load previous drafts to continue where you left off"}),P.jsx("li",{children:'Click "Download PDF" to export and download the filled form'})]})]})]})]})]})}function rS({children:a}){return sR()?P.jsx(P.Fragment,{children:a}):P.jsx(wS,{to:"/login",replace:!0})}function QM(){return P.jsxs(gT,{children:[P.jsx(fl,{path:"/login",element:P.jsx(rR,{})}),P.jsx(fl,{path:"/register",element:P.jsx(oR,{})}),P.jsx(fl,{path:"/templates",element:P.jsx(rS,{children:P.jsx(uR,{})})}),P.jsx(fl,{path:"/editor/:templateId",element:P.jsx(rS,{children:P.jsx(YM,{})})}),P.jsx(fl,{path:"/",element:P.jsx(wS,{to:"/templates",replace:!0})})]})}SC.createRoot(document.getElementById("root")).render(P.jsx(lS.StrictMode,{children:P.jsx(ST,{children:P.jsx(QM,{})})}));
